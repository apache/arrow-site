---
layout: post
title: "Apache Arrow 0.15.0 Release"
date: "2019-09-18 00:00:00 -0600"
author: pmc
categories: [release]
---
<!--
{% comment %}
Licensed to the Apache Software Foundation (ASF) under one or more
contributor license agreements.  See the NOTICE file distributed with
this work for additional information regarding copyright ownership.
The ASF licenses this file to you under the Apache License, Version 2.0
(the "License"); you may not use this file except in compliance with
the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
{% endcomment %}
-->

The Apache Arrow team is pleased to announce the 0.15.0 release. This
covers over 2 months of development work and includes [**N resolved
issues**][1] from [**N distinct contributors**][2].  See the Install
Page to learn how to get the libraries for your platform. The
[complete changelog][3] is also available.

This post will give some brief highlights in the project since the
0.14.0 release in July.

## New committers

Since the 0.14.0 release, we've added four new committers:

* [Ben Kietzman][4]
* [David Li][5]
* [Kenta Murata][6]
* [Neal Richardson][7]

In addition, [Sebastien Binet][8] and [Micah Kornfield][9] have join the PMC.

Thank you for all your contributions!

## TODO: Add key topics


## Columnar Format Notes

The format gets new datatypes : LargeList(ARROW-4810), LargeBinary and
LargeString (ARROW-750).  LargeList is similar to List but with 64-bit
offsets instead of 32-bit.  The same relationship holds for LargeBinary
and LargeString with respect to Binary and String.

TODO comment on IPC changes.

## Arrow Flight notes

A getFlightSchema method is added to the Flight RPC protocol (ARROW-6094).
As the name suggests, it returns the schema for a given Flight descriptor
on the server.  This is useful for cases where the Flight locations are
not immediately available, depending on the server implementation.

Flight implementations for C++ and Java now implement half-closed
semantics for DoPut (ARROW-6063).  The client can close the writing
end of the stream to signal that it has finished sending the Flight
data, but still receive the batch-specific response and its associated
metadata.

## C++ notes

C++ now supports the LargeList, LargeBinary and LargeString datatypes.

The Status class gains the ability to carry additional subsystem-specific
data with it, under the form of an opaque StatusDetail interface (ARROW-4036).
This allows, for example, to store not only an exception message coming from
Python but the actual Python exception object, such as to raise it again if
the Status is propagated back to Python.  It can also enable the consumer
of Status to inspect the subsystem-specific error, such as a finer-grained
Flight error code.

DataType and Schema equality are significantly faster (ARROW-6038).

The Column class is completely removed, as it did not have a strong enough
motivation for existing between ChunkedArray and RecordBatch / Table
(ARROW-5893).

### Parquet

The 0.15 release includes many improvements to the Apache Parquet C++ internals,
resulting in greatly improved read and write performance. We described the work
and published some benchmarks in a [recent blog post][15].

### CSV reader

The CSV reader is now more flexible in terms of how column names are chosen
(ARROW-6231) and column selection (ARROW-5977).

### Memory layer

Arrow now has the option to allocate memory using the mimalloc memory
allocator.  jemalloc is still preferred for best performance, but mimalloc
is a reasonable alternative to the system allocator on Windows where jemalloc
is not currently supported.

Also, we now expose explicit global functions to get a MemoryPool for each
of the jemalloc allocator, mimalloc allocator and system allocator (ARROW-6292).

The vendored jemalloc version is bumped from 4.5.x to 5.2.x (ARROW-6549).
Performance characteristics may differ on memory allocation-heavy workloads,
though we did not notice any significant regression on our suite of
micro-benchmarks (and a multi-threaded benchmark of reading a CSV file
showed a 25% speedup).

### Filesystem layer

A S3 FileSystem implementation is now available.  It depends on the AWS SDK
for C++.

### I/O layer

Significant improvements were made to the Arrow I/O stack.

* ARROW-6180: Add RandomAccessFile::GetStream that returns an InputStream over
  a fixed subset of the file.
* ARROW-6381: Improve performance of small writes with BufferOutputStream
* ARROW-2490: Streamline concurrency semantics of InputStream implementations,
  and add debug checks for race conditions between non-thread-safe InputStream
  operations.
* ARROW-6527: Add an OutputStream::Write overload that takes an owned Buffer
  rather than a raw memory area.  This allows OutputStream implementations
  to safely implement delayed writing without having to copy the data.

### Tensors

There are three improvements of Tensor and SparseTensor in this release.

* Add Tensor::Value template function for element access
* Add EqualOptions support in Tensor::Equals function, that allows us to control the way to compare two float tensors
* Add smaller bit-width index supports in SparseTensor

## C# Notes


## Go notes


## Java notes

* Added an initial version of an Avro adapter
* To improve the JDBC adapter performance, refactored consume data logic and implemented an iterator API to prevent loading all data into one vector
* Implemented subField encoding for complex type, now List and Struct vectors subField encoding is available
* Implemented visitor API for vector/range/type/approx equals compare
* Performed a lot of optimization and refactoring for DictionaryEncoder, supporting all data types and avoiding memory copy via hash table and visitor API
* Introduced [Error Prone][10] into code base to catch more potential errors earlier
* Fixed the bug where dictionary entries were required in IPC streams even when empty; readers can now also read interleaved messages

## JavaScript Notes


## MATLAB Notes


## Parquet notes

A number of significant performance improvements, especially around
dictionary-encoded data, have been added.  Both reading and writing Parquet
data from/to Arrow are sped up (ARROW-3246, ARROW-6152, ARROW-3325, ARROW-3772,
ARROW-4398, ARROW-6417).

## Python notes

The FileSystem API, implemented in C++, is now available in Python (ARROW-5494).

The API for extension types has been straightened and definition of
custom extension types in Python is now more powerful (ARROW-5610).

Sparse tensors are now available in Python (ARROW-4453).

A potential crash when handling Python dates and datetimes was fixed
(ARROW-6597).

## Ruby and C GLib notes


## Rust notes

### Rust Arrow

* Add explicit SIMD vectorization for the divide kernel
* Add a feature to disable SIMD
* Use "if cfg!" pattern
* Optimizations to BooleanBufferBuilder::append_slice
* Implemented Debug trait for List/Struct/BinaryArray

### Rust Parquet

* Implement Arrow record reader
* Add converter that is used to convert record reader's content to arrow primitive array.

### Rust DataFusion

* Preview of new query execution engine using an extensible trait-based physical execution plan that supports parallel execution using threads
* ExecutionContext now has a register_parquet convenience method for registering Parquet data sources
* Fixed bug in type coercion optimizer rule
* TableProvider.scan() now returns a thread-safe BatchIterator
* Remove use of bare trait objects (switched to using dyn syntax)
* Adds casting from unsigned to signed integer data types

## R notes

A major development since the 0.14 release was the arrival of the `arrow` R
package on [CRAN][11]. We wrote about this in August on the [Arrow blog][12].
In addition to the package availability on CRAN, we also published
[package documentation][13] on the Arrow website.

The 0.15 R package includes many of the enhancements in the C++ library
release, such as the Parquet performance improvements and the FileSystem API.
In addition, there are a number of upgrades that make it easier to read and
write data, specify types and schema, and interact with Arrow tables and record
batches in R.

For more on what's in the 0.15 R package, see the [changelog][14].

## Community Discussions Ongoing

There are a number of active discussions ongoing on the developer
dev@arrow.apache.org mailing list. We look forward to hearing from the
community there:

* TODO: enumerate discussions

[1]: https://issues.apache.org/jira/issues/?jql=project%20%3D%20ARROW%20AND%20status%20%3D%20Resolved%20AND%20fixVersion%20%3D%200.15.0
[2]: https://arrow.apache.org/release/0.15.0.html#contributors
[3]: https://arrow.apache.org/release/0.15.0.html
[4]: https://github.com/bkietz
[5]: https://github.com/lidavidm
[6]: https://github.com/mrkn
[7]: https://github.com/nealrichardson
[8]: https://github.com/sbinet
[9]: https://github.com/emkornfield
[10]: https://github.com/google/error-prone
[11]: https://cran.r-project.org/package=arrow
[12]: https://arrow.apache.org/blog/2019/08/08/r-package-on-cran/
[13]: https://arrow.apache.org/docs/r
[14]: http://arrow.apache.org/docs/r/news/
[15]: https://arrow.apache.org/blog/2019/09/05/faster-strings-cpp-parquet/
