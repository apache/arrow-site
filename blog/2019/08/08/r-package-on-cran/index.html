<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <title>Apache Arrow Homepage</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Jekyll v3.8.4">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic,900">

    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/syntax.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107500873-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments)};
  gtag('js', new Date());

  gtag('config', 'UA-107500873-1');
</script>

    
  </head>


<body class="wrap">
  <header>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
  <a class="navbar-brand" href="/"><img src="/img/arrow-inverse-300px.png" height="60px"/></a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#arrow-navbar" aria-controls="arrow-navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="arrow-navbar">
      <ul class="nav navbar-nav">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#"
             id="navbarDropdownProjectLinks" role="button" data-toggle="dropdown"
             aria-haspopup="true" aria-expanded="false">
             Project Links
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownProjectLinks">
            <a class="dropdown-item" href="/install/">Installation</a>
            <a class="dropdown-item" href="/release/">Releases</a>
            <a class="dropdown-item" href="/faq/">FAQ</a>
            <a class="dropdown-item" href="/blog/">Blog</a>
            <a class="dropdown-item" href="https://github.com/apache/arrow">Source Code</a>
            <a class="dropdown-item" href="https://issues.apache.org/jira/browse/ARROW">Issue Tracker</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#"
             id="navbarDropdownCommunity" role="button" data-toggle="dropdown"
             aria-haspopup="true" aria-expanded="false">
             Community
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownCommunity">
            <a class="dropdown-item" href="http://mail-archives.apache.org/mod_mbox/arrow-user/">User Mailing List</a>
            <a class="dropdown-item" href="http://mail-archives.apache.org/mod_mbox/arrow-dev/">Dev Mailing List</a>
            <a class="dropdown-item" href="https://cwiki.apache.org/confluence/display/ARROW">Developer Wiki</a>
            <a class="dropdown-item" href="/committers/">Committers</a>
            <a class="dropdown-item" href="/powered_by/">Powered By</a>
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/docs/format/README.html"
             role="button" aria-haspopup="true" aria-expanded="false">
             Specification
          </a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#"
             id="navbarDropdownDocumentation" role="button" data-toggle="dropdown"
             aria-haspopup="true" aria-expanded="false">
             Documentation
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownDocumentation">
            <a class="dropdown-item" href="/docs">Project Docs</a>
            <a class="dropdown-item" href="/docs/python">Python</a>
            <a class="dropdown-item" href="/docs/cpp">C++</a>
            <a class="dropdown-item" href="/docs/java">Java</a>
            <a class="dropdown-item" href="/docs/c_glib">C GLib</a>
            <a class="dropdown-item" href="/docs/js">JavaScript</a>
            <a class="dropdown-item" href="/docs/r">R</a>
          </div>
        </li>
        <!-- <li><a href="/blog">Blog</a></li> -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#"
             id="navbarDropdownASF" role="button" data-toggle="dropdown"
             aria-haspopup="true" aria-expanded="false">
             ASF Links
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownASF">
            <a class="dropdown-item" href="http://www.apache.org/">ASF Website</a>
            <a class="dropdown-item" href="http://www.apache.org/licenses/">License</a>
            <a class="dropdown-item" href="http://www.apache.org/foundation/sponsorship.html">Donate</a>
            <a class="dropdown-item" href="http://www.apache.org/foundation/thanks.html">Thanks</a>
            <a class="dropdown-item" href="http://www.apache.org/security/">Security</a>
          </div>
        </li>
      </ul>
      <div class="flex-row justify-content-end ml-md-auto">
        <a class="d-sm-none d-md-inline pr-2" href="https://www.apache.org/events/current-event.html">
          <img src="https://www.apache.org/events/current-event-234x60.png"/>
        </a>
        <a href="http://www.apache.org/">
          <img src="/img/asf_logo.svg" width="120px"/>
        </a>
      </div>
      </div><!-- /.navbar-collapse -->
    </div>
  </nav>

  </header>

  <div class="container p-lg-4">
    <main role="main">
    
    
    
<h1>
  Apache Arrow R Package On CRAN
  <a href="/blog/2019/08/08/r-package-on-cran/" class="permalink" title="Permalink">∞</a>
</h1>



<p>
  <span class="badge badge-secondary">Published</span>
  <span class="published">
    08 Aug 2019
  </span>
  <br />
  <span class="badge badge-secondary">By</span>
  
    <a href="http://github.com/nealrichardson">Neal Richardson (npr) </a>
  
</p>


    <!--

-->

<p>We are very excited to announce that the <code class="highlighter-rouge">arrow</code> R package is now available on
<a href="https://cran.r-project.org/">CRAN</a>.</p>

<p><a href="https://arrow.apache.org/">Apache Arrow</a> is a cross-language development
platform for in-memory data that specifies a standardized columnar memory
format for flat and hierarchical data, organized for efficient analytic
operations on modern hardware. The <code class="highlighter-rouge">arrow</code> package provides an R interface to
the Arrow C++ library, including support for working with Parquet and Feather
files, as well as lower-level access to Arrow memory and messages.</p>

<p>You can install the package from CRAN with</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="s2">"arrow"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>On macOS and Windows, installing a binary package from CRAN will generally
handle Arrow’s C++ dependencies for you. However, the macOS CRAN binaries are
unfortunately incomplete for this version, so to install 0.14.1, you’ll first
need to use Homebrew to get the Arrow C++ library (<code class="highlighter-rouge">brew install
apache-arrow</code>), and then from R you can <code class="highlighter-rouge">install.packages("arrow", type =
"source")</code>.</p>

<p>Windows binaries are not yet available on CRAN but should be published soon.</p>

<p>On Linux, you’ll need to first install the C++ library. See the <a href="https://arrow.apache.org/install/">Arrow project
installation page</a> to find pre-compiled
binary packages for some common Linux distributions, including Debian, Ubuntu,
and CentOS. You’ll need to install <code class="highlighter-rouge">libparquet-dev</code> on Debian and Ubuntu, or
<code class="highlighter-rouge">parquet-devel</code> on CentOS. This will also automatically install the Arrow C++
library as a dependency. Other Linux distributions must install the C++ library
from source.</p>

<p>If you install the <code class="highlighter-rouge">arrow</code> R package from source and the C++ library is not
found, the R package functions will notify you that Arrow is not
available. Call</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">arrow</span><span class="o">::</span><span class="n">install_arrow</span><span class="p">()</span><span class="w">
</span></code></pre></div></div>

<p>for version- and platform-specific guidance on installing the Arrow C++
library.</p>

<h2 id="parquet-files">Parquet files</h2>

<p>This package introduces basic read and write support for the <a href="https://parquet.apache.org/">Apache
Parquet</a> columnar data file format. Prior to its
availability, options for accessing Parquet data in R were limited; the most
common recommendation was to use Apache Spark. The <code class="highlighter-rouge">arrow</code> package greatly
simplifies this access and lets you go from a Parquet file to a <code class="highlighter-rouge">data.frame</code>
and back easily, without having to set up a database.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">arrow</span><span class="p">)</span><span class="w">
</span><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">"path/to/file.parquet"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>This function, along with the other readers in the package, takes an optional
<code class="highlighter-rouge">col_select</code> argument, inspired by the
<a href="https://vroom.r-lib.org/reference/vroom.html"><code class="highlighter-rouge">vroom</code></a> package. This argument
lets you use the <a href="https://tidyselect.r-lib.org/reference/select_helpers.html">“tidyselect” helper
functions</a>, as you
can do in <code class="highlighter-rouge">dplyr::select()</code>, to specify that you only want to keep certain
columns. By narrowing your selection at read time, you can load a <code class="highlighter-rouge">data.frame</code>
with less memory overhead.</p>

<p>For example, suppose you had written the <code class="highlighter-rouge">iris</code> dataset to Parquet. You could
read a <code class="highlighter-rouge">data.frame</code> with only the columns <code class="highlighter-rouge">c("Sepal.Length", "Sepal.Width")</code> by
doing</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_parquet</span><span class="p">(</span><span class="s2">"iris.parquet"</span><span class="p">,</span><span class="w"> </span><span class="n">col_select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">starts_with</span><span class="p">(</span><span class="s2">"Sepal"</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<p>Just as you can read, you can write Parquet files:</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">write_parquet</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="s2">"path/to/different_file.parquet"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>Note that this read and write support for Parquet files in R is in its early
stages of development. The Python Arrow library
(<a href="https://arrow.apache.org/docs/python/">pyarrow</a>) still has much richer
support for Parquet files, including working with multi-file datasets. We
intend to reach feature equivalency between the R and Python packages in the
future.</p>

<h2 id="feather-files">Feather files</h2>

<p>This package also includes a faster and more robust implementation of the
Feather file format, providing <code class="highlighter-rouge">read_feather()</code> and
<code class="highlighter-rouge">write_feather()</code>. <a href="https://github.com/wesm/feather">Feather</a> was one of the
initial applications of Apache Arrow for Python and R, providing an efficient,
common file format language-agnostic data frame storage, along with
implementations in R and Python.</p>

<p>As Arrow progressed, development of Feather moved to the
<a href="https://github.com/apache/arrow"><code class="highlighter-rouge">apache/arrow</code></a> project, and for the last two
years, the Python implementation of Feather has just been a wrapper around
<code class="highlighter-rouge">pyarrow</code>. This meant that as Arrow progressed and bugs were fixed, the Python
version of Feather got the improvements but sadly R did not.</p>

<p>With the <code class="highlighter-rouge">arrow</code> package, the R implementation of Feather catches up and now
depends on the same underlying C++ library as the Python version does. This
should result in more reliable and consistent behavior across the two
languages, as well as <a href="https://wesmckinney.com/blog/feather-arrow-future/">improved
performance</a>.</p>

<p>We encourage all R users of <code class="highlighter-rouge">feather</code> to switch to using
<code class="highlighter-rouge">arrow::read_feather()</code> and <code class="highlighter-rouge">arrow::write_feather()</code>.</p>

<p>Note that both Feather and Parquet are columnar data formats that allow sharing
data frames across R, Pandas, and other tools. When should you use Feather and
when should you use Parquet? Parquet balances space-efficiency with
deserialization costs, making it an ideal choice for remote storage systems
like HDFS or Amazon S3. Feather is designed for fast local reads, particularly
with solid-state drives, and is not intended for use with remote storage
systems. Feather files can be memory-mapped and accessed as Arrow columnar data
in-memory without any deserialization while Parquet files always must be
decompressed and decoded. See the <a href="https://arrow.apache.org/faq/">Arrow project
FAQ</a> for more.</p>

<h2 id="other-capabilities">Other capabilities</h2>

<p>In addition to these readers and writers, the <code class="highlighter-rouge">arrow</code> package has wrappers for
other readers in the C++ library; see <code class="highlighter-rouge">?read_csv_arrow</code> and
<code class="highlighter-rouge">?read_json_arrow</code>. These readers are being developed to optimize for the
memory layout of the Arrow columnar format and are not intended as a direct
replacement for existing R CSV readers (<code class="highlighter-rouge">base::read.csv</code>, <code class="highlighter-rouge">readr::read_csv</code>,
<code class="highlighter-rouge">data.table::fread</code>) that return an R <code class="highlighter-rouge">data.frame</code>.</p>

<p>It also provides many lower-level bindings to the C++ library, which enable you
to access and manipulate Arrow objects. You can use these to build connectors
to other applications and services that use Arrow. One example is Spark: the
<a href="https://spark.rstudio.com/"><code class="highlighter-rouge">sparklyr</code></a> package has support for using Arrow to
move data to and from Spark, yielding <a href="http://arrow.apache.org/blog/2019/01/25/r-spark-improvements/">significant performance
gains</a>.</p>

<h2 id="acknowledgements">Acknowledgements</h2>

<p>In addition to the work on wiring the R package up to the Arrow Parquet C++
library, a lot of effort went into building and packaging Arrow for R users,
ensuring its ease of installation across platforms. We’d like to thank the
support of Jeroen Ooms, Javier Luraschi, JJ Allaire, Davis Vaughan, the CRAN
team, and many others in the Apache Arrow community for helping us get to this
point.</p>

    </main>

    <hr/>
<footer class="footer">
  <p>Apache Arrow, Arrow, Apache, the Apache feather logo, and the Apache Arrow project logo are either registered trademarks or trademarks of The Apache Software Foundation in the United States and other countries.</p>
  <p>&copy; 2016-2019 The Apache Software Foundation</p>
  <script type="text/javascript" src="/assets/main-8d2a359fd27a888246eb638b36a4e8b68ac65b9f11c48b9fac601fa0c9a7d796.js" integrity="sha256-jSo1n9J6iIJG62OLNqTotorGW58RxIufrGAfoMmn15Y=" crossorigin="anonymous"></script>
</footer>

  </div>
</body>
</html>
