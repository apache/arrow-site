<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <title>Apache Arrow Homepage</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Jekyll v3.8.4">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic,900">

    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/syntax.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107500873-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments)};
  gtag('js', new Date());

  gtag('config', 'UA-107500873-1');
</script>

    
  </head>


<body class="wrap">
  <header>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
  <a class="navbar-brand" href="/"><img src="/img/arrow-inverse-300px.png" height="60px"/></a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#arrow-navbar" aria-controls="arrow-navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="arrow-navbar">
      <ul class="nav navbar-nav">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#"
             id="navbarDropdownProjectLinks" role="button" data-toggle="dropdown"
             aria-haspopup="true" aria-expanded="false">
             Project Links
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownProjectLinks">
            <a class="dropdown-item" href="/install/">Installation</a>
            <a class="dropdown-item" href="/release/">Releases</a>
            <a class="dropdown-item" href="/faq/">FAQ</a>
            <a class="dropdown-item" href="/blog/">Blog</a>
            <a class="dropdown-item" href="https://github.com/apache/arrow">Source Code</a>
            <a class="dropdown-item" href="https://issues.apache.org/jira/browse/ARROW">Issue Tracker</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#"
             id="navbarDropdownCommunity" role="button" data-toggle="dropdown"
             aria-haspopup="true" aria-expanded="false">
             Community
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownCommunity">
            <a class="dropdown-item" href="http://mail-archives.apache.org/mod_mbox/arrow-user/">User Mailing List</a>
            <a class="dropdown-item" href="http://mail-archives.apache.org/mod_mbox/arrow-dev/">Dev Mailing List</a>
            <a class="dropdown-item" href="https://cwiki.apache.org/confluence/display/ARROW">Developer Wiki</a>
            <a class="dropdown-item" href="/committers/">Committers</a>
            <a class="dropdown-item" href="/powered_by/">Powered By</a>
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/docs/format/README.html"
             role="button" aria-haspopup="true" aria-expanded="false">
             Specification
          </a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#"
             id="navbarDropdownDocumentation" role="button" data-toggle="dropdown"
             aria-haspopup="true" aria-expanded="false">
             Documentation
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownDocumentation">
            <a class="dropdown-item" href="/docs">Project Docs</a>
            <a class="dropdown-item" href="/docs/python">Python</a>
            <a class="dropdown-item" href="/docs/cpp">C++</a>
            <a class="dropdown-item" href="/docs/java">Java</a>
            <a class="dropdown-item" href="/docs/c_glib">C GLib</a>
            <a class="dropdown-item" href="/docs/js">JavaScript</a>
            <a class="dropdown-item" href="/docs/r">R</a>
          </div>
        </li>
        <!-- <li><a href="/blog">Blog</a></li> -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#"
             id="navbarDropdownASF" role="button" data-toggle="dropdown"
             aria-haspopup="true" aria-expanded="false">
             ASF Links
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownASF">
            <a class="dropdown-item" href="http://www.apache.org/">ASF Website</a>
            <a class="dropdown-item" href="http://www.apache.org/licenses/">License</a>
            <a class="dropdown-item" href="http://www.apache.org/foundation/sponsorship.html">Donate</a>
            <a class="dropdown-item" href="http://www.apache.org/foundation/thanks.html">Thanks</a>
            <a class="dropdown-item" href="http://www.apache.org/security/">Security</a>
          </div>
        </li>
      </ul>
      <div class="flex-row justify-content-end ml-md-auto">
        <a class="d-sm-none d-md-inline pr-2" href="https://www.apache.org/events/current-event.html">
          <img src="https://www.apache.org/events/current-event-234x60.png"/>
        </a>
        <a href="http://www.apache.org/">
          <img src="/img/asf_logo.svg" width="120px"/>
        </a>
      </div>
      </div><!-- /.navbar-collapse -->
    </div>
  </nav>

  </header>

  <div class="container p-lg-4">
    <main role="main">
    
    
    
<h1>
  Apache Arrow 0.3.0リリース
  <a href="/blog/2017/05/08/0.3-release-japanese/" class="permalink" title="Permalink">∞</a>
</h1>



<p>
  <span class="badge badge-secondary">Published</span>
  <span class="published">
    08 May 2017
  </span>
  <br />
  <span class="badge badge-secondary">By</span>
  
    <a href="https://wesmckinney.com">Wes McKinney (wesm) </a>
  
</p>


    <!--

-->

<p><a href="/blog/2017/05/08/0.3-release/">原文（English）</a></p>

<p>Apache Arrowチームは0.3.0のリリースをアナウンスできてうれしいです。2月にリリースした0.2.0から10週間の活発な開発の結果が今回のリリースです。<a href="https://github.com/apache/arrow/graphs/contributors"><strong>23人のコントリビューター</strong></a>が<a href="https://issues.apache.org/jira/issues/?jql=project%20%3D%20ARROW%20AND%20status%20in%20(Resolved%2C%20Closed)%20AND%20fixVersion%20%3D%200.3.0"><strong>306個のJIRAのissueを解決</strong></a>しました。</p>

<p>複数のArrowの実装にたくさんの新しい機能を追加しています。2017年、特に注力して開発するのは、インメモリー用のフォーマット、型のメタデータ、メッセージング用のプロトコルです。これは、ビッグデータアプリケーションに<strong>安定していてプロダクションで使える基盤</strong>を提供するためです。高性能IOとインメモリーデータ処理にArrowを活用するために、<a href="http://spark.apache.org">Apache Spark</a>・<a href="http://www.geomesa.org/">GeoMesa</a>コミュニティーと協力していてとてもエキサイティングです。</p>

<p>それぞれのプラットフォームでArrowを使う方法は<a href="http://arrow.apache.org/install">インストールページ</a>を見てください。</p>

<p>Arrowでビッグデータシステムを高速化するケースを増やすために、近いうちにApache Arrowのロードマップを公開する予定です。</p>

<p>Arrowの開発に参加するコントリビューターを募集しています。すでにArrowの開発に参加しているコミュニティーからのコントリビューターもそうですし、まだ参加していないGo、R、Juliaといったコミュニティーからのコントリビューターも募集しています。</p>

<h3 id="ファイルフォーマットとストリーミングフォーマットの強化">ファイルフォーマットとストリーミングフォーマットの強化</h3>

<p>0.2.0では<strong>ランダムアクセス</strong>用と<strong>ストリーミング</strong>用のArrowのワイヤーフォーマットを導入しました。実装の詳細は<a href="http://arrow.apache.org/docs/ipc.html">IPC仕様</a>を見てください。ユースケースは<a href="http://wesmckinney.com/blog/arrow-streaming-columnar/">使用例を紹介したブログ</a>を見てください。これらのフォーマットを使うと低オーバーヘッド・コピーなしでArrowのレコードバッチのペイロードにアクセスできます。</p>

<p>0.3.0ではこのバイナリーフォマットの細かい詳細をたくさん固めました。Java、C++、Python間の連携のテストおよびそれぞれ言語での単体テストの整備も進めました。<a href="http://github.com/google/flatbuffers">Google Flatbuffers</a>は、前方互換性を壊さずにメタデータに新しい機能を追加するのに非常に助かりました。</p>

<p>まだバイナリーフォーマットの前方互換性を必ず壊さないと約束できる状態ではありませんが（もしかしたら変更する必要があるなにかが見つかるかもしれない）、メジャーリリース間では不必要に互換性を壊さないように努力するつもりです。Apache ArrowのWebサイト、各コンポーネントのユーザー向けのドキュメントおよびAPIドキュメントへのコントリビューションを非常に歓迎します。</p>

<h3 id="辞書エンコーディングのサポート">辞書エンコーディングのサポート</h3>

<p><a href="http://www.geomesa.org/">GeoMesa</a>プロジェクトの<a href="https://github.com/elahrvivaz">Emilio Lahr-Vivaz</a>はJavaのArrow実装に辞書エンコード対応ベクターをコントリビュートしました。これを受けて、C++とPythonでもサポートしました。（<code class="highlighter-rouge">pandas.Categorical</code>とも連携できます。）辞書エンコーディング用のインテグレーションテスト（C++とJava間でこのデータを送受信するテスト）はまだ完成していませんが、0.4.0までには完成させたいです。</p>

<p>これはカテゴリーデータ用の一般的なデータ表現テクニックです。これを使うと、複数のレコードバッチで共通の「辞書」を共有し、各レコードバッチの値はこの辞書を参照する整数になります。このデータは統計的言語（statistical language）の分野では「カテゴリー（categorical）」や「因子（factor）」と呼ばれています。Apache Parquetのようなファイルフォーマットの分野ではデータ圧縮のためだけに使われています。</p>

<h3 id="日付時刻固定長型の拡張">日付、時刻、固定長型の拡張</h3>

<p>0.2.0では現実に使われている日付・時刻型をインテグレーションテスト付きで完全にサポートすることを諦めました。これらは<a href="http://parquet.apache.org">Apache Parquet</a>とApache Sparkとの連携に必要な機能です。</p>

<ul>
  <li><strong>日付</strong>: 32-bit（日単位）と64-bit（ミリ秒単位）</li>
  <li><strong>時刻</strong>: 単位付き64-bit整数（単位：秒、ミリ秒、マイクロ秒、ナノ秒）</li>
  <li><strong>タイムスタンプ（UNIXエポックからの経過時間）</strong>: 単位付き64-bit整数のタイムゾーン付きとタイムゾーンなし</li>
  <li><strong>固定長バイナリー</strong>: 決まったバイト数のプリミティブな値</li>
  <li><strong>固定長リスト</strong>: 各要素が同じサイズのリスト（要素のベクターとは別にオフセットのベクターを持つ必要がない）</li>
</ul>

<p>C++のArrow実装では、<a href="https://github.com/boostorg/multiprecision">Boost.Multiprecision</a>を使ったexactな小数のサポートを実験的に追加しました。ただし、Java実装とC++実装間での小数のメモリーフォーマットはまだ固まっていません。</p>

<h3 id="cとpythonのwindowsサポート">C++とPythonのWindowsサポート</h3>

<p>一般的なC++とPythonでの開発用に、パッケージ周りの改良も多数入っています。0.3.0はVisual Studio（MSVC）2015と2017を使ってWindowsを完全にサポートした最初のバージョンです。AppveyorでMSVC用のCIを実行しています。Windows上でソースからビルドするためのガイドも書きました。<a href="https://github.com/apache/arrow/blob/master/cpp/apidoc/Windows.md">C++</a>用と<a href="https://github.com/apache/arrow/blob/master/python/doc/source/development.rst">Python</a>用。</p>

<p><a href="https://conda-forge.github.io">conda-forge</a>からWindows用のArrowのPythonライブラリーをインストールできます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>conda <span class="nb">install </span>pyarrow <span class="nt">-c</span> conda-forge
</code></pre></div></div>

<h3 id="cglibバインディングとrubylua他のサポート">C（GLib）バインディングとRuby・Lua・他のサポート</h3>

<p><a href="http://github.com/kou">Kouhei Sutou</a>は新しいApache Arrowのコントリビューターです。Linux用の（ArrowのC++実装の）GLibを使ったCバインディングをコントリビュートしました。<a href="https://wiki.gnome.org/Projects/GObjectIntrospection">GObject Introspection</a>というCのミドルウェアを使うことでRuby、Lua、Goや<a href="https://wiki.gnome.org/Projects/GObjectIntrospection/Users">他にも様々なプログラミング言語</a>でシームレスにバインディングを使うことができます。これらのバインディングがどのように動いているか、これらのバインディングをどのように使うかを説明するブログ記事が別途必要な気がします。</p>

<h3 id="pysparkを使ったapache-sparkとの連携">PySparkを使ったApache Sparkとの連携</h3>

<p><a href="https://issues.apache.org/jira/browse/SPARK-13534">SPARK-13534</a>でApache Sparkコミュニティーと協力しています。PySparkでの<code class="highlighter-rouge">DataFrame.toPandas</code>をArrowを使って高速化しようとしています。効率的なデータのシリアライズにより<a href="https://github.com/apache/spark/pull/15821#issuecomment-282175163"><strong>40倍以上高速化</strong></a>できるケースがあります。</p>

<p>PySparkでArrowを使うことでこれまでできなかったパフォーマンス最適化の道が開けました。特に、UDFの評価まわりでいろいろやれることがあるでしょう。（たとえば、Pythonのラムダ関数を使って<code class="highlighter-rouge">map</code>・<code class="highlighter-rouge">filter</code>を実行するケース。）</p>

<h3 id="python実装での新しい機能メモリービューfeatherapache-parquetのサポート">Python実装での新しい機能：メモリービュー、Feather、Apache Parquetのサポート</h3>

<p>ArrowのPythonライブラリーである<code class="highlighter-rouge">pyarrow</code>は<code class="highlighter-rouge">libarrow</code>と<code class="highlighter-rouge">libarrow_python</code>というC++ライブラリーのCythonバインディングです。<code class="highlighter-rouge">pyarrow</code>はNumPyと<a href="http://pandas.pydata.org">pandas</a>とPythonの標準ライブラリー間のシームレスな連携を実現します。</p>

<p>ArrowのC++ライブラリーで最も重要なものは<code class="highlighter-rouge">arrow::Buffer</code>オブジェクトです。これはメモリービューを管理します。コピーなしの読み込みとスライスをサポートしている点が重要です。<a href="https://github.com/JeffKnupp">Jeff Knupp</a>はArrowのバッファーとPythonのバッファープロトコルとmemoryviewの連携処理をコントリビュートしました。これにより次のようなことができるようになりました。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="kn">import</span> <span class="nn">pyarrow</span> <span class="k">as</span> <span class="n">pa</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="n">buf</span> <span class="o">=</span> <span class="n">pa</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">b</span><span class="s">'foobarbaz'</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">buf</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="o">&lt;</span><span class="n">pyarrow</span><span class="o">.</span><span class="n">_io</span><span class="o">.</span><span class="n">Buffer</span> <span class="n">at</span> <span class="mh">0x7f6c0a84b538</span><span class="o">&gt;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="nb">memoryview</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">9</span><span class="p">]:</span> <span class="o">&lt;</span><span class="n">memory</span> <span class="n">at</span> <span class="mh">0x7f6c0a8c5e88</span><span class="o">&gt;</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">10</span><span class="p">]:</span> <span class="n">buf</span><span class="o">.</span><span class="n">to_pybytes</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">10</span><span class="p">]:</span> <span class="n">b</span><span class="s">'foobarbaz'</span>
</code></pre></div></div>

<p>C++でのParquet実装である<a href="https://github.com/apache/parquet-cpp">parquet-cpp</a>を使うことで大幅に<a href="http://parquet.apache.org"><strong>Apache Parquet</strong></a>サポートを改良しました。たとえば、ディスク上にあるかHDFS上にあるか関係なく、パーティションされたデータセットをサポートしました。<a href="https://github.com/dask/dask/commit/68f9e417924a985c1f2e2a587126833c70a2e9f4">Daskプロジェクト</a>はArrowを使ったParquetサポートを実装した最初のプロジェクトです。Dask開発者とはpandsデータを分散処理する文脈でさらに協力できることを楽しみにしています。</p>

<p>pandasを成熟させるためにArrowを改良することもあり、<a href="https://github.com/wesm/feather"><strong>Featherフォーマット</strong></a>の実装をマージしたのもその1つです。Featherフォーマットは本質的にはArrowのランダムアクセスフォーマットの特別なケースの1つです。ArrowのコードベースでFeatherの開発を続けます。たとえば、今のFeatherはArrowのPythonバインディングのレイヤーを使うことでPythonのファイルオブジェクトを読み書きできるようになっています。</p>

<p><code class="highlighter-rouge">DatetimeTZ</code>や<code class="highlighter-rouge">Categorical</code>といったpandas固有のデータ型のちゃんとした（robust）サポートも実装しました。</p>

<h3 id="cライブラリーでのテンソルサポート">C++ライブラリーでのテンソルサポート</h3>

<p>Apache Arrowはコピーなしで共有メモリーを管理するツールという側面があります。機械学習アプリケーションの文脈でこの機能への関心が増えています。UCバークレー校の<a href="https://rise.cs.berkeley.edu/">RISELab</a>の<a href="https://github.com/ray-project/ray">Rayプロジェクト</a>が最初の例です。</p>

<p>機械学習ではは「テンソル」とも呼ばれる多次元配列というデータ構造を扱います。このようなデータ構造はArrowのカラムフォーマットがサポートしているデータ構造の範囲を超えています。今回のケースでは、<a href="http://arrow.apache.org/docs/cpp/classarrow_1_1_tensor.html"><code class="highlighter-rouge">arrow::Tensor</code></a>というC++の型を追加で実装しました。これはArrowのコピーなしの共有メモリー機能を活用して実装しました。（メモリーの生存期間の管理に<code class="highlighter-rouge">arrow::Buffer</code>を使いました。）C++実装では、これからも、共通のIO・メモリー管理ツールとしてArrowを活用できるようにするため、追加のデータ構造を提供するつもりです。</p>

<h3 id="javascripttypescript実装の開始">JavaScript（TypeScript）実装の開始</h3>

<p><a href="https://github.com/TheNeuralBit">Brian Hulette</a>はNodeJSとWebブラウザー上で動くアプリケーションで使うために<a href="https://github.com/apache/arrow/tree/master/js">TypeScript</a>でのArrowの実装を始めました。FlatBuffersがJavaScriptをファーストクラスでサポートしているので実装が捗ります。</p>

<h3 id="webサイトと開発者用ドキュメントの改良">Webサイトと開発者用ドキュメントの改良</h3>

<p>0.2.0をリリースしてからドキュメントとブログを公開するためにWebサイトのシステムを<a href="https://jekyllrb.com">Jekyll</a>ベースで作りました。Kouhei Sutouは<a href="https://github.com/red-data-tools/jekyll-jupyter-notebook">Jekyll Jupyter Notebookプラグイン</a>を作りました。これによりArrowのWebサイトのコンテンツを作るためにJupyterを使うことができます。</p>

<p>WebサイトにはC、C++、Java、PythonのAPIドキュメントを公開しました。これらの中にArrowを使い始めるための有益な情報を見つけられるでしょう。</p>

<h3 id="コントリビューター">コントリビューター</h3>

<p>このリリースにパッチをコントリビュートしたみなさんに感謝します。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git shortlog -sn apache-arrow-0.2.0..apache-arrow-0.3.0
    119 Wes McKinney
     55 Kouhei Sutou
     18 Uwe L. Korn
     17 Julien Le Dem
      9 Phillip Cloud
      6 Bryan Cutler
      5 Philipp Moritz
      5 Emilio Lahr-Vivaz
      4 Max Risuhin
      4 Johan Mabille
      4 Jeff Knupp
      3 Steven Phillips
      3 Miki Tebeka
      2 Leif Walsh
      2 Jeff Reback
      2 Brian Hulette
      1 Tsuyoshi Ozawa
      1 rvernica
      1 Nong Li
      1 Julien Lafaye
      1 Itai Incze
      1 Holden Karau
      1 Deepak Majeti
</code></pre></div></div>


    </main>

    <hr/>
<footer class="footer">
  <p>Apache Arrow, Arrow, Apache, the Apache feather logo, and the Apache Arrow project logo are either registered trademarks or trademarks of The Apache Software Foundation in the United States and other countries.</p>
  <p>&copy; 2016-2019 The Apache Software Foundation</p>
  <script integrity="sha256-jSo1n9J6iIJG62OLNqTotorGW58RxIufrGAfoMmn15Y=" crossorigin="anonymous" src="/assets/main-8d2a359fd27a888246eb638b36a4e8b68ac65b9f11c48b9fac601fa0c9a7d796.js" type="text/javascript"></script>
</footer>

  </div>
</body>
</html>
