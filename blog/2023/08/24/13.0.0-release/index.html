<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above meta tags *must* come first in the head; any other head content must come *after* these tags -->
    
    <title>Apache Arrow 13.0.0 Release | Apache Arrow</title>
    

    <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Apache Arrow 13.0.0 Release" />
<meta name="author" content="pmc" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The Apache Arrow team is pleased to announce the 13.0.0 release. This covers over 3 months of development work and includes 456 resolved issues from 108 distinct contributors. See the Install Page to learn how to get the libraries for your platform. The release notes below are not exhaustive and only expose selected highlights of the release. Many other bugfixes and improvements have been made: we refer you to the complete changelog. Community Since the 12.0.0 release, Marco Neumann, Gang Wu, Mehmet Ozan Kabak and Kevin Gurney have been invited to be committers. Matt Topol, Jie Wen, Ben Baumgold and Dewey Dunnington have joined the Project Management Committee (PMC). Thanks for your contributions and participation in the project! Columnar Format Notes The run-end encoded layout has been added. This layout can allow data with long runs of duplicate values to be encoded and processed efficiently. Initial support has been added for C++ and Go. C Device Data Interface An experimental new specification, the C Device Data Interface, has been accepted for inclusion GH-34971. It builds on the existing C Data Interface to provide a runtime-agnostic zero-copy sharing mechanism for Arrow data residing on non-CPU devices. Reference implementations of the C Device Data Interface will progressively be added to the standard Arrow libraries after the 13.0.0 release. Arrow Flight RPC notes Support for flagging ordered result sets to clients is now added. (GH-34852) gRPC 1.30 is now the minimum supported version in C++/Python/R/etc. (GH-34679) In C++, various methods now receive a full ServerCallContext (GH-35442, GH-35377) and the context now exposes headers sent by the client (GH-35375). C++ notes Building CMake 3.16 or later is now required for building Arrow C++ GH-34921. Optimizations are not disabled anymore when the RelWithDebInfo build type is selected GH-35850. Furthermore, compiler flags can now properly be customized per-build type using ARROW_C_FLAGS_DEBUG, ARROW_CXX_FLAGS_DEBUG and related variables GH-35870. Acero Handling of unaligned buffers is input nodes can be configured programmatically or by setting the environment variable ACERO_ALIGNMENT_HANDLING. The default behavior is to warn when an unaligned buffer is detected GH-35498. Compute Several new functions have been added: aggregate functions “first”, “last”, “first_last” GH-34911; vector functions “cumulative_prod”, “cumulative_min”, “cumulative_max” GH-32190; vector function “pairwise_diff” GH-35786. Sorting now works on dictionary arrays, with a much better performance than the naive approach of sorting the decoded dictionary GH-29887. Sorting also works on struct arrays, and nested sort keys are supported using FieldRed GH-33206. The check_overflow option has been removed from CumulativeSumOptions as it was redundant with the availability of two different functions: “cumulative_sum” and “cumulative_sum_checked” GH-35789. Run-end encoded filters are efficiently supported GH-35749. Duration types are supported with the “is_in” and “index_in” functions GH-36047. They can be multiplied with all integer types GH-36128. “is_in” and “index_in” now cast their inputs more flexibly: they first attempt to cast the value set to the input type, then in the other direction if the former fails GH-36203. Multiple bugs have been fixed in “utf8_slice_codeunits” when the stop option is omitted GH-36311. Dataset A custom schema can now be passed when writing a dataset GH-35730. The custom schema can alter nullability or metadata information, but is not allowed to change the datatypes written. Filesystems The S3 filesystem now writes files in equal-sized chunks, for compatibility with Cloudflare’s “R2” Storage GH-34363. A long-standing issue where S3 support could crash at shutdown because of resources still being alive after S3 finalization has been fixed GH-36346. Now, attempts to use S3 resources (such as making filesystem calls) after S3 finalization should result in a clean error. The GCS filesystem accepts a new option to set the project id GH-36227. IPC Nullability and metadata information for sub-fields of map types is now preserved when deserializing Arrow IPC GH-35297. Orc The Orc adapter now maps Arrow field metadata to Orc type attributes when writing, and vice-versa when reading GH-35304. Parquet It is now possible to write additional metadata while a ParquetFileWriter is open GH-34888. Writing a page index can be enabled selectively per-column GH-34949. In addition, page header statistics are not written anymore if the page index is enabled for the given column GH-34375, as the information would be redundant and less efficiently accessed. Parquet writer properties allow specifying the sorting columns GH-35331. The user is responsible for ensuring that the data written to the file actually complies with the given sorting. CRC computation has been implemented for v2 data pages GH-35171. It was already implemented for v1 data pages. Writing compliant nested types is now enabled by default GH-29781. This should not have any negative implication. Attempting to load a subset of an Arrow extension type is now forbidden GH-20385. Previously, if an extension type’s storage is nested (for example a “Point” extension type backed by a struct&lt;x: float64, y: float64&gt;), it was possible to load selectively some of the columns of the storage type. Substrait Support for various functions has been added: “stddev”, “variance”, “first”, “last” (GH-35247, GH-35506). Deserializing sorts is now supported GH-32763. However, some features, such as clustered sort direction or custom sort functions, are not implemented. Miscellaneous FieldRef sports additional methods to get a flattened version of nested fields GH-14946. Compared to their non-flattened counterparts, the methods GetFlattened, GetAllFlattened, GetOneFlattened and GetOneOrNoneFlattened combine a child’s null bitmap with its ancestors’ null bitmaps such as to compute the field’s overall logical validity bitmap. In other words, given the struct array [null, {&#39;x&#39;: null}, {&#39;x&#39;: 5}], FieldRef(&quot;x&quot;)::Get might return [0, null, 5] while FieldRef(&quot;y&quot;)::GetFlattened will always return [null, null, 5]. Scalar::hash() has been fixed for sliced nested arrays GH-35360. A new floating-point to decimal conversion algorithm exhibits much better precision GH-35576. It is now possible to cast between scalars of different list-like types GH-36309. C# notes Enhancements The C Data Interface is now supported in the .NET Apache.Arrow library. The main entry points are CArrowArrayImporter.ImportArray, CArrowArrayExporter.ExportArray, CArrowArrayStreamImporter.ImportArrayStream, and CArrowArrayStreamExporter.ExportArrayStream in the Apache.Arrow.C namespace. (GH-33856, GH-33857, GH-36120, and GH-35809). ArrowBuffer.BitmapBuilder adds Append(ReadOnlySpan&lt;byte&gt; source, int validBits) and AppendRange(bool value, int length) to improve performance of array concatenation (GH-32605) Bug Fixes TotalBytes and TotalRecords are now being serialized in FlightInfo (GH-35267) Go notes Enhancements Arrow Compute arithmetic functions are now available for Float16 (GH-35162) Float16, Large* and Fixed types are all now supported by the CSV reader/writer (GH-36105 and GH-36141) CSV Reader uses AppendValueFromString for extension types and properly reads empty values as null (GH-35188 and GH-35190) Substrait expressions can now be executed using the Compute library (GH-35652) You can now read back values from Dictionary Builders before finishing the array (GH-35711) MapType.ValueField and MapType.ValueType are now deprecated in favor of MapType.Elem().(*StructType) (GH-35909) Multiple equality functions which have been deprecated since v9 have now been removed (Such as array.ArraySliceEqual in favor of array.SliceEqual) (GH-36198) ValueStr method on Timestamp arrays now includes the zone in the output (GH-36568) BREAKING CHANGE FixedSizeListBuilder.AppendNull no longer requires manually appending nulls to the underlying list (GH-35482) Flight FlightSQL driver supports non-prepared queries now (GH-35136) Parquet Error messages in row group writer have been improved (GH-36319) Bug Fixes Cross architecture build failures with v12.0.1 have been fixed (GH-36052) Arrow It is now possible to build the Arrow Go lib using tinygo for building smaller WASM binaries (GH-32832) Fields method for Schema and StructType now returns a copy of the slice to ensure immutability (GH-35306 and GH-35866) array.ApproxEqual for Maps now allows entries for a given element to be presented in any order (GH-35828) Fix issues with decimal256 arrays (GH-35911, GH-35965, and GH-35975) StructType now allows duplicate field names correctly (GH-36014) Flight Fix crash in client middleware (GH-35240) Parquet Various memory leaks addressed in pqarrow package (GH-35015) Fixed panic for ListOf(types) if null (GH-35684) Java notes The JNI bindings for Arrow Dataset now support execute Substrait plans via the Acero query engine. (GH-34223) Arrow packages that depend on Netty (most notably, arrow-memory-netty, but also Arrow Flight) now require either Netty &lt; 4.1.94.Final or Netty &gt;= 4.1.96.Final. In Netty versions 4.1.94.Final and 4.1.95.Final, there was a breaking change in an internal API that affected Arrow; this was reverted in 4.1.96.Final (GH-36209, GH-36928) VectorSchemaRoot#slice now always makes a copy, including when the slice covers all rows (previously it did not make a copy in this case). This is a potentially-breaking change if your application depended on the old behavior. (GH-35275) Debug info for allocations is no longer automatically enabled when assertions are enabled (e.g. when running unit tests). Instead, support must be explicitly enabled. This is not quite a breaking change, but may be surprising if you are used to using this information while debugging tests. However, performance should be greatly improved while running tests. (GH-34338) Support for the upcoming Java 21 was added, though we do not yet test this in CI (GH-5053). The JNI bindings for Arrow Dataset now expose JSON support (GH-36421). Dictionary replacement is now supported when writing the IPC stream format (GH-18547). JavaScript notes Updated dependencies: https://github.com/apache/arrow/pull/36032 Python notes Compatibility notes: The default format version for Parquet has been bumped from 2.4 to 2.6 GH-35746. In practice, this means that nanosecond timestamps now preserve its resolution instead of being converted to microseconds. Support for Python 3.7 is dropped GH-34788 New features: Conversion to non-nano datetime64 for pandas &gt;= 2.0 is now supported GH-33321 Write page index is now supported GH-36284 Bindings for reading JSON format in Dataset are added GH-34216 keys_sorted property of MapType is now exposed GH-35112 Other improvements: Common python functionality between Table and RecordBatch classes has been consolidated ( GH-36129, GH-35415, GH-35390, GH-34979, GH-34868, GH-31868) Some functionality for FixedShapeTensorType has been improved (__reduce__ GH-36038, picklability GH-35599) Pyarrow scalars can now be accepted in the array constructor GH-21761 DataFrame Interchange Protocol implementation and usage is now documented GH-33980 Conversion between Arrow and Pandas for map/pydict now has enhanced support GH-34729 Usability of pc.map_lookup / MapLookupOptions is improved GH-36045 zero_copy_only keyword can now also be accepted in ChunkedArray.to_numpy() GH-34787 Python C++ codebase now has linter support in Archery and the CI GH-35485 Relevant bug fixes: __array__ numpy conversion for Table and RecordBatch is now corrected so that np.asarray(pa.Table) doesn’t return a transposed result GH-34886 parquet.write_to_dataset doesn’t create empty files for non-observed dictionary (category) values anymore GH-23870 Dataset writer now also correctly follows default Parquet version of 2.6 GH-36537 Comparing pyarrow.dataset.Partitioning with other type is now correctly handled GH-36659 Pickling of pyarrow.dataset PartitioningFactory objects is now supported GH-34884 None schema is now disallowed in parquet writer GH-35858 pa.FixedShapeTensorArray.to_numpy_ndarray is not failing on sliced arrays GH-35573 Halffloat type is now supported in the conversion from Arrow list to pandas GH-36168 __from_arrow__ is now also implemented for Array.to_pandas for pandas extension data types GH-36096 R notes New features: open_dataset() now works with ND-JSON files GH-35055 Calling schema() on multiple Arrow objects now returns the object’s schema GH-35543 dplyr .by/by argument now supported in arrow implementation of dplyr verbs GH-35667 Other improvements: Convenience function arrow_array() can be used to create Arrow Arrays GH-36381 Convenience function scalar() can be used to create Arrow Scalars GH-36265 Prevent crashed when passing data between arrow and duckdb by always calling RecordBatchReader::ReadNext() from DuckDB from the main R thread GH-36307 Issue a warning for set_io_thread_count() with num_threads &lt; 2 GH-36304 Ensure missing grouping variables are added to the beginning of the variable list GH-36305 CSV File reader options class objects can print the selected values GH-35955 Schema metadata can be set as a named character vector GH-35954 Ensure that the RStringViewer helper class does not own any Array references GH-35812 strptime() in arrow will return a timezone-aware timestamp if %z is part of the format string GH-35671 Column ordering when combining group_by() and across() now matches dplyr GH-35473 Link to correct version of OpenSSL when using autobrew GH-36551 Require cmake 3.16 in bundled build script GH-36321 For more on what’s in the 13.0.0 R package, see the R changelog. Ruby and C GLib notes Ruby Bug fixes Fixed GC-related issue against random segfault in hash join GH-35819 Fixed segfault in CallExpression.new GH-35915 Improvements FlightRPC: Added a convenient wrapper for the authentication method GH-35435 Added empty table support in #select_columns GH-35681 Added optional hash support in Expression.try_convert GH-35915 Parquet: Added Parquet::ArrowFileReader#each_row_group GH-36008 Added support of the automatic installation of arrow-c-glib on Conda environment GH-36287 C GLib Bug fixes Parquet: Fixed GC-related bug in metadata dependencies GH-35266 Fixed potentially GC-related issue against random segfault in hash join GH-35819 Improvements FlightRPC: Added support to pass GAFlightServerCallContext object in several methods of GAFlightServerCustomAuthHandler GH-35377 FlightSQL: Added support for INSERT/UPDATE/DELETE GH-36408 Added GArrowRunEndEncodedDataType GH-35417 Added GArrowRunEndEncodedArray GH-35418 Rust notes The Rust projects have moved to separate repositories outside the main Arrow monorepo. For notes on the latest release of the Rust implementation, see the latest Arrow Rust changelog." />
<meta property="og:description" content="The Apache Arrow team is pleased to announce the 13.0.0 release. This covers over 3 months of development work and includes 456 resolved issues from 108 distinct contributors. See the Install Page to learn how to get the libraries for your platform. The release notes below are not exhaustive and only expose selected highlights of the release. Many other bugfixes and improvements have been made: we refer you to the complete changelog. Community Since the 12.0.0 release, Marco Neumann, Gang Wu, Mehmet Ozan Kabak and Kevin Gurney have been invited to be committers. Matt Topol, Jie Wen, Ben Baumgold and Dewey Dunnington have joined the Project Management Committee (PMC). Thanks for your contributions and participation in the project! Columnar Format Notes The run-end encoded layout has been added. This layout can allow data with long runs of duplicate values to be encoded and processed efficiently. Initial support has been added for C++ and Go. C Device Data Interface An experimental new specification, the C Device Data Interface, has been accepted for inclusion GH-34971. It builds on the existing C Data Interface to provide a runtime-agnostic zero-copy sharing mechanism for Arrow data residing on non-CPU devices. Reference implementations of the C Device Data Interface will progressively be added to the standard Arrow libraries after the 13.0.0 release. Arrow Flight RPC notes Support for flagging ordered result sets to clients is now added. (GH-34852) gRPC 1.30 is now the minimum supported version in C++/Python/R/etc. (GH-34679) In C++, various methods now receive a full ServerCallContext (GH-35442, GH-35377) and the context now exposes headers sent by the client (GH-35375). C++ notes Building CMake 3.16 or later is now required for building Arrow C++ GH-34921. Optimizations are not disabled anymore when the RelWithDebInfo build type is selected GH-35850. Furthermore, compiler flags can now properly be customized per-build type using ARROW_C_FLAGS_DEBUG, ARROW_CXX_FLAGS_DEBUG and related variables GH-35870. Acero Handling of unaligned buffers is input nodes can be configured programmatically or by setting the environment variable ACERO_ALIGNMENT_HANDLING. The default behavior is to warn when an unaligned buffer is detected GH-35498. Compute Several new functions have been added: aggregate functions “first”, “last”, “first_last” GH-34911; vector functions “cumulative_prod”, “cumulative_min”, “cumulative_max” GH-32190; vector function “pairwise_diff” GH-35786. Sorting now works on dictionary arrays, with a much better performance than the naive approach of sorting the decoded dictionary GH-29887. Sorting also works on struct arrays, and nested sort keys are supported using FieldRed GH-33206. The check_overflow option has been removed from CumulativeSumOptions as it was redundant with the availability of two different functions: “cumulative_sum” and “cumulative_sum_checked” GH-35789. Run-end encoded filters are efficiently supported GH-35749. Duration types are supported with the “is_in” and “index_in” functions GH-36047. They can be multiplied with all integer types GH-36128. “is_in” and “index_in” now cast their inputs more flexibly: they first attempt to cast the value set to the input type, then in the other direction if the former fails GH-36203. Multiple bugs have been fixed in “utf8_slice_codeunits” when the stop option is omitted GH-36311. Dataset A custom schema can now be passed when writing a dataset GH-35730. The custom schema can alter nullability or metadata information, but is not allowed to change the datatypes written. Filesystems The S3 filesystem now writes files in equal-sized chunks, for compatibility with Cloudflare’s “R2” Storage GH-34363. A long-standing issue where S3 support could crash at shutdown because of resources still being alive after S3 finalization has been fixed GH-36346. Now, attempts to use S3 resources (such as making filesystem calls) after S3 finalization should result in a clean error. The GCS filesystem accepts a new option to set the project id GH-36227. IPC Nullability and metadata information for sub-fields of map types is now preserved when deserializing Arrow IPC GH-35297. Orc The Orc adapter now maps Arrow field metadata to Orc type attributes when writing, and vice-versa when reading GH-35304. Parquet It is now possible to write additional metadata while a ParquetFileWriter is open GH-34888. Writing a page index can be enabled selectively per-column GH-34949. In addition, page header statistics are not written anymore if the page index is enabled for the given column GH-34375, as the information would be redundant and less efficiently accessed. Parquet writer properties allow specifying the sorting columns GH-35331. The user is responsible for ensuring that the data written to the file actually complies with the given sorting. CRC computation has been implemented for v2 data pages GH-35171. It was already implemented for v1 data pages. Writing compliant nested types is now enabled by default GH-29781. This should not have any negative implication. Attempting to load a subset of an Arrow extension type is now forbidden GH-20385. Previously, if an extension type’s storage is nested (for example a “Point” extension type backed by a struct&lt;x: float64, y: float64&gt;), it was possible to load selectively some of the columns of the storage type. Substrait Support for various functions has been added: “stddev”, “variance”, “first”, “last” (GH-35247, GH-35506). Deserializing sorts is now supported GH-32763. However, some features, such as clustered sort direction or custom sort functions, are not implemented. Miscellaneous FieldRef sports additional methods to get a flattened version of nested fields GH-14946. Compared to their non-flattened counterparts, the methods GetFlattened, GetAllFlattened, GetOneFlattened and GetOneOrNoneFlattened combine a child’s null bitmap with its ancestors’ null bitmaps such as to compute the field’s overall logical validity bitmap. In other words, given the struct array [null, {&#39;x&#39;: null}, {&#39;x&#39;: 5}], FieldRef(&quot;x&quot;)::Get might return [0, null, 5] while FieldRef(&quot;y&quot;)::GetFlattened will always return [null, null, 5]. Scalar::hash() has been fixed for sliced nested arrays GH-35360. A new floating-point to decimal conversion algorithm exhibits much better precision GH-35576. It is now possible to cast between scalars of different list-like types GH-36309. C# notes Enhancements The C Data Interface is now supported in the .NET Apache.Arrow library. The main entry points are CArrowArrayImporter.ImportArray, CArrowArrayExporter.ExportArray, CArrowArrayStreamImporter.ImportArrayStream, and CArrowArrayStreamExporter.ExportArrayStream in the Apache.Arrow.C namespace. (GH-33856, GH-33857, GH-36120, and GH-35809). ArrowBuffer.BitmapBuilder adds Append(ReadOnlySpan&lt;byte&gt; source, int validBits) and AppendRange(bool value, int length) to improve performance of array concatenation (GH-32605) Bug Fixes TotalBytes and TotalRecords are now being serialized in FlightInfo (GH-35267) Go notes Enhancements Arrow Compute arithmetic functions are now available for Float16 (GH-35162) Float16, Large* and Fixed types are all now supported by the CSV reader/writer (GH-36105 and GH-36141) CSV Reader uses AppendValueFromString for extension types and properly reads empty values as null (GH-35188 and GH-35190) Substrait expressions can now be executed using the Compute library (GH-35652) You can now read back values from Dictionary Builders before finishing the array (GH-35711) MapType.ValueField and MapType.ValueType are now deprecated in favor of MapType.Elem().(*StructType) (GH-35909) Multiple equality functions which have been deprecated since v9 have now been removed (Such as array.ArraySliceEqual in favor of array.SliceEqual) (GH-36198) ValueStr method on Timestamp arrays now includes the zone in the output (GH-36568) BREAKING CHANGE FixedSizeListBuilder.AppendNull no longer requires manually appending nulls to the underlying list (GH-35482) Flight FlightSQL driver supports non-prepared queries now (GH-35136) Parquet Error messages in row group writer have been improved (GH-36319) Bug Fixes Cross architecture build failures with v12.0.1 have been fixed (GH-36052) Arrow It is now possible to build the Arrow Go lib using tinygo for building smaller WASM binaries (GH-32832) Fields method for Schema and StructType now returns a copy of the slice to ensure immutability (GH-35306 and GH-35866) array.ApproxEqual for Maps now allows entries for a given element to be presented in any order (GH-35828) Fix issues with decimal256 arrays (GH-35911, GH-35965, and GH-35975) StructType now allows duplicate field names correctly (GH-36014) Flight Fix crash in client middleware (GH-35240) Parquet Various memory leaks addressed in pqarrow package (GH-35015) Fixed panic for ListOf(types) if null (GH-35684) Java notes The JNI bindings for Arrow Dataset now support execute Substrait plans via the Acero query engine. (GH-34223) Arrow packages that depend on Netty (most notably, arrow-memory-netty, but also Arrow Flight) now require either Netty &lt; 4.1.94.Final or Netty &gt;= 4.1.96.Final. In Netty versions 4.1.94.Final and 4.1.95.Final, there was a breaking change in an internal API that affected Arrow; this was reverted in 4.1.96.Final (GH-36209, GH-36928) VectorSchemaRoot#slice now always makes a copy, including when the slice covers all rows (previously it did not make a copy in this case). This is a potentially-breaking change if your application depended on the old behavior. (GH-35275) Debug info for allocations is no longer automatically enabled when assertions are enabled (e.g. when running unit tests). Instead, support must be explicitly enabled. This is not quite a breaking change, but may be surprising if you are used to using this information while debugging tests. However, performance should be greatly improved while running tests. (GH-34338) Support for the upcoming Java 21 was added, though we do not yet test this in CI (GH-5053). The JNI bindings for Arrow Dataset now expose JSON support (GH-36421). Dictionary replacement is now supported when writing the IPC stream format (GH-18547). JavaScript notes Updated dependencies: https://github.com/apache/arrow/pull/36032 Python notes Compatibility notes: The default format version for Parquet has been bumped from 2.4 to 2.6 GH-35746. In practice, this means that nanosecond timestamps now preserve its resolution instead of being converted to microseconds. Support for Python 3.7 is dropped GH-34788 New features: Conversion to non-nano datetime64 for pandas &gt;= 2.0 is now supported GH-33321 Write page index is now supported GH-36284 Bindings for reading JSON format in Dataset are added GH-34216 keys_sorted property of MapType is now exposed GH-35112 Other improvements: Common python functionality between Table and RecordBatch classes has been consolidated ( GH-36129, GH-35415, GH-35390, GH-34979, GH-34868, GH-31868) Some functionality for FixedShapeTensorType has been improved (__reduce__ GH-36038, picklability GH-35599) Pyarrow scalars can now be accepted in the array constructor GH-21761 DataFrame Interchange Protocol implementation and usage is now documented GH-33980 Conversion between Arrow and Pandas for map/pydict now has enhanced support GH-34729 Usability of pc.map_lookup / MapLookupOptions is improved GH-36045 zero_copy_only keyword can now also be accepted in ChunkedArray.to_numpy() GH-34787 Python C++ codebase now has linter support in Archery and the CI GH-35485 Relevant bug fixes: __array__ numpy conversion for Table and RecordBatch is now corrected so that np.asarray(pa.Table) doesn’t return a transposed result GH-34886 parquet.write_to_dataset doesn’t create empty files for non-observed dictionary (category) values anymore GH-23870 Dataset writer now also correctly follows default Parquet version of 2.6 GH-36537 Comparing pyarrow.dataset.Partitioning with other type is now correctly handled GH-36659 Pickling of pyarrow.dataset PartitioningFactory objects is now supported GH-34884 None schema is now disallowed in parquet writer GH-35858 pa.FixedShapeTensorArray.to_numpy_ndarray is not failing on sliced arrays GH-35573 Halffloat type is now supported in the conversion from Arrow list to pandas GH-36168 __from_arrow__ is now also implemented for Array.to_pandas for pandas extension data types GH-36096 R notes New features: open_dataset() now works with ND-JSON files GH-35055 Calling schema() on multiple Arrow objects now returns the object’s schema GH-35543 dplyr .by/by argument now supported in arrow implementation of dplyr verbs GH-35667 Other improvements: Convenience function arrow_array() can be used to create Arrow Arrays GH-36381 Convenience function scalar() can be used to create Arrow Scalars GH-36265 Prevent crashed when passing data between arrow and duckdb by always calling RecordBatchReader::ReadNext() from DuckDB from the main R thread GH-36307 Issue a warning for set_io_thread_count() with num_threads &lt; 2 GH-36304 Ensure missing grouping variables are added to the beginning of the variable list GH-36305 CSV File reader options class objects can print the selected values GH-35955 Schema metadata can be set as a named character vector GH-35954 Ensure that the RStringViewer helper class does not own any Array references GH-35812 strptime() in arrow will return a timezone-aware timestamp if %z is part of the format string GH-35671 Column ordering when combining group_by() and across() now matches dplyr GH-35473 Link to correct version of OpenSSL when using autobrew GH-36551 Require cmake 3.16 in bundled build script GH-36321 For more on what’s in the 13.0.0 R package, see the R changelog. Ruby and C GLib notes Ruby Bug fixes Fixed GC-related issue against random segfault in hash join GH-35819 Fixed segfault in CallExpression.new GH-35915 Improvements FlightRPC: Added a convenient wrapper for the authentication method GH-35435 Added empty table support in #select_columns GH-35681 Added optional hash support in Expression.try_convert GH-35915 Parquet: Added Parquet::ArrowFileReader#each_row_group GH-36008 Added support of the automatic installation of arrow-c-glib on Conda environment GH-36287 C GLib Bug fixes Parquet: Fixed GC-related bug in metadata dependencies GH-35266 Fixed potentially GC-related issue against random segfault in hash join GH-35819 Improvements FlightRPC: Added support to pass GAFlightServerCallContext object in several methods of GAFlightServerCustomAuthHandler GH-35377 FlightSQL: Added support for INSERT/UPDATE/DELETE GH-36408 Added GArrowRunEndEncodedDataType GH-35417 Added GArrowRunEndEncodedArray GH-35418 Rust notes The Rust projects have moved to separate repositories outside the main Arrow monorepo. For notes on the latest release of the Rust implementation, see the latest Arrow Rust changelog." />
<link rel="canonical" href="https://arrow.apache.org/blog/2023/08/24/13.0.0-release/" />
<meta property="og:url" content="https://arrow.apache.org/blog/2023/08/24/13.0.0-release/" />
<meta property="og:site_name" content="Apache Arrow" />
<meta property="og:image" content="https://arrow.apache.org/img/arrow-logo_horizontal_black-txt_white-bg.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-08-24T00:00:00-04:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://arrow.apache.org/img/arrow-logo_horizontal_black-txt_white-bg.png" />
<meta property="twitter:title" content="Apache Arrow 13.0.0 Release" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"pmc"},"dateModified":"2023-08-24T00:00:00-04:00","datePublished":"2023-08-24T00:00:00-04:00","description":"The Apache Arrow team is pleased to announce the 13.0.0 release. This covers over 3 months of development work and includes 456 resolved issues from 108 distinct contributors. See the Install Page to learn how to get the libraries for your platform. The release notes below are not exhaustive and only expose selected highlights of the release. Many other bugfixes and improvements have been made: we refer you to the complete changelog. Community Since the 12.0.0 release, Marco Neumann, Gang Wu, Mehmet Ozan Kabak and Kevin Gurney have been invited to be committers. Matt Topol, Jie Wen, Ben Baumgold and Dewey Dunnington have joined the Project Management Committee (PMC). Thanks for your contributions and participation in the project! Columnar Format Notes The run-end encoded layout has been added. This layout can allow data with long runs of duplicate values to be encoded and processed efficiently. Initial support has been added for C++ and Go. C Device Data Interface An experimental new specification, the C Device Data Interface, has been accepted for inclusion GH-34971. It builds on the existing C Data Interface to provide a runtime-agnostic zero-copy sharing mechanism for Arrow data residing on non-CPU devices. Reference implementations of the C Device Data Interface will progressively be added to the standard Arrow libraries after the 13.0.0 release. Arrow Flight RPC notes Support for flagging ordered result sets to clients is now added. (GH-34852) gRPC 1.30 is now the minimum supported version in C++/Python/R/etc. (GH-34679) In C++, various methods now receive a full ServerCallContext (GH-35442, GH-35377) and the context now exposes headers sent by the client (GH-35375). C++ notes Building CMake 3.16 or later is now required for building Arrow C++ GH-34921. Optimizations are not disabled anymore when the RelWithDebInfo build type is selected GH-35850. Furthermore, compiler flags can now properly be customized per-build type using ARROW_C_FLAGS_DEBUG, ARROW_CXX_FLAGS_DEBUG and related variables GH-35870. Acero Handling of unaligned buffers is input nodes can be configured programmatically or by setting the environment variable ACERO_ALIGNMENT_HANDLING. The default behavior is to warn when an unaligned buffer is detected GH-35498. Compute Several new functions have been added: aggregate functions “first”, “last”, “first_last” GH-34911; vector functions “cumulative_prod”, “cumulative_min”, “cumulative_max” GH-32190; vector function “pairwise_diff” GH-35786. Sorting now works on dictionary arrays, with a much better performance than the naive approach of sorting the decoded dictionary GH-29887. Sorting also works on struct arrays, and nested sort keys are supported using FieldRed GH-33206. The check_overflow option has been removed from CumulativeSumOptions as it was redundant with the availability of two different functions: “cumulative_sum” and “cumulative_sum_checked” GH-35789. Run-end encoded filters are efficiently supported GH-35749. Duration types are supported with the “is_in” and “index_in” functions GH-36047. They can be multiplied with all integer types GH-36128. “is_in” and “index_in” now cast their inputs more flexibly: they first attempt to cast the value set to the input type, then in the other direction if the former fails GH-36203. Multiple bugs have been fixed in “utf8_slice_codeunits” when the stop option is omitted GH-36311. Dataset A custom schema can now be passed when writing a dataset GH-35730. The custom schema can alter nullability or metadata information, but is not allowed to change the datatypes written. Filesystems The S3 filesystem now writes files in equal-sized chunks, for compatibility with Cloudflare’s “R2” Storage GH-34363. A long-standing issue where S3 support could crash at shutdown because of resources still being alive after S3 finalization has been fixed GH-36346. Now, attempts to use S3 resources (such as making filesystem calls) after S3 finalization should result in a clean error. The GCS filesystem accepts a new option to set the project id GH-36227. IPC Nullability and metadata information for sub-fields of map types is now preserved when deserializing Arrow IPC GH-35297. Orc The Orc adapter now maps Arrow field metadata to Orc type attributes when writing, and vice-versa when reading GH-35304. Parquet It is now possible to write additional metadata while a ParquetFileWriter is open GH-34888. Writing a page index can be enabled selectively per-column GH-34949. In addition, page header statistics are not written anymore if the page index is enabled for the given column GH-34375, as the information would be redundant and less efficiently accessed. Parquet writer properties allow specifying the sorting columns GH-35331. The user is responsible for ensuring that the data written to the file actually complies with the given sorting. CRC computation has been implemented for v2 data pages GH-35171. It was already implemented for v1 data pages. Writing compliant nested types is now enabled by default GH-29781. This should not have any negative implication. Attempting to load a subset of an Arrow extension type is now forbidden GH-20385. Previously, if an extension type’s storage is nested (for example a “Point” extension type backed by a struct&lt;x: float64, y: float64&gt;), it was possible to load selectively some of the columns of the storage type. Substrait Support for various functions has been added: “stddev”, “variance”, “first”, “last” (GH-35247, GH-35506). Deserializing sorts is now supported GH-32763. However, some features, such as clustered sort direction or custom sort functions, are not implemented. Miscellaneous FieldRef sports additional methods to get a flattened version of nested fields GH-14946. Compared to their non-flattened counterparts, the methods GetFlattened, GetAllFlattened, GetOneFlattened and GetOneOrNoneFlattened combine a child’s null bitmap with its ancestors’ null bitmaps such as to compute the field’s overall logical validity bitmap. In other words, given the struct array [null, {&#39;x&#39;: null}, {&#39;x&#39;: 5}], FieldRef(&quot;x&quot;)::Get might return [0, null, 5] while FieldRef(&quot;y&quot;)::GetFlattened will always return [null, null, 5]. Scalar::hash() has been fixed for sliced nested arrays GH-35360. A new floating-point to decimal conversion algorithm exhibits much better precision GH-35576. It is now possible to cast between scalars of different list-like types GH-36309. C# notes Enhancements The C Data Interface is now supported in the .NET Apache.Arrow library. The main entry points are CArrowArrayImporter.ImportArray, CArrowArrayExporter.ExportArray, CArrowArrayStreamImporter.ImportArrayStream, and CArrowArrayStreamExporter.ExportArrayStream in the Apache.Arrow.C namespace. (GH-33856, GH-33857, GH-36120, and GH-35809). ArrowBuffer.BitmapBuilder adds Append(ReadOnlySpan&lt;byte&gt; source, int validBits) and AppendRange(bool value, int length) to improve performance of array concatenation (GH-32605) Bug Fixes TotalBytes and TotalRecords are now being serialized in FlightInfo (GH-35267) Go notes Enhancements Arrow Compute arithmetic functions are now available for Float16 (GH-35162) Float16, Large* and Fixed types are all now supported by the CSV reader/writer (GH-36105 and GH-36141) CSV Reader uses AppendValueFromString for extension types and properly reads empty values as null (GH-35188 and GH-35190) Substrait expressions can now be executed using the Compute library (GH-35652) You can now read back values from Dictionary Builders before finishing the array (GH-35711) MapType.ValueField and MapType.ValueType are now deprecated in favor of MapType.Elem().(*StructType) (GH-35909) Multiple equality functions which have been deprecated since v9 have now been removed (Such as array.ArraySliceEqual in favor of array.SliceEqual) (GH-36198) ValueStr method on Timestamp arrays now includes the zone in the output (GH-36568) BREAKING CHANGE FixedSizeListBuilder.AppendNull no longer requires manually appending nulls to the underlying list (GH-35482) Flight FlightSQL driver supports non-prepared queries now (GH-35136) Parquet Error messages in row group writer have been improved (GH-36319) Bug Fixes Cross architecture build failures with v12.0.1 have been fixed (GH-36052) Arrow It is now possible to build the Arrow Go lib using tinygo for building smaller WASM binaries (GH-32832) Fields method for Schema and StructType now returns a copy of the slice to ensure immutability (GH-35306 and GH-35866) array.ApproxEqual for Maps now allows entries for a given element to be presented in any order (GH-35828) Fix issues with decimal256 arrays (GH-35911, GH-35965, and GH-35975) StructType now allows duplicate field names correctly (GH-36014) Flight Fix crash in client middleware (GH-35240) Parquet Various memory leaks addressed in pqarrow package (GH-35015) Fixed panic for ListOf(types) if null (GH-35684) Java notes The JNI bindings for Arrow Dataset now support execute Substrait plans via the Acero query engine. (GH-34223) Arrow packages that depend on Netty (most notably, arrow-memory-netty, but also Arrow Flight) now require either Netty &lt; 4.1.94.Final or Netty &gt;= 4.1.96.Final. In Netty versions 4.1.94.Final and 4.1.95.Final, there was a breaking change in an internal API that affected Arrow; this was reverted in 4.1.96.Final (GH-36209, GH-36928) VectorSchemaRoot#slice now always makes a copy, including when the slice covers all rows (previously it did not make a copy in this case). This is a potentially-breaking change if your application depended on the old behavior. (GH-35275) Debug info for allocations is no longer automatically enabled when assertions are enabled (e.g. when running unit tests). Instead, support must be explicitly enabled. This is not quite a breaking change, but may be surprising if you are used to using this information while debugging tests. However, performance should be greatly improved while running tests. (GH-34338) Support for the upcoming Java 21 was added, though we do not yet test this in CI (GH-5053). The JNI bindings for Arrow Dataset now expose JSON support (GH-36421). Dictionary replacement is now supported when writing the IPC stream format (GH-18547). JavaScript notes Updated dependencies: https://github.com/apache/arrow/pull/36032 Python notes Compatibility notes: The default format version for Parquet has been bumped from 2.4 to 2.6 GH-35746. In practice, this means that nanosecond timestamps now preserve its resolution instead of being converted to microseconds. Support for Python 3.7 is dropped GH-34788 New features: Conversion to non-nano datetime64 for pandas &gt;= 2.0 is now supported GH-33321 Write page index is now supported GH-36284 Bindings for reading JSON format in Dataset are added GH-34216 keys_sorted property of MapType is now exposed GH-35112 Other improvements: Common python functionality between Table and RecordBatch classes has been consolidated ( GH-36129, GH-35415, GH-35390, GH-34979, GH-34868, GH-31868) Some functionality for FixedShapeTensorType has been improved (__reduce__ GH-36038, picklability GH-35599) Pyarrow scalars can now be accepted in the array constructor GH-21761 DataFrame Interchange Protocol implementation and usage is now documented GH-33980 Conversion between Arrow and Pandas for map/pydict now has enhanced support GH-34729 Usability of pc.map_lookup / MapLookupOptions is improved GH-36045 zero_copy_only keyword can now also be accepted in ChunkedArray.to_numpy() GH-34787 Python C++ codebase now has linter support in Archery and the CI GH-35485 Relevant bug fixes: __array__ numpy conversion for Table and RecordBatch is now corrected so that np.asarray(pa.Table) doesn’t return a transposed result GH-34886 parquet.write_to_dataset doesn’t create empty files for non-observed dictionary (category) values anymore GH-23870 Dataset writer now also correctly follows default Parquet version of 2.6 GH-36537 Comparing pyarrow.dataset.Partitioning with other type is now correctly handled GH-36659 Pickling of pyarrow.dataset PartitioningFactory objects is now supported GH-34884 None schema is now disallowed in parquet writer GH-35858 pa.FixedShapeTensorArray.to_numpy_ndarray is not failing on sliced arrays GH-35573 Halffloat type is now supported in the conversion from Arrow list to pandas GH-36168 __from_arrow__ is now also implemented for Array.to_pandas for pandas extension data types GH-36096 R notes New features: open_dataset() now works with ND-JSON files GH-35055 Calling schema() on multiple Arrow objects now returns the object’s schema GH-35543 dplyr .by/by argument now supported in arrow implementation of dplyr verbs GH-35667 Other improvements: Convenience function arrow_array() can be used to create Arrow Arrays GH-36381 Convenience function scalar() can be used to create Arrow Scalars GH-36265 Prevent crashed when passing data between arrow and duckdb by always calling RecordBatchReader::ReadNext() from DuckDB from the main R thread GH-36307 Issue a warning for set_io_thread_count() with num_threads &lt; 2 GH-36304 Ensure missing grouping variables are added to the beginning of the variable list GH-36305 CSV File reader options class objects can print the selected values GH-35955 Schema metadata can be set as a named character vector GH-35954 Ensure that the RStringViewer helper class does not own any Array references GH-35812 strptime() in arrow will return a timezone-aware timestamp if %z is part of the format string GH-35671 Column ordering when combining group_by() and across() now matches dplyr GH-35473 Link to correct version of OpenSSL when using autobrew GH-36551 Require cmake 3.16 in bundled build script GH-36321 For more on what’s in the 13.0.0 R package, see the R changelog. Ruby and C GLib notes Ruby Bug fixes Fixed GC-related issue against random segfault in hash join GH-35819 Fixed segfault in CallExpression.new GH-35915 Improvements FlightRPC: Added a convenient wrapper for the authentication method GH-35435 Added empty table support in #select_columns GH-35681 Added optional hash support in Expression.try_convert GH-35915 Parquet: Added Parquet::ArrowFileReader#each_row_group GH-36008 Added support of the automatic installation of arrow-c-glib on Conda environment GH-36287 C GLib Bug fixes Parquet: Fixed GC-related bug in metadata dependencies GH-35266 Fixed potentially GC-related issue against random segfault in hash join GH-35819 Improvements FlightRPC: Added support to pass GAFlightServerCallContext object in several methods of GAFlightServerCustomAuthHandler GH-35377 FlightSQL: Added support for INSERT/UPDATE/DELETE GH-36408 Added GArrowRunEndEncodedDataType GH-35417 Added GArrowRunEndEncodedArray GH-35418 Rust notes The Rust projects have moved to separate repositories outside the main Arrow monorepo. For notes on the latest release of the Rust implementation, see the latest Arrow Rust changelog.","headline":"Apache Arrow 13.0.0 Release","image":"https://arrow.apache.org/img/arrow-logo_horizontal_black-txt_white-bg.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://arrow.apache.org/blog/2023/08/24/13.0.0-release/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://arrow.apache.org/img/logo.png"},"name":"pmc"},"url":"https://arrow.apache.org/blog/2023/08/24/13.0.0-release/"}</script>
<!-- End Jekyll SEO tag -->


    <!-- favicons -->
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png" id="light1">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png" id="light2">
    <link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/img/apple-touch-icon.png" id="light3">
    <link rel="apple-touch-icon" type="image/png" sizes="120x120" href="/img/apple-touch-icon-120x120.png" id="light4">
    <link rel="apple-touch-icon" type="image/png" sizes="76x76" href="/img/apple-touch-icon-76x76.png" id="light5">
    <link rel="apple-touch-icon" type="image/png" sizes="60x60" href="/img/apple-touch-icon-60x60.png" id="light6">
    <!-- dark mode favicons -->
    <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16-dark.png" id="dark1">
    <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32-dark.png" id="dark2">
    <link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/img/apple-touch-icon-dark.png" id="dark3">
    <link rel="apple-touch-icon" type="image/png" sizes="120x120" href="/img/apple-touch-icon-120x120-dark.png" id="dark4">
    <link rel="apple-touch-icon" type="image/png" sizes="76x76" href="/img/apple-touch-icon-76x76-dark.png" id="dark5">
    <link rel="apple-touch-icon" type="image/png" sizes="60x60" href="/img/apple-touch-icon-60x60-dark.png" id="dark6">

    <script>
      // Switch to the dark-mode favicons if prefers-color-scheme: dark
      function onUpdate() {
        light1 = document.querySelector('link#light1');
        light2 = document.querySelector('link#light2');
        light3 = document.querySelector('link#light3');
        light4 = document.querySelector('link#light4');
        light5 = document.querySelector('link#light5');
        light6 = document.querySelector('link#light6');

        dark1 = document.querySelector('link#dark1');
        dark2 = document.querySelector('link#dark2');
        dark3 = document.querySelector('link#dark3');
        dark4 = document.querySelector('link#dark4');
        dark5 = document.querySelector('link#dark5');
        dark6 = document.querySelector('link#dark6');

        if (matcher.matches) {
          light1.remove();
          light2.remove();
          light3.remove();
          light4.remove();
          light5.remove();
          light6.remove();
          document.head.append(dark1);
          document.head.append(dark2);
          document.head.append(dark3);
          document.head.append(dark4);
          document.head.append(dark5);
          document.head.append(dark6);
        } else {
          dark1.remove();
          dark2.remove();
          dark3.remove();
          dark4.remove();
          dark5.remove();
          dark6.remove();
          document.head.append(light1);
          document.head.append(light2);
          document.head.append(light3);
          document.head.append(light4);
          document.head.append(light5);
          document.head.append(light6);
        }
      }
      matcher = window.matchMedia('(prefers-color-scheme: dark)');
      matcher.addListener(onUpdate);
      onUpdate();
    </script>

    <link href="/css/main.css" rel="stylesheet">
    <link href="/css/syntax.css" rel="stylesheet">
    <script src="/javascript/main.js"></script>
    
    <!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  /* We explicitly disable cookie tracking to avoid privacy issues */
  _paq.push(['disableCookies']);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://analytics.apache.org/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '20']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->

    
    <link type="application/atom+xml" rel="alternate" href="https://arrow.apache.org/feed.xml" title="Apache Arrow" />
  </head>


<body class="wrap">
  <header>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
  
  <a class="navbar-brand no-padding" href="/"><img src="/img/arrow-inverse-300px.png" height="40px"/></a>
  
   <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#arrow-navbar" aria-controls="arrow-navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse justify-content-end" id="arrow-navbar">
      <ul class="nav navbar-nav">
        <li class="nav-item"><a class="nav-link" href="/overview/" role="button" aria-haspopup="true" aria-expanded="false">Overview</a></li>
        <li class="nav-item"><a class="nav-link" href="/faq/" role="button" aria-haspopup="true" aria-expanded="false">FAQ</a></li>
        <li class="nav-item"><a class="nav-link" href="/blog" role="button" aria-haspopup="true" aria-expanded="false">Blog</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#"
             id="navbarDropdownGetArrow" role="button" data-toggle="dropdown"
             aria-haspopup="true" aria-expanded="false">
             Get Arrow
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownGetArrow">
            <a class="dropdown-item" href="/install/">Install</a>
            <a class="dropdown-item" href="/release/">Releases</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#"
             id="navbarDropdownDocumentation" role="button" data-toggle="dropdown"
             aria-haspopup="true" aria-expanded="false">
             Docs
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownDocumentation">
            <a class="dropdown-item" href="/docs">Project Docs</a>
            <a class="dropdown-item" href="/docs/format/Columnar.html">Format</a>
            <hr/>
            <a class="dropdown-item" href="/docs/c_glib">C GLib</a>
            <a class="dropdown-item" href="/docs/cpp">C++</a>
            <a class="dropdown-item" href="https://github.com/apache/arrow/blob/main/csharp/README.md">C#</a>
            <a class="dropdown-item" href="https://godoc.org/github.com/apache/arrow/go/arrow">Go</a>
            <a class="dropdown-item" href="/docs/java">Java</a>
            <a class="dropdown-item" href="/docs/js">JavaScript</a>
            <a class="dropdown-item" href="/julia/">Julia</a>
            <a class="dropdown-item" href="https://github.com/apache/arrow/blob/main/matlab/README.md">MATLAB</a>
            <a class="dropdown-item" href="/docs/python">Python</a>
            <a class="dropdown-item" href="/docs/r">R</a>
            <a class="dropdown-item" href="https://github.com/apache/arrow/blob/main/ruby/README.md">Ruby</a>
            <a class="dropdown-item" href="https://docs.rs/arrow/latest">Rust</a>
            <a class="dropdown-item" href="/swift">Swift</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#"
             id="navbarDropdownSource" role="button" data-toggle="dropdown"
             aria-haspopup="true" aria-expanded="false">
             Source
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownSource">
            <a class="dropdown-item" href="https://github.com/apache/arrow">Main Repo</a>
            <hr/>
            <a class="dropdown-item" href="https://github.com/apache/arrow/tree/main/c_glib">C GLib</a>
            <a class="dropdown-item" href="https://github.com/apache/arrow/tree/main/cpp">C++</a>
            <a class="dropdown-item" href="https://github.com/apache/arrow/tree/main/csharp">C#</a>
            <a class="dropdown-item" href="https://github.com/apache/arrow-go">Go</a>
            <a class="dropdown-item" href="https://github.com/apache/arrow-java">Java</a>
            <a class="dropdown-item" href="https://github.com/apache/arrow-js">JavaScript</a>
            <a class="dropdown-item" href="https://github.com/apache/arrow-julia">Julia</a>
            <a class="dropdown-item" href="https://github.com/apache/arrow/tree/main/matlab">MATLAB</a>
            <a class="dropdown-item" href="https://github.com/apache/arrow/tree/main/python">Python</a>
            <a class="dropdown-item" href="https://github.com/apache/arrow/tree/main/r">R</a>
            <a class="dropdown-item" href="https://github.com/apache/arrow/tree/main/ruby">Ruby</a>
            <a class="dropdown-item" href="https://github.com/apache/arrow-rs">Rust</a>
            <a class="dropdown-item" href="https://github.com/apache/arrow-swift">Swift</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#"
             id="navbarDropdownSubprojects" role="button" data-toggle="dropdown"
             aria-haspopup="true" aria-expanded="false">
             Subprojects
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownSubprojects">
            <a class="dropdown-item" href="/adbc">ADBC</a>
            <a class="dropdown-item" href="/docs/format/Flight.html">Arrow Flight</a>
            <a class="dropdown-item" href="/docs/format/FlightSql.html">Arrow Flight SQL</a>
            <a class="dropdown-item" href="https://datafusion.apache.org">DataFusion</a>
            <a class="dropdown-item" href="/nanoarrow">nanoarrow</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#"
             id="navbarDropdownCommunity" role="button" data-toggle="dropdown"
             aria-haspopup="true" aria-expanded="false">
             Community
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownCommunity">
            <a class="dropdown-item" href="/community/">Communication</a>
            <a class="dropdown-item" href="/docs/developers/index.html">Contributing</a>
            <a class="dropdown-item" href="https://github.com/apache/arrow/issues">Issue Tracker</a>
            <a class="dropdown-item" href="/committers/">Governance</a>
            <a class="dropdown-item" href="/use_cases/">Use Cases</a>
            <a class="dropdown-item" href="/powered_by/">Powered By</a>
            <a class="dropdown-item" href="/visual_identity/">Visual Identity</a>
            <a class="dropdown-item" href="/security/">Security</a>
            <a class="dropdown-item" href="https://www.apache.org/foundation/policies/conduct.html">Code of Conduct</a>
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#"
             id="navbarDropdownASF" role="button" data-toggle="dropdown"
             aria-haspopup="true" aria-expanded="false">
             ASF Links
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownASF">
            <a class="dropdown-item" href="https://www.apache.org/">ASF Website</a>
            <a class="dropdown-item" href="https://www.apache.org/licenses/">License</a>
            <a class="dropdown-item" href="https://www.apache.org/foundation/sponsorship.html">Donate</a>
            <a class="dropdown-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <a class="dropdown-item" href="https://www.apache.org/security/">Security</a>
          </div>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </nav>

  </header>

  <div class="container p-4 pt-5">
    <div class="col-md-8 mx-auto">
      <main role="main" class="pb-5">
        
<h1>
  Apache Arrow 13.0.0 Release
</h1>
<hr class="mt-4 mb-3">



<p class="mb-4 pb-1">
  <span class="badge badge-secondary">Published</span>
  <span class="published mr-3">
    24 Aug 2023
  </span>
  <br />
  <span class="badge badge-secondary">By</span>
  
    <a class="mr-3" href="https://arrow.apache.org">The Apache Arrow PMC (pmc) </a>
  

  
</p>


        <!--

-->

<p>The Apache Arrow team is pleased to announce the 13.0.0 release. This covers
over 3 months of development work and includes <a href="https://github.com/apache/arrow/milestone/53?closed=1"><strong>456 resolved issues</strong></a>
from <a href="/release/13.0.0.html#contributors"><strong>108 distinct contributors</strong></a>. See the <a href="https://arrow.apache.org/install/">Install Page</a>
to learn how to get the libraries for your platform.</p>

<p>The release notes below are not exhaustive and only expose selected highlights
of the release. Many other bugfixes and improvements have been made: we refer
you to the <a href="/release/13.0.0.html#changelog">complete changelog</a>.</p>

<h2 id="community">Community</h2>

<p>Since the 12.0.0 release, Marco Neumann, Gang Wu, Mehmet Ozan Kabak and Kevin Gurney
have been invited to be committers.
Matt Topol, Jie Wen, Ben Baumgold and Dewey Dunnington have joined the
Project Management Committee (PMC).</p>

<p>Thanks for your contributions and participation in the project!</p>

<h2 id="columnar-format-notes">Columnar Format Notes</h2>

<p>The <a href="https://arrow.apache.org/docs/dev/format/Columnar.html#run-end-encoded-layout">run-end encoded layout</a>
has been added.  This layout can allow data with long runs of duplicate values to be encoded and processed
efficiently.  Initial support has been added for <a href="https://github.com/apache/arrow/pull/14179">C++</a> and
<a href="https://github.com/apache/arrow/pull/14223">Go</a>.</p>

<h3 id="c-device-data-interface">C Device Data Interface</h3>

<p>An <strong>experimental</strong> new specification, the
<a href="https://arrow.apache.org/docs/dev/format/CDeviceDataInterface.html">C Device Data Interface</a>,
has been accepted for inclusion <a href="https://github.com/apache/arrow/issues/34971">GH-34971</a>. It builds on the existing
C Data Interface to provide a runtime-agnostic zero-copy sharing mechanism
for Arrow data residing on non-CPU devices.</p>

<p>Reference implementations of the C Device Data Interface will progressively
be added to the standard Arrow libraries after the 13.0.0 release.</p>

<h2 id="arrow-flight-rpc-notes">Arrow Flight RPC notes</h2>

<p>Support for flagging ordered result sets to clients is now added. (<a href="https://github.com/apache/arrow/issues/34852">GH-34852</a>)</p>

<p>gRPC 1.30 is now the minimum supported version in C++/Python/R/etc. (<a href="https://github.com/apache/arrow/issues/36479">GH-34679</a>)</p>

<p>In C++, various methods now receive a full <code class="language-plaintext highlighter-rouge">ServerCallContext</code> (<a href="https://github.com/apache/arrow/issues/35442">GH-35442</a>, <a href="https://github.com/apache/arrow/issues/35377">GH-35377</a>) and the context now exposes headers sent by the client (<a href="https://github.com/apache/arrow/issues/35375">GH-35375</a>).</p>

<h2 id="c-notes">C++ notes</h2>

<h3 id="building">Building</h3>

<p>CMake 3.16 or later is now required for building Arrow C++ <a href="https://github.com/apache/arrow/issues/34921">GH-34921</a>.</p>

<p>Optimizations are not disabled anymore when the <code class="language-plaintext highlighter-rouge">RelWithDebInfo</code> build type
is selected <a href="https://github.com/apache/arrow/issues/35850">GH-35850</a>. Furthermore, compiler flags can now properly be
customized per-build type using <code class="language-plaintext highlighter-rouge">ARROW_C_FLAGS_DEBUG</code>, <code class="language-plaintext highlighter-rouge">ARROW_CXX_FLAGS_DEBUG</code>
and related variables <a href="https://github.com/apache/arrow/issues/35870">GH-35870</a>.</p>

<h3 id="acero">Acero</h3>

<p>Handling of unaligned buffers is input nodes can be configured programmatically
or by setting the environment variable <code class="language-plaintext highlighter-rouge">ACERO_ALIGNMENT_HANDLING</code>. The default
behavior is to warn when an unaligned buffer is detected <a href="https://github.com/apache/arrow/issues/35498">GH-35498</a>.</p>

<h3 id="compute">Compute</h3>

<p>Several new functions have been added:</p>
<ul>
  <li>aggregate functions “first”, “last”, “first_last” <a href="https://github.com/apache/arrow/issues/34911">GH-34911</a>;</li>
  <li>vector functions “cumulative_prod”, “cumulative_min”, “cumulative_max” <a href="https://github.com/apache/arrow/issues/32190">GH-32190</a>;</li>
  <li>vector function “pairwise_diff” <a href="https://github.com/apache/arrow/issues/35786">GH-35786</a>.</li>
</ul>

<p>Sorting now works on dictionary arrays, with a much better performance than
the naive approach of sorting the decoded dictionary <a href="https://github.com/apache/arrow/issues/29887">GH-29887</a>. Sorting also
works on struct arrays, and nested sort keys are supported using <code class="language-plaintext highlighter-rouge">FieldRed</code> <a href="https://github.com/apache/arrow/issues/33206">GH-33206</a>.</p>

<p>The <code class="language-plaintext highlighter-rouge">check_overflow</code> option has been removed from <code class="language-plaintext highlighter-rouge">CumulativeSumOptions</code> as
it was redundant with the availability of two different functions:
“cumulative_sum” and “cumulative_sum_checked” <a href="https://github.com/apache/arrow/issues/35789">GH-35789</a>.</p>

<p>Run-end encoded filters are efficiently supported <a href="https://github.com/apache/arrow/issues/35749">GH-35749</a>.</p>

<p>Duration types are supported with the “is_in” and “index_in” functions <a href="https://github.com/apache/arrow/issues/36047">GH-36047</a>.
They can be multiplied with all integer types <a href="https://github.com/apache/arrow/issues/36128">GH-36128</a>.</p>

<p>“is_in” and “index_in” now cast their inputs more flexibly: they first attempt
to cast the value set to the input type, then in the other direction if the
former fails <a href="https://github.com/apache/arrow/issues/36203">GH-36203</a>.</p>

<p>Multiple bugs have been fixed in “utf8_slice_codeunits” when the <code class="language-plaintext highlighter-rouge">stop</code> option
is omitted <a href="https://github.com/apache/arrow/issues/36311">GH-36311</a>.</p>

<h3 id="dataset">Dataset</h3>

<p>A custom schema can now be passed when writing a dataset <a href="https://github.com/apache/arrow/issues/35730">GH-35730</a>. The custom
schema can alter nullability or metadata information, but is not allowed to
change the datatypes written.</p>

<h3 id="filesystems">Filesystems</h3>

<p>The S3 filesystem now writes files in equal-sized chunks, for compatibility with
Cloudflare’s “R2” Storage <a href="https://github.com/apache/arrow/issues/34363">GH-34363</a>.</p>

<p>A long-standing issue where S3 support could crash at shutdown because of resources
still being alive after S3 finalization has been fixed <a href="https://github.com/apache/arrow/issues/36346">GH-36346</a>. Now, attempts
to use S3 resources (such as making filesystem calls) after S3 finalization should
result in a clean error.</p>

<p>The GCS filesystem accepts a new option to set the project id <a href="https://github.com/apache/arrow/issues/36227">GH-36227</a>.</p>

<h3 id="ipc">IPC</h3>

<p>Nullability and metadata information for sub-fields of map types is now preserved
when deserializing Arrow IPC <a href="https://github.com/apache/arrow/issues/35297">GH-35297</a>.</p>

<h3 id="orc">Orc</h3>

<p>The Orc adapter now maps Arrow field metadata to Orc type attributes when writing,
and vice-versa when reading <a href="https://github.com/apache/arrow/issues/35304">GH-35304</a>.</p>

<h3 id="parquet">Parquet</h3>

<p>It is now possible to write additional metadata while a <code class="language-plaintext highlighter-rouge">ParquetFileWriter</code> is
open <a href="https://github.com/apache/arrow/issues/34888">GH-34888</a>.</p>

<p>Writing a page index can be enabled selectively per-column <a href="https://github.com/apache/arrow/issues/34949">GH-34949</a>.
In addition, page header statistics are not written anymore if the page
index is enabled for the given column <a href="https://github.com/apache/arrow/issues/34375">GH-34375</a>, as the information would
be redundant and less efficiently accessed.</p>

<p>Parquet writer properties allow specifying the sorting columns <a href="https://github.com/apache/arrow/issues/35331">GH-35331</a>.
The user is responsible for ensuring that the data written to the file
actually complies with the given sorting.</p>

<p>CRC computation has been implemented for v2 data pages <a href="https://github.com/apache/arrow/issues/35171">GH-35171</a>.
It was already implemented for v1 data pages.</p>

<p>Writing compliant nested types is now enabled by default <a href="https://github.com/apache/arrow/issues/29781">GH-29781</a>. This
should not have any negative implication.</p>

<p>Attempting to load a subset of an Arrow extension type is now forbidden
<a href="https://github.com/apache/arrow/issues/20385">GH-20385</a>. Previously, if an extension type’s storage is nested (for example
a “Point” extension type backed by a <code class="language-plaintext highlighter-rouge">struct&lt;x: float64, y: float64&gt;</code>),
it was possible to load selectively some of the columns of the storage type.</p>

<h3 id="substrait">Substrait</h3>

<p>Support for various functions has been added: “stddev”, “variance”, “first”,
“last” (GH-35247, GH-35506).</p>

<p>Deserializing sorts is now supported <a href="https://github.com/apache/arrow/issues/32763">GH-32763</a>. However, some features,
such as clustered sort direction or custom sort functions, are not
implemented.</p>

<h3 id="miscellaneous">Miscellaneous</h3>

<p><code class="language-plaintext highlighter-rouge">FieldRef</code> sports additional methods to get a flattened version of nested
fields <a href="https://github.com/apache/arrow/issues/14946">GH-14946</a>. Compared to their non-flattened counterparts,
the methods <code class="language-plaintext highlighter-rouge">GetFlattened</code>, <code class="language-plaintext highlighter-rouge">GetAllFlattened</code>, <code class="language-plaintext highlighter-rouge">GetOneFlattened</code> and
<code class="language-plaintext highlighter-rouge">GetOneOrNoneFlattened</code> combine a child’s null bitmap with its ancestors’
null bitmaps such as to compute the field’s overall logical validity bitmap.</p>

<p>In other words, given the struct array <code class="language-plaintext highlighter-rouge">[null, {'x': null}, {'x': 5}]</code>,
<code class="language-plaintext highlighter-rouge">FieldRef("x")::Get</code> might return <code class="language-plaintext highlighter-rouge">[0, null, 5]</code>
while <code class="language-plaintext highlighter-rouge">FieldRef("y")::GetFlattened</code> will <em>always</em> return <code class="language-plaintext highlighter-rouge">[null, null, 5]</code>.</p>

<p><code class="language-plaintext highlighter-rouge">Scalar::hash()</code> has been fixed for sliced nested arrays <a href="https://github.com/apache/arrow/issues/35360">GH-35360</a>.</p>

<p>A new floating-point to decimal conversion algorithm exhibits much better
precision <a href="https://github.com/apache/arrow/issues/35576">GH-35576</a>.</p>

<p>It is now possible to cast between scalars of different list-like types
<a href="https://github.com/apache/arrow/issues/36309">GH-36309</a>.</p>

<h2 id="c-notes-1">C# notes</h2>

<h3 id="enhancements">Enhancements</h3>

<ul>
  <li>
    <p>The <a href="https://arrow.apache.org/docs/format/CDataInterface.html">C Data Interface</a> is now supported in the .NET Apache.Arrow library. The main entry points are <code class="language-plaintext highlighter-rouge">CArrowArrayImporter.ImportArray</code>, <code class="language-plaintext highlighter-rouge">CArrowArrayExporter.ExportArray</code>, <code class="language-plaintext highlighter-rouge">CArrowArrayStreamImporter.ImportArrayStream</code>, and <code class="language-plaintext highlighter-rouge">CArrowArrayStreamExporter.ExportArrayStream</code> in the <code class="language-plaintext highlighter-rouge">Apache.Arrow.C</code> namespace. (<a href="https://github.com/apache/arrow/issues/33856">GH-33856</a>, <a href="https://github.com/apache/arrow/issues/33857">GH-33857</a>, <a href="https://github.com/apache/arrow/issues/36120">GH-36120</a>, and <a href="https://github.com/apache/arrow/issues/35809">GH-35809</a>).</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">ArrowBuffer.BitmapBuilder</code> adds <code class="language-plaintext highlighter-rouge">Append(ReadOnlySpan&lt;byte&gt; source, int validBits)</code> and <code class="language-plaintext highlighter-rouge">AppendRange(bool value, int length)</code> to improve performance of array concatenation (<a href="https://github.com/apache/arrow/issues/32605">GH-32605</a>)</p>
  </li>
</ul>

<h3 id="bug-fixes">Bug Fixes</h3>

<ul>
  <li>TotalBytes and TotalRecords are now being serialized in FlightInfo (<a href="https://github.com/apache/arrow/issues/35267">GH-35267</a>)
    <h2 id="go-notes">Go notes</h2>
  </li>
</ul>

<h3 id="enhancements-1">Enhancements</h3>

<h4 id="arrow">Arrow</h4>

<ul>
  <li>Compute arithmetic functions are now available for Float16 (<a href="https://github.com/apache/arrow/issues/35162">GH-35162</a>)</li>
  <li>Float16, Large* and Fixed types are all now supported by the CSV reader/writer (<a href="https://github.com/apache/arrow/issues/36105">GH-36105</a> and <a href="https://github.com/apache/arrow/issues/36141">GH-36141</a>)</li>
  <li>CSV Reader uses <code class="language-plaintext highlighter-rouge">AppendValueFromString</code> for extension types and properly reads empty values as null (<a href="https://github.com/apache/arrow/issues/35188">GH-35188</a> and <a href="https://github.com/apache/arrow/issues/35190">GH-35190</a>)</li>
  <li><a href="https://github.com/substrait-io/substrait-go">Substrait</a> expressions can now be executed using the Compute library (<a href="https://github.com/apache/arrow/issues/35652">GH-35652</a>)</li>
  <li>You can now read back values from Dictionary Builders before finishing the array (<a href="https://github.com/apache/arrow/issues/35711">GH-35711</a>)</li>
  <li><code class="language-plaintext highlighter-rouge">MapType.ValueField</code> and <code class="language-plaintext highlighter-rouge">MapType.ValueType</code> are now deprecated in favor of <code class="language-plaintext highlighter-rouge">MapType.Elem().(*StructType)</code> (<a href="https://github.com/apache/arrow/issues/35909">GH-35909</a>)</li>
  <li>Multiple equality functions which have been deprecated since v9 have  now been removed (Such as <code class="language-plaintext highlighter-rouge">array.ArraySliceEqual</code> in favor of <code class="language-plaintext highlighter-rouge">array.SliceEqual</code>) (<a href="https://github.com/apache/arrow/issues/36198">GH-36198</a>)</li>
  <li><code class="language-plaintext highlighter-rouge">ValueStr</code> method on Timestamp arrays now includes the zone in the output (<a href="https://github.com/apache/arrow/issues/36568">GH-36568</a>)</li>
  <li><em>BREAKING CHANGE</em> <code class="language-plaintext highlighter-rouge">FixedSizeListBuilder.AppendNull</code> no longer requires manually appending nulls to the underlying list  (<a href="https://github.com/apache/arrow/issues/35482">GH-35482</a>)</li>
</ul>

<h4 id="flight">Flight</h4>

<ul>
  <li>FlightSQL driver supports non-prepared queries now (<a href="https://github.com/apache/arrow/issues/35136">GH-35136</a>)</li>
</ul>

<h4 id="parquet-1">Parquet</h4>

<ul>
  <li>Error messages in row group writer have been improved (<a href="https://github.com/apache/arrow/issues/36319">GH-36319</a>)</li>
</ul>

<h3 id="bug-fixes-1">Bug Fixes</h3>

<ul>
  <li>Cross architecture build failures with v12.0.1 have been fixed (<a href="https://github.com/apache/arrow/issues/36052">GH-36052</a>)</li>
</ul>

<h4 id="arrow-1">Arrow</h4>

<ul>
  <li>It is now possible to build the Arrow Go lib using tinygo for building smaller WASM binaries (<a href="https://github.com/apache/arrow/issues/32832">GH-32832</a>)</li>
  <li><code class="language-plaintext highlighter-rouge">Fields</code> method for Schema and StructType now returns a copy of the slice to ensure immutability (<a href="https://github.com/apache/arrow/issues/35306">GH-35306</a> and <a href="https://github.com/apache/arrow/issues/35866">GH-35866</a>)</li>
  <li><code class="language-plaintext highlighter-rouge">array.ApproxEqual</code> for Maps now allows entries for a given element to be presented in any order (<a href="https://github.com/apache/arrow/issues/35828">GH-35828</a>)</li>
  <li>Fix issues with decimal256 arrays (<a href="https://github.com/apache/arrow/issues/35911">GH-35911</a>, <a href="https://github.com/apache/arrow/issues/35965">GH-35965</a>, and <a href="https://github.com/apache/arrow/issues/35975">GH-35975</a>)</li>
  <li>StructType now allows duplicate field names correctly (<a href="https://github.com/apache/arrow/issues/36014">GH-36014</a>)</li>
</ul>

<h4 id="flight-1">Flight</h4>

<ul>
  <li>Fix crash in client middleware (<a href="https://github.com/apache/arrow/issues/35240">GH-35240</a>)</li>
</ul>

<h4 id="parquet-2">Parquet</h4>

<ul>
  <li>Various memory leaks addressed in pqarrow package (<a href="https://github.com/apache/arrow/issues/35015">GH-35015</a>)</li>
  <li>Fixed panic for <code class="language-plaintext highlighter-rouge">ListOf(types)</code> if null (<a href="https://github.com/apache/arrow/issues/35684">GH-35684</a>)</li>
</ul>

<h2 id="java-notes">Java notes</h2>

<p>The JNI bindings for Arrow Dataset now support execute <a href="https://substrait.io/">Substrait</a> plans via the <a href="https://arrow.apache.org/docs/dev/cpp/streaming_execution.html">Acero</a> query engine. (<a href="https://github.com/apache/arrow/issues/34223">GH-34223</a>)</p>

<p>Arrow packages that depend on Netty (most notably, <code class="language-plaintext highlighter-rouge">arrow-memory-netty</code>, but also Arrow Flight) now require either Netty &lt; 4.1.94.Final or Netty &gt;= 4.1.96.Final. In Netty versions 4.1.94.Final and 4.1.95.Final, there was a breaking change in an internal API that affected Arrow; this was reverted in 4.1.96.Final (<a href="https://github.com/apache/arrow/issues/36209">GH-36209</a>, <a href="https://github.com/apache/arrow/issues/36928">GH-36928</a>)</p>

<p><code class="language-plaintext highlighter-rouge">VectorSchemaRoot#slice</code> now always makes a copy, including when the slice covers all rows (previously it did not make a copy in this case). This is a potentially-breaking change if your application depended on the old behavior. (<a href="https://github.com/apache/arrow/issues/35275">GH-35275</a>)</p>

<p>Debug info for allocations is no longer automatically enabled when assertions are enabled (e.g. when running unit tests). Instead, support must be explicitly enabled. This is not quite a breaking change, but may be surprising if you are used to using this information while debugging tests. However, performance should be greatly improved while running tests. (<a href="https://github.com/apache/arrow/issues/34338">GH-34338</a>)</p>

<p>Support for the upcoming Java 21 was added, though we do not yet test this in CI (<a href="https://github.com/apache/arrow/issues/35053">GH-5053</a>). The JNI bindings for Arrow Dataset now expose JSON support (<a href="https://github.com/apache/arrow/issues/36421">GH-36421</a>). Dictionary replacement is now supported when writing the IPC stream format (<a href="https://github.com/apache/arrow/issues/18547">GH-18547</a>).</p>

<h2 id="javascript-notes">JavaScript notes</h2>

<ul>
  <li>Updated dependencies: https://github.com/apache/arrow/pull/36032</li>
</ul>

<h2 id="python-notes">Python notes</h2>

<p>Compatibility notes:</p>

<ul>
  <li>The default format version for Parquet has been bumped from 2.4 to 2.6 <a href="https://github.com/apache/arrow/issues/35746">GH-35746</a>. In practice, this means that nanosecond timestamps now preserve its resolution instead of being converted to microseconds.</li>
  <li>Support for Python 3.7 is dropped <a href="https://github.com/apache/arrow/issues/34788">GH-34788</a></li>
</ul>

<p>New features:</p>

<ul>
  <li>Conversion to non-nano datetime64 for pandas &gt;= 2.0 is now supported <a href="https://github.com/apache/arrow/issues/33321">GH-33321</a></li>
  <li>Write page index is now supported <a href="https://github.com/apache/arrow/issues/36284">GH-36284</a></li>
  <li>Bindings for reading JSON format in Dataset are added <a href="https://github.com/apache/arrow/issues/34216">GH-34216</a></li>
  <li><code class="language-plaintext highlighter-rouge">keys_sorted</code> property of MapType is now exposed <a href="https://github.com/apache/arrow/issues/35112">GH-35112</a></li>
</ul>

<p>Other improvements:</p>

<ul>
  <li>Common python functionality between <code class="language-plaintext highlighter-rouge">Table</code> and <code class="language-plaintext highlighter-rouge">RecordBatch</code> classes has been consolidated ( <a href="https://github.com/apache/arrow/issues/36129">GH-36129</a>, <a href="https://github.com/apache/arrow/issues/35415">GH-35415</a>, <a href="https://github.com/apache/arrow/issues/35390">GH-35390</a>, <a href="https://github.com/apache/arrow/issues/34979">GH-34979</a>, <a href="https://github.com/apache/arrow/issues/34868">GH-34868</a>, <a href="https://github.com/apache/arrow/issues/31868">GH-31868</a>)</li>
  <li>Some functionality for <code class="language-plaintext highlighter-rouge">FixedShapeTensorType</code> has been improved (<code class="language-plaintext highlighter-rouge">__reduce__</code> <a href="https://github.com/apache/arrow/issues/36038">GH-36038</a>, picklability <a href="https://github.com/apache/arrow/issues/35599">GH-35599</a>)</li>
  <li>Pyarrow scalars can now be accepted in the <code class="language-plaintext highlighter-rouge">array</code> constructor <a href="https://github.com/apache/arrow/issues/21761">GH-21761</a></li>
  <li>DataFrame Interchange Protocol implementation and usage is now documented <a href="https://github.com/apache/arrow/issues/33980">GH-33980</a></li>
  <li>Conversion between Arrow and Pandas for map/pydict now has enhanced support <a href="https://github.com/apache/arrow/issues/34729">GH-34729</a></li>
  <li>Usability of <code class="language-plaintext highlighter-rouge">pc.map_lookup</code> / <code class="language-plaintext highlighter-rouge">MapLookupOptions</code> is improved <a href="https://github.com/apache/arrow/issues/36045">GH-36045</a></li>
  <li><code class="language-plaintext highlighter-rouge">zero_copy_only</code> keyword can now also be accepted in <code class="language-plaintext highlighter-rouge">ChunkedArray.to_numpy()</code> <a href="https://github.com/apache/arrow/issues/34787">GH-34787</a></li>
  <li>Python C++ codebase now has linter support in Archery and the CI <a href="https://github.com/apache/arrow/issues/35485">GH-35485</a></li>
</ul>

<p>Relevant bug fixes:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">__array__</code> numpy conversion for Table and RecordBatch is now corrected so that <code class="language-plaintext highlighter-rouge">np.asarray(pa.Table)</code> doesn’t return a transposed result <a href="https://github.com/apache/arrow/issues/34886">GH-34886</a></li>
  <li><code class="language-plaintext highlighter-rouge">parquet.write_to_dataset</code> doesn’t create empty files for non-observed dictionary (category) values anymore <a href="https://github.com/apache/arrow/issues/23870">GH-23870</a></li>
  <li>Dataset writer now also correctly follows default Parquet version of 2.6 <a href="https://github.com/apache/arrow/issues/36537">GH-36537</a></li>
  <li>Comparing <code class="language-plaintext highlighter-rouge">pyarrow.dataset.Partitioning</code> with other type is now correctly handled <a href="https://github.com/apache/arrow/issues/36659">GH-36659</a></li>
  <li>Pickling of pyarrow.dataset PartitioningFactory objects is now supported <a href="https://github.com/apache/arrow/issues/34884">GH-34884</a></li>
  <li>None schema is now disallowed in parquet writer <a href="https://github.com/apache/arrow/issues/35858">GH-35858</a></li>
  <li><code class="language-plaintext highlighter-rouge">pa.FixedShapeTensorArray.to_numpy_ndarray</code> is not failing on sliced arrays <a href="https://github.com/apache/arrow/issues/35573">GH-35573</a></li>
  <li>Halffloat type is now supported in the conversion from Arrow list to pandas <a href="https://github.com/apache/arrow/issues/36168">GH-36168</a></li>
  <li><code class="language-plaintext highlighter-rouge">__from_arrow__</code> is now also implemented for <code class="language-plaintext highlighter-rouge">Array.to_pandas</code> for pandas extension data types <a href="https://github.com/apache/arrow/issues/36096">GH-36096</a></li>
</ul>

<h2 id="r-notes">R notes</h2>

<p>New features:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">open_dataset()</code> now works with ND-JSON files <a href="https://github.com/apache/arrow/issues/35055">GH-35055</a></li>
  <li>Calling <code class="language-plaintext highlighter-rouge">schema()</code> on multiple Arrow objects now returns the object’s schema <a href="https://github.com/apache/arrow/issues/35543">GH-35543</a></li>
  <li>dplyr <code class="language-plaintext highlighter-rouge">.by</code>/<code class="language-plaintext highlighter-rouge">by</code> argument now supported in arrow implementation of dplyr verbs  <a href="https://github.com/apache/arrow/issues/35667">GH-35667</a></li>
</ul>

<p>Other improvements:</p>
<ul>
  <li>Convenience function <code class="language-plaintext highlighter-rouge">arrow_array()</code> can be used to create Arrow Arrays <a href="https://github.com/apache/arrow/issues/36381">GH-36381</a></li>
  <li>Convenience function <code class="language-plaintext highlighter-rouge">scalar()</code> can be used to create Arrow Scalars  <a href="https://github.com/apache/arrow/issues/36265">GH-36265</a></li>
  <li>Prevent crashed when passing data between arrow and duckdb by always calling <code class="language-plaintext highlighter-rouge">RecordBatchReader::ReadNext()</code> from DuckDB from the main R thread <a href="https://github.com/apache/arrow/issues/36307">GH-36307</a></li>
  <li>Issue a warning for <code class="language-plaintext highlighter-rouge">set_io_thread_count()</code> with <code class="language-plaintext highlighter-rouge">num_threads</code> &lt; 2 <a href="https://github.com/apache/arrow/issues/36304">GH-36304</a></li>
  <li>Ensure missing grouping variables are added to the beginning of the variable list <a href="https://github.com/apache/arrow/issues/36305">GH-36305</a></li>
  <li>CSV File reader options class objects can print the selected values <a href="https://github.com/apache/arrow/issues/35955">GH-35955</a></li>
  <li>Schema metadata can be set as a named character vector <a href="https://github.com/apache/arrow/issues/35954">GH-35954</a></li>
  <li>Ensure that the RStringViewer helper class does not own any Array references <a href="https://github.com/apache/arrow/issues/35812">GH-35812</a></li>
  <li><code class="language-plaintext highlighter-rouge">strptime()</code> in arrow will return a timezone-aware timestamp if <code class="language-plaintext highlighter-rouge">%z</code> is part of the format string <a href="https://github.com/apache/arrow/issues/35671">GH-35671</a></li>
  <li>Column ordering when combining <code class="language-plaintext highlighter-rouge">group_by()</code> and <code class="language-plaintext highlighter-rouge">across()</code> now matches dplyr <a href="https://github.com/apache/arrow/issues/35473">GH-35473</a></li>
  <li>Link to correct version of OpenSSL when using autobrew <a href="https://github.com/apache/arrow/issues/36551">GH-36551</a></li>
  <li>Require cmake 3.16 in bundled build script <a href="https://github.com/apache/arrow/issues/36321">GH-36321</a></li>
</ul>

<p>For more on what’s in the 13.0.0 R package, see the <a href="/docs/r/news/">R changelog</a>.</p>

<h2 id="ruby-and-c-glib-notes">Ruby and C GLib notes</h2>

<h3 id="ruby">Ruby</h3>

<h4 id="bug-fixes-2">Bug fixes</h4>

<ul>
  <li>Fixed GC-related issue against random segfault in hash join <a href="https://github.com/apache/arrow/issues/35819">GH-35819</a></li>
  <li>Fixed segfault in <code class="language-plaintext highlighter-rouge">CallExpression.new</code> <a href="https://github.com/apache/arrow/issues/35915">GH-35915</a></li>
</ul>

<h4 id="improvements">Improvements</h4>

<ul>
  <li>FlightRPC: Added a convenient wrapper for the authentication method <a href="https://github.com/apache/arrow/issues/35435">GH-35435</a></li>
  <li>Added empty table support in <code class="language-plaintext highlighter-rouge">#select_columns</code> <a href="https://github.com/apache/arrow/issues/35681">GH-35681</a></li>
  <li>Added optional hash support in <code class="language-plaintext highlighter-rouge">Expression.try_convert</code> <a href="https://github.com/apache/arrow/issues/35915">GH-35915</a></li>
  <li>Parquet: Added <code class="language-plaintext highlighter-rouge">Parquet::ArrowFileReader#each_row_group</code> <a href="https://github.com/apache/arrow/issues/36008">GH-36008</a></li>
  <li>Added support of the automatic installation of arrow-c-glib on Conda environment <a href="https://github.com/apache/arrow/issues/36287">GH-36287</a></li>
</ul>

<h3 id="c-glib">C GLib</h3>

<h4 id="bug-fixes-3">Bug fixes</h4>

<ul>
  <li>Parquet: Fixed GC-related bug in metadata dependencies <a href="https://github.com/apache/arrow/issues/35266">GH-35266</a></li>
  <li>Fixed potentially GC-related issue against random segfault in hash join <a href="https://github.com/apache/arrow/issues/35819">GH-35819</a></li>
</ul>

<h4 id="improvements-1">Improvements</h4>

<ul>
  <li>FlightRPC: Added support to pass <code class="language-plaintext highlighter-rouge">GAFlightServerCallContext</code> object in several methods of <code class="language-plaintext highlighter-rouge">GAFlightServerCustomAuthHandler</code> <a href="https://github.com/apache/arrow/issues/35377">GH-35377</a></li>
  <li>FlightSQL: Added support for INSERT/UPDATE/DELETE <a href="https://github.com/apache/arrow/issues/36408">GH-36408</a></li>
  <li>Added <code class="language-plaintext highlighter-rouge">GArrowRunEndEncodedDataType</code> <a href="https://github.com/apache/arrow/issues/35417">GH-35417</a></li>
  <li>Added <code class="language-plaintext highlighter-rouge">GArrowRunEndEncodedArray</code> <a href="https://github.com/apache/arrow/issues/35418">GH-35418</a></li>
</ul>

<h2 id="rust-notes">Rust notes</h2>

<p>The Rust projects have moved to separate repositories outside the
main Arrow monorepo. For notes on the latest release of the Rust
implementation, see the latest <a href="https://github.com/apache/arrow-rs/tags">Arrow Rust changelog</a>.</p>


      </main>
    </div>

    <hr/>
<footer class="footer">
  <div class="row">
    <div class="col-md-9">
      <p>Apache Arrow, Arrow, Apache, the Apache feather logo, and the Apache Arrow project logo are either registered trademarks or trademarks of The Apache Software Foundation in the United States and other countries.</p>
      <p>&copy; 2016-2025 The Apache Software Foundation</p>
    </div>
    <div class="col-md-3">
      <a class="d-sm-none d-md-inline pr-2" href="https://www.apache.org/events/current-event.html">
        <img src="https://www.apache.org/events/current-event-234x60.png"/>
      </a>
    </div>
  </div>
</footer>

  </div>
</body>
</html>
