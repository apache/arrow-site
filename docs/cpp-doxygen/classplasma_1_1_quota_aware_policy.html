<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Apache Arrow (C++): plasma::QuotaAwarePolicy Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Apache Arrow (C++)
   </div>
   <div id="projectbrief">A columnar in-memory analytics layer designed to accelerate big data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceplasma.html">plasma</a></li><li class="navelem"><a class="el" href="classplasma_1_1_quota_aware_policy.html">QuotaAwarePolicy</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classplasma_1_1_quota_aware_policy-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">plasma::QuotaAwarePolicy Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Extends the basic eviction policy to implement per-client memory quotas.  
 <a href="classplasma_1_1_quota_aware_policy.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="quota__aware__policy_8h_source.html">plasma/quota_aware_policy.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for plasma::QuotaAwarePolicy:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classplasma_1_1_quota_aware_policy.png" usemap="#plasma::QuotaAwarePolicy_map" alt=""/>
  <map id="plasma::QuotaAwarePolicy_map" name="plasma::QuotaAwarePolicy_map">
<area href="classplasma_1_1_eviction_policy.html" title="The eviction policy." alt="plasma::EvictionPolicy" shape="rect" coords="0,0,163,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a98d817c68823991781461efe53ad9248"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_quota_aware_policy.html#a98d817c68823991781461efe53ad9248">QuotaAwarePolicy</a> (<a class="el" href="structplasma_1_1_plasma_store_info.html">PlasmaStoreInfo</a> *store_info, int64_t max_size)</td></tr>
<tr class="memdesc:a98d817c68823991781461efe53ad9248"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a quota-aware eviction policy.  <a href="classplasma_1_1_quota_aware_policy.html#a98d817c68823991781461efe53ad9248">More...</a><br /></td></tr>
<tr class="separator:a98d817c68823991781461efe53ad9248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bdd1f9498409b2bb943ddc265e23b43"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_quota_aware_policy.html#a2bdd1f9498409b2bb943ddc265e23b43">ObjectCreated</a> (const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;object_id, <a class="el" href="structplasma_1_1_client.html">Client</a> *client, bool is_create) override</td></tr>
<tr class="memdesc:a2bdd1f9498409b2bb943ddc265e23b43"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method will be called whenever an object is first created in order to add it to the LRU cache.  <a href="classplasma_1_1_quota_aware_policy.html#a2bdd1f9498409b2bb943ddc265e23b43">More...</a><br /></td></tr>
<tr class="separator:a2bdd1f9498409b2bb943ddc265e23b43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ab5a2897e21ef0d96859947755e2d8a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_quota_aware_policy.html#a2ab5a2897e21ef0d96859947755e2d8a">SetClientQuota</a> (<a class="el" href="structplasma_1_1_client.html">Client</a> *client, int64_t output_memory_quota) override</td></tr>
<tr class="memdesc:a2ab5a2897e21ef0d96859947755e2d8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set quota for a client.  <a href="classplasma_1_1_quota_aware_policy.html#a2ab5a2897e21ef0d96859947755e2d8a">More...</a><br /></td></tr>
<tr class="separator:a2ab5a2897e21ef0d96859947755e2d8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaba9f168db19d0e00bdfad7f7965677"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_quota_aware_policy.html#afaba9f168db19d0e00bdfad7f7965677">EnforcePerClientQuota</a> (<a class="el" href="structplasma_1_1_client.html">Client</a> *client, int64_t size, bool is_create, std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; *objects_to_evict) override</td></tr>
<tr class="memdesc:afaba9f168db19d0e00bdfad7f7965677"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine what objects need to be evicted to enforce the given client's quota.  <a href="classplasma_1_1_quota_aware_policy.html#afaba9f168db19d0e00bdfad7f7965677">More...</a><br /></td></tr>
<tr class="separator:afaba9f168db19d0e00bdfad7f7965677"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67365071fc86ce8494ec1871a9ab2456"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_quota_aware_policy.html#a67365071fc86ce8494ec1871a9ab2456">ClientDisconnected</a> (<a class="el" href="structplasma_1_1_client.html">Client</a> *client) override</td></tr>
<tr class="memdesc:a67365071fc86ce8494ec1871a9ab2456"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to clean up any resources allocated by this client.  <a href="classplasma_1_1_quota_aware_policy.html#a67365071fc86ce8494ec1871a9ab2456">More...</a><br /></td></tr>
<tr class="separator:a67365071fc86ce8494ec1871a9ab2456"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3680e14ede7ac64700140f7941b69b8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_quota_aware_policy.html#a3680e14ede7ac64700140f7941b69b8a">BeginObjectAccess</a> (const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;object_id) override</td></tr>
<tr class="memdesc:a3680e14ede7ac64700140f7941b69b8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method will be called whenever an unused object in the Plasma store starts to be used.  <a href="classplasma_1_1_quota_aware_policy.html#a3680e14ede7ac64700140f7941b69b8a">More...</a><br /></td></tr>
<tr class="separator:a3680e14ede7ac64700140f7941b69b8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d8f9f74003f31d79ec9e13d269e3da8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_quota_aware_policy.html#a2d8f9f74003f31d79ec9e13d269e3da8">EndObjectAccess</a> (const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;object_id) override</td></tr>
<tr class="memdesc:a2d8f9f74003f31d79ec9e13d269e3da8"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method will be called whenever an object in the Plasma store that was being used is no longer being used.  <a href="classplasma_1_1_quota_aware_policy.html#a2d8f9f74003f31d79ec9e13d269e3da8">More...</a><br /></td></tr>
<tr class="separator:a2d8f9f74003f31d79ec9e13d269e3da8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d285fc3a0790b952ca9242a6a49a3aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_quota_aware_policy.html#a8d285fc3a0790b952ca9242a6a49a3aa">RemoveObject</a> (const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;object_id) override</td></tr>
<tr class="memdesc:a8d285fc3a0790b952ca9242a6a49a3aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method will be called when an object is going to be removed.  <a href="classplasma_1_1_quota_aware_policy.html#a8d285fc3a0790b952ca9242a6a49a3aa">More...</a><br /></td></tr>
<tr class="separator:a8d285fc3a0790b952ca9242a6a49a3aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cb58b8cda6140abca62b9d7f6d45cbe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_quota_aware_policy.html#a4cb58b8cda6140abca62b9d7f6d45cbe">RefreshObjects</a> (const std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; &amp;object_ids) override</td></tr>
<tr class="separator:a4cb58b8cda6140abca62b9d7f6d45cbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb58e0563422446314e303e9460598c4"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_quota_aware_policy.html#afb58e0563422446314e303e9460598c4">DebugString</a> () const override</td></tr>
<tr class="memdesc:afb58e0563422446314e303e9460598c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns debugging information for this eviction policy.  <a href="classplasma_1_1_quota_aware_policy.html#afb58e0563422446314e303e9460598c4">More...</a><br /></td></tr>
<tr class="separator:afb58e0563422446314e303e9460598c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classplasma_1_1_eviction_policy"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classplasma_1_1_eviction_policy')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classplasma_1_1_eviction_policy.html">plasma::EvictionPolicy</a></td></tr>
<tr class="memitem:aecc30b5188da8a25aeb813eeac2549c6 inherit pub_methods_classplasma_1_1_eviction_policy"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#aecc30b5188da8a25aeb813eeac2549c6">EvictionPolicy</a> (<a class="el" href="structplasma_1_1_plasma_store_info.html">PlasmaStoreInfo</a> *store_info, int64_t max_size)</td></tr>
<tr class="memdesc:aecc30b5188da8a25aeb813eeac2549c6 inherit pub_methods_classplasma_1_1_eviction_policy"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct an eviction policy.  <a href="classplasma_1_1_eviction_policy.html#aecc30b5188da8a25aeb813eeac2549c6">More...</a><br /></td></tr>
<tr class="separator:aecc30b5188da8a25aeb813eeac2549c6 inherit pub_methods_classplasma_1_1_eviction_policy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eafeafec7f514890b6fc825f4ce712d inherit pub_methods_classplasma_1_1_eviction_policy"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#a6eafeafec7f514890b6fc825f4ce712d">~EvictionPolicy</a> ()</td></tr>
<tr class="memdesc:a6eafeafec7f514890b6fc825f4ce712d inherit pub_methods_classplasma_1_1_eviction_policy"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy an eviction policy.  <a href="classplasma_1_1_eviction_policy.html#a6eafeafec7f514890b6fc825f4ce712d">More...</a><br /></td></tr>
<tr class="separator:a6eafeafec7f514890b6fc825f4ce712d inherit pub_methods_classplasma_1_1_eviction_policy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27026ab6d95cf2554d5389efbc0912a8 inherit pub_methods_classplasma_1_1_eviction_policy"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#a27026ab6d95cf2554d5389efbc0912a8">RequireSpace</a> (int64_t size, std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; *objects_to_evict)</td></tr>
<tr class="memdesc:a27026ab6d95cf2554d5389efbc0912a8 inherit pub_methods_classplasma_1_1_eviction_policy"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method will be called when the Plasma store needs more space, perhaps to create a new object.  <a href="classplasma_1_1_eviction_policy.html#a27026ab6d95cf2554d5389efbc0912a8">More...</a><br /></td></tr>
<tr class="separator:a27026ab6d95cf2554d5389efbc0912a8 inherit pub_methods_classplasma_1_1_eviction_policy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a019301658b3c0577de8f3b6f4122a850 inherit pub_methods_classplasma_1_1_eviction_policy"><td class="memItemLeft" align="right" valign="top">virtual int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#a019301658b3c0577de8f3b6f4122a850">ChooseObjectsToEvict</a> (int64_t num_bytes_required, std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; *objects_to_evict)</td></tr>
<tr class="memdesc:a019301658b3c0577de8f3b6f4122a850 inherit pub_methods_classplasma_1_1_eviction_policy"><td class="mdescLeft">&#160;</td><td class="mdescRight">Choose some objects to evict from the Plasma store.  <a href="classplasma_1_1_eviction_policy.html#a019301658b3c0577de8f3b6f4122a850">More...</a><br /></td></tr>
<tr class="separator:a019301658b3c0577de8f3b6f4122a850 inherit pub_methods_classplasma_1_1_eviction_policy"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_classplasma_1_1_eviction_policy"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classplasma_1_1_eviction_policy')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classplasma_1_1_eviction_policy.html">plasma::EvictionPolicy</a></td></tr>
<tr class="memitem:a118a523789648de2e552a3f571fe23f5 inherit pro_methods_classplasma_1_1_eviction_policy"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#a118a523789648de2e552a3f571fe23f5">GetObjectSize</a> (const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;object_id) const</td></tr>
<tr class="memdesc:a118a523789648de2e552a3f571fe23f5 inherit pro_methods_classplasma_1_1_eviction_policy"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the size of the object.  <a href="classplasma_1_1_eviction_policy.html#a118a523789648de2e552a3f571fe23f5">More...</a><br /></td></tr>
<tr class="separator:a118a523789648de2e552a3f571fe23f5 inherit pro_methods_classplasma_1_1_eviction_policy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classplasma_1_1_eviction_policy"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classplasma_1_1_eviction_policy')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classplasma_1_1_eviction_policy.html">plasma::EvictionPolicy</a></td></tr>
<tr class="memitem:aae9d0c10bfb3301a99a2ba1d6f85af41 inherit pro_attribs_classplasma_1_1_eviction_policy"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#aae9d0c10bfb3301a99a2ba1d6f85af41">pinned_memory_bytes_</a></td></tr>
<tr class="memdesc:aae9d0c10bfb3301a99a2ba1d6f85af41 inherit pro_attribs_classplasma_1_1_eviction_policy"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of bytes pinned by applications.  <a href="classplasma_1_1_eviction_policy.html#aae9d0c10bfb3301a99a2ba1d6f85af41">More...</a><br /></td></tr>
<tr class="separator:aae9d0c10bfb3301a99a2ba1d6f85af41 inherit pro_attribs_classplasma_1_1_eviction_policy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a080bf6e4bd6ff04d07a682eeae1ca74b inherit pro_attribs_classplasma_1_1_eviction_policy"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structplasma_1_1_plasma_store_info.html">PlasmaStoreInfo</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#a080bf6e4bd6ff04d07a682eeae1ca74b">store_info_</a></td></tr>
<tr class="memdesc:a080bf6e4bd6ff04d07a682eeae1ca74b inherit pro_attribs_classplasma_1_1_eviction_policy"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the plasma store info.  <a href="classplasma_1_1_eviction_policy.html#a080bf6e4bd6ff04d07a682eeae1ca74b">More...</a><br /></td></tr>
<tr class="separator:a080bf6e4bd6ff04d07a682eeae1ca74b inherit pro_attribs_classplasma_1_1_eviction_policy"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab035814f65b85c6692d15a49987aecbe inherit pro_attribs_classplasma_1_1_eviction_policy"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classplasma_1_1_l_r_u_cache.html">LRUCache</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#ab035814f65b85c6692d15a49987aecbe">cache_</a></td></tr>
<tr class="memdesc:ab035814f65b85c6692d15a49987aecbe inherit pro_attribs_classplasma_1_1_eviction_policy"><td class="mdescLeft">&#160;</td><td class="mdescRight">Datastructure for the LRU cache.  <a href="classplasma_1_1_eviction_policy.html#ab035814f65b85c6692d15a49987aecbe">More...</a><br /></td></tr>
<tr class="separator:ab035814f65b85c6692d15a49987aecbe inherit pro_attribs_classplasma_1_1_eviction_policy"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Extends the basic eviction policy to implement per-client memory quotas. </p>
<p>This effectively gives each client its own LRU queue, which caps its memory usage and protects this memory from being evicted by other clients.</p>
<p>The quotas are enforced when objects are first created, by evicting the necessary number of objects from the client's own LRU queue to cap its memory usage. Once that is done, allocation is handled by the normal eviction policy. This may result in the eviction of objects from the global LRU queue, if not enough memory can be allocated even after the evictions from the client's own LRU queue.</p>
<p>Some special cases:</p><ul>
<li>When a pinned object is "evicted" from a per-client queue, it is instead transferred into the global LRU queue.</li>
<li>When a client disconnects, its LRU queue is merged into the head of the global LRU queue. </li>
</ul>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a98d817c68823991781461efe53ad9248"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98d817c68823991781461efe53ad9248">&#9670;&nbsp;</a></span>QuotaAwarePolicy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">plasma::QuotaAwarePolicy::QuotaAwarePolicy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structplasma_1_1_plasma_store_info.html">PlasmaStoreInfo</a> *&#160;</td>
          <td class="paramname"><em>store_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>max_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a quota-aware eviction policy. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">store_info</td><td>Information about the Plasma store that is exposed to the eviction policy. </td></tr>
    <tr><td class="paramname">max_size</td><td>Max size in bytes total of objects to store. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3680e14ede7ac64700140f7941b69b8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3680e14ede7ac64700140f7941b69b8a">&#9670;&nbsp;</a></span>BeginObjectAccess()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void plasma::QuotaAwarePolicy::BeginObjectAccess </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;&#160;</td>
          <td class="paramname"><em>object_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method will be called whenever an unused object in the Plasma store starts to be used. </p>
<p>When this method is called, the eviction policy will assume that the objects chosen to be evicted will in fact be evicted from the Plasma store by the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object_id</td><td>The ID of the object that is now being used. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classplasma_1_1_eviction_policy.html#acb7b3db12819c7f8632ef61a040cea97">plasma::EvictionPolicy</a>.</p>

</div>
</div>
<a id="a67365071fc86ce8494ec1871a9ab2456"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67365071fc86ce8494ec1871a9ab2456">&#9670;&nbsp;</a></span>ClientDisconnected()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void plasma::QuotaAwarePolicy::ClientDisconnected </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structplasma_1_1_client.html">Client</a> *&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called to clean up any resources allocated by this client. </p>
<p>This merges any per-client LRU queue created by SetClientQuota into the global LRU queue.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The pointer to the client. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classplasma_1_1_eviction_policy.html#aa690a34a5cb611b8676e46e6cd8e6b6a">plasma::EvictionPolicy</a>.</p>

</div>
</div>
<a id="afb58e0563422446314e303e9460598c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb58e0563422446314e303e9460598c4">&#9670;&nbsp;</a></span>DebugString()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string plasma::QuotaAwarePolicy::DebugString </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns debugging information for this eviction policy. </p>

<p>Reimplemented from <a class="el" href="classplasma_1_1_eviction_policy.html#aa4e68f089858d59db533091c7a8a6f35">plasma::EvictionPolicy</a>.</p>

</div>
</div>
<a id="a2d8f9f74003f31d79ec9e13d269e3da8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d8f9f74003f31d79ec9e13d269e3da8">&#9670;&nbsp;</a></span>EndObjectAccess()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void plasma::QuotaAwarePolicy::EndObjectAccess </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;&#160;</td>
          <td class="paramname"><em>object_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method will be called whenever an object in the Plasma store that was being used is no longer being used. </p>
<p>When this method is called, the eviction policy will assume that the objects chosen to be evicted will in fact be evicted from the Plasma store by the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object_id</td><td>The ID of the object that is no longer being used. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classplasma_1_1_eviction_policy.html#a176728d8bd0b60646b8db067a9e57be1">plasma::EvictionPolicy</a>.</p>

</div>
</div>
<a id="afaba9f168db19d0e00bdfad7f7965677"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afaba9f168db19d0e00bdfad7f7965677">&#9670;&nbsp;</a></span>EnforcePerClientQuota()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool plasma::QuotaAwarePolicy::EnforcePerClientQuota </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structplasma_1_1_client.html">Client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_create</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; *&#160;</td>
          <td class="paramname"><em>objects_to_evict</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine what objects need to be evicted to enforce the given client's quota. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The pointer to the client creating the object. </td></tr>
    <tr><td class="paramname">size</td><td>The size of the object to create. </td></tr>
    <tr><td class="paramname">is_create</td><td>Whether we are creating a new object (vs reading an object). </td></tr>
    <tr><td class="paramname">objects_to_evict</td><td>The object IDs that were chosen for eviction will be stored into this vector.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if enough space could be freed and false otherwise. </dd></dl>

<p>Reimplemented from <a class="el" href="classplasma_1_1_eviction_policy.html#ac4a4c94e0291a5ba533af63077029e89">plasma::EvictionPolicy</a>.</p>

</div>
</div>
<a id="a2bdd1f9498409b2bb943ddc265e23b43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bdd1f9498409b2bb943ddc265e23b43">&#9670;&nbsp;</a></span>ObjectCreated()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void plasma::QuotaAwarePolicy::ObjectCreated </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;&#160;</td>
          <td class="paramname"><em>object_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structplasma_1_1_client.html">Client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_create</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method will be called whenever an object is first created in order to add it to the LRU cache. </p>
<p>This is done so that the first time, the Plasma store calls begin_object_access, we can remove the object from the LRU cache.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object_id</td><td>The object ID of the object that was created. </td></tr>
    <tr><td class="paramname">client</td><td>The pointer to the client. </td></tr>
    <tr><td class="paramname">is_create</td><td>Whether we are creating a new object (vs reading an object). </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classplasma_1_1_eviction_policy.html#a444bb25633645dd61a4163f54ea6784b">plasma::EvictionPolicy</a>.</p>

</div>
</div>
<a id="a4cb58b8cda6140abca62b9d7f6d45cbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cb58b8cda6140abca62b9d7f6d45cbe">&#9670;&nbsp;</a></span>RefreshObjects()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void plasma::QuotaAwarePolicy::RefreshObjects </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>object_ids</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classplasma_1_1_eviction_policy.html#abc9c15167b5a009763db5515814a313f">plasma::EvictionPolicy</a>.</p>

</div>
</div>
<a id="a8d285fc3a0790b952ca9242a6a49a3aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d285fc3a0790b952ca9242a6a49a3aa">&#9670;&nbsp;</a></span>RemoveObject()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void plasma::QuotaAwarePolicy::RemoveObject </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;&#160;</td>
          <td class="paramname"><em>object_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method will be called when an object is going to be removed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object_id</td><td>The ID of the object that is now being used. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classplasma_1_1_eviction_policy.html#ad0ffe94b655665efdfe1beb908b356a9">plasma::EvictionPolicy</a>.</p>

</div>
</div>
<a id="a2ab5a2897e21ef0d96859947755e2d8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ab5a2897e21ef0d96859947755e2d8a">&#9670;&nbsp;</a></span>SetClientQuota()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool plasma::QuotaAwarePolicy::SetClientQuota </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structplasma_1_1_client.html">Client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>output_memory_quota</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set quota for a client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The pointer to the client. </td></tr>
    <tr><td class="paramname">output_memory_quota</td><td>Set the quota for this client. This can only be called once per client. This is effectively the equivalent of giving the client its own LRU cache instance. The memory for this is taken out of the capacity of the global LRU cache for the client lifetime.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if enough space can be reserved for the given client quota. </dd></dl>

<p>Reimplemented from <a class="el" href="classplasma_1_1_eviction_policy.html#a084fcfb32d14d978bb18d140dcc4c64e">plasma::EvictionPolicy</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/wesm/code/arrow/cpp/src/plasma/<a class="el" href="quota__aware__policy_8h_source.html">quota_aware_policy.h</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107500873-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-107500873-1');
</script>
</body>
</html>
