<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Apache Arrow (C++): plasma::EvictionPolicy Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Apache Arrow (C++)
   </div>
   <div id="projectbrief">A columnar in-memory analytics layer designed to accelerate big data.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceplasma.html">plasma</a></li><li class="navelem"><a class="el" href="classplasma_1_1_eviction_policy.html">EvictionPolicy</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classplasma_1_1_eviction_policy-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">plasma::EvictionPolicy Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The eviction policy.  
 <a href="classplasma_1_1_eviction_policy.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="eviction__policy_8h_source.html">plasma/eviction_policy.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for plasma::EvictionPolicy:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classplasma_1_1_eviction_policy.png" usemap="#plasma::EvictionPolicy_map" alt=""/>
  <map id="plasma::EvictionPolicy_map" name="plasma::EvictionPolicy_map">
<area href="classplasma_1_1_quota_aware_policy.html" title="Extends the basic eviction policy to implement per-client memory quotas." alt="plasma::QuotaAwarePolicy" shape="rect" coords="0,56,163,80"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aecc30b5188da8a25aeb813eeac2549c6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#aecc30b5188da8a25aeb813eeac2549c6">EvictionPolicy</a> (<a class="el" href="structplasma_1_1_plasma_store_info.html">PlasmaStoreInfo</a> *store_info, int64_t max_size)</td></tr>
<tr class="memdesc:aecc30b5188da8a25aeb813eeac2549c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct an eviction policy.  <a href="classplasma_1_1_eviction_policy.html#aecc30b5188da8a25aeb813eeac2549c6">More...</a><br /></td></tr>
<tr class="separator:aecc30b5188da8a25aeb813eeac2549c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eafeafec7f514890b6fc825f4ce712d"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#a6eafeafec7f514890b6fc825f4ce712d">~EvictionPolicy</a> ()</td></tr>
<tr class="memdesc:a6eafeafec7f514890b6fc825f4ce712d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy an eviction policy.  <a href="classplasma_1_1_eviction_policy.html#a6eafeafec7f514890b6fc825f4ce712d">More...</a><br /></td></tr>
<tr class="separator:a6eafeafec7f514890b6fc825f4ce712d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a444bb25633645dd61a4163f54ea6784b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#a444bb25633645dd61a4163f54ea6784b">ObjectCreated</a> (const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;object_id, <a class="el" href="structplasma_1_1_client.html">Client</a> *client, bool is_create)</td></tr>
<tr class="memdesc:a444bb25633645dd61a4163f54ea6784b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method will be called whenever an object is first created in order to add it to the LRU cache.  <a href="classplasma_1_1_eviction_policy.html#a444bb25633645dd61a4163f54ea6784b">More...</a><br /></td></tr>
<tr class="separator:a444bb25633645dd61a4163f54ea6784b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a084fcfb32d14d978bb18d140dcc4c64e"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#a084fcfb32d14d978bb18d140dcc4c64e">SetClientQuota</a> (<a class="el" href="structplasma_1_1_client.html">Client</a> *client, int64_t output_memory_quota)</td></tr>
<tr class="memdesc:a084fcfb32d14d978bb18d140dcc4c64e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set quota for a client.  <a href="classplasma_1_1_eviction_policy.html#a084fcfb32d14d978bb18d140dcc4c64e">More...</a><br /></td></tr>
<tr class="separator:a084fcfb32d14d978bb18d140dcc4c64e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4a4c94e0291a5ba533af63077029e89"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#ac4a4c94e0291a5ba533af63077029e89">EnforcePerClientQuota</a> (<a class="el" href="structplasma_1_1_client.html">Client</a> *client, int64_t size, bool is_create, std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; *objects_to_evict)</td></tr>
<tr class="memdesc:ac4a4c94e0291a5ba533af63077029e89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine what objects need to be evicted to enforce the given client's quota.  <a href="classplasma_1_1_eviction_policy.html#ac4a4c94e0291a5ba533af63077029e89">More...</a><br /></td></tr>
<tr class="separator:ac4a4c94e0291a5ba533af63077029e89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa690a34a5cb611b8676e46e6cd8e6b6a"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#aa690a34a5cb611b8676e46e6cd8e6b6a">ClientDisconnected</a> (<a class="el" href="structplasma_1_1_client.html">Client</a> *client)</td></tr>
<tr class="memdesc:aa690a34a5cb611b8676e46e6cd8e6b6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called to clean up any resources allocated by this client.  <a href="classplasma_1_1_eviction_policy.html#aa690a34a5cb611b8676e46e6cd8e6b6a">More...</a><br /></td></tr>
<tr class="separator:aa690a34a5cb611b8676e46e6cd8e6b6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27026ab6d95cf2554d5389efbc0912a8"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#a27026ab6d95cf2554d5389efbc0912a8">RequireSpace</a> (int64_t size, std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; *objects_to_evict)</td></tr>
<tr class="memdesc:a27026ab6d95cf2554d5389efbc0912a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method will be called when the Plasma store needs more space, perhaps to create a new object.  <a href="classplasma_1_1_eviction_policy.html#a27026ab6d95cf2554d5389efbc0912a8">More...</a><br /></td></tr>
<tr class="separator:a27026ab6d95cf2554d5389efbc0912a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb7b3db12819c7f8632ef61a040cea97"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#acb7b3db12819c7f8632ef61a040cea97">BeginObjectAccess</a> (const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;object_id)</td></tr>
<tr class="memdesc:acb7b3db12819c7f8632ef61a040cea97"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method will be called whenever an unused object in the Plasma store starts to be used.  <a href="classplasma_1_1_eviction_policy.html#acb7b3db12819c7f8632ef61a040cea97">More...</a><br /></td></tr>
<tr class="separator:acb7b3db12819c7f8632ef61a040cea97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a176728d8bd0b60646b8db067a9e57be1"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#a176728d8bd0b60646b8db067a9e57be1">EndObjectAccess</a> (const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;object_id)</td></tr>
<tr class="memdesc:a176728d8bd0b60646b8db067a9e57be1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method will be called whenever an object in the Plasma store that was being used is no longer being used.  <a href="classplasma_1_1_eviction_policy.html#a176728d8bd0b60646b8db067a9e57be1">More...</a><br /></td></tr>
<tr class="separator:a176728d8bd0b60646b8db067a9e57be1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a019301658b3c0577de8f3b6f4122a850"><td class="memItemLeft" align="right" valign="top">virtual int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#a019301658b3c0577de8f3b6f4122a850">ChooseObjectsToEvict</a> (int64_t num_bytes_required, std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; *objects_to_evict)</td></tr>
<tr class="memdesc:a019301658b3c0577de8f3b6f4122a850"><td class="mdescLeft">&#160;</td><td class="mdescRight">Choose some objects to evict from the Plasma store.  <a href="classplasma_1_1_eviction_policy.html#a019301658b3c0577de8f3b6f4122a850">More...</a><br /></td></tr>
<tr class="separator:a019301658b3c0577de8f3b6f4122a850"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0ffe94b655665efdfe1beb908b356a9"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#ad0ffe94b655665efdfe1beb908b356a9">RemoveObject</a> (const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;object_id)</td></tr>
<tr class="memdesc:ad0ffe94b655665efdfe1beb908b356a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method will be called when an object is going to be removed.  <a href="classplasma_1_1_eviction_policy.html#ad0ffe94b655665efdfe1beb908b356a9">More...</a><br /></td></tr>
<tr class="separator:ad0ffe94b655665efdfe1beb908b356a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc9c15167b5a009763db5515814a313f"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#abc9c15167b5a009763db5515814a313f">RefreshObjects</a> (const std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; &amp;object_ids)</td></tr>
<tr class="separator:abc9c15167b5a009763db5515814a313f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4e68f089858d59db533091c7a8a6f35"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#aa4e68f089858d59db533091c7a8a6f35">DebugString</a> () const</td></tr>
<tr class="memdesc:aa4e68f089858d59db533091c7a8a6f35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns debugging information for this eviction policy.  <a href="classplasma_1_1_eviction_policy.html#aa4e68f089858d59db533091c7a8a6f35">More...</a><br /></td></tr>
<tr class="separator:aa4e68f089858d59db533091c7a8a6f35"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a118a523789648de2e552a3f571fe23f5"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#a118a523789648de2e552a3f571fe23f5">GetObjectSize</a> (const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;object_id) const</td></tr>
<tr class="memdesc:a118a523789648de2e552a3f571fe23f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the size of the object.  <a href="classplasma_1_1_eviction_policy.html#a118a523789648de2e552a3f571fe23f5">More...</a><br /></td></tr>
<tr class="separator:a118a523789648de2e552a3f571fe23f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:aae9d0c10bfb3301a99a2ba1d6f85af41"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#aae9d0c10bfb3301a99a2ba1d6f85af41">pinned_memory_bytes_</a></td></tr>
<tr class="memdesc:aae9d0c10bfb3301a99a2ba1d6f85af41"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of bytes pinned by applications.  <a href="classplasma_1_1_eviction_policy.html#aae9d0c10bfb3301a99a2ba1d6f85af41">More...</a><br /></td></tr>
<tr class="separator:aae9d0c10bfb3301a99a2ba1d6f85af41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a080bf6e4bd6ff04d07a682eeae1ca74b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structplasma_1_1_plasma_store_info.html">PlasmaStoreInfo</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#a080bf6e4bd6ff04d07a682eeae1ca74b">store_info_</a></td></tr>
<tr class="memdesc:a080bf6e4bd6ff04d07a682eeae1ca74b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the plasma store info.  <a href="classplasma_1_1_eviction_policy.html#a080bf6e4bd6ff04d07a682eeae1ca74b">More...</a><br /></td></tr>
<tr class="separator:a080bf6e4bd6ff04d07a682eeae1ca74b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab035814f65b85c6692d15a49987aecbe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classplasma_1_1_l_r_u_cache.html">LRUCache</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplasma_1_1_eviction_policy.html#ab035814f65b85c6692d15a49987aecbe">cache_</a></td></tr>
<tr class="memdesc:ab035814f65b85c6692d15a49987aecbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Datastructure for the LRU cache.  <a href="classplasma_1_1_eviction_policy.html#ab035814f65b85c6692d15a49987aecbe">More...</a><br /></td></tr>
<tr class="separator:ab035814f65b85c6692d15a49987aecbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The eviction policy. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aecc30b5188da8a25aeb813eeac2549c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecc30b5188da8a25aeb813eeac2549c6">&#9670;&nbsp;</a></span>EvictionPolicy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">plasma::EvictionPolicy::EvictionPolicy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structplasma_1_1_plasma_store_info.html">PlasmaStoreInfo</a> *&#160;</td>
          <td class="paramname"><em>store_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>max_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct an eviction policy. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">store_info</td><td>Information about the Plasma store that is exposed to the eviction policy. </td></tr>
    <tr><td class="paramname">max_size</td><td>Max size in bytes total of objects to store. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6eafeafec7f514890b6fc825f4ce712d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6eafeafec7f514890b6fc825f4ce712d">&#9670;&nbsp;</a></span>~EvictionPolicy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual plasma::EvictionPolicy::~EvictionPolicy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroy an eviction policy. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="acb7b3db12819c7f8632ef61a040cea97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb7b3db12819c7f8632ef61a040cea97">&#9670;&nbsp;</a></span>BeginObjectAccess()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void plasma::EvictionPolicy::BeginObjectAccess </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;&#160;</td>
          <td class="paramname"><em>object_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method will be called whenever an unused object in the Plasma store starts to be used. </p>
<p>When this method is called, the eviction policy will assume that the objects chosen to be evicted will in fact be evicted from the Plasma store by the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object_id</td><td>The ID of the object that is now being used. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classplasma_1_1_quota_aware_policy.html#a3680e14ede7ac64700140f7941b69b8a">plasma::QuotaAwarePolicy</a>.</p>

</div>
</div>
<a id="a019301658b3c0577de8f3b6f4122a850"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a019301658b3c0577de8f3b6f4122a850">&#9670;&nbsp;</a></span>ChooseObjectsToEvict()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int64_t plasma::EvictionPolicy::ChooseObjectsToEvict </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>num_bytes_required</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; *&#160;</td>
          <td class="paramname"><em>objects_to_evict</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Choose some objects to evict from the Plasma store. </p>
<p>When this method is called, the eviction policy will assume that the objects chosen to be evicted will in fact be evicted from the Plasma store by the caller.</p>
<dl class="section note"><dt>Note</dt><dd>This method is not part of the API. It is exposed in the header file only for testing.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num_bytes_required</td><td>The number of bytes of space to try to free up. </td></tr>
    <tr><td class="paramname">objects_to_evict</td><td>The object IDs that were chosen for eviction will be stored into this vector. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The total number of bytes of space chosen to be evicted. </dd></dl>

</div>
</div>
<a id="aa690a34a5cb611b8676e46e6cd8e6b6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa690a34a5cb611b8676e46e6cd8e6b6a">&#9670;&nbsp;</a></span>ClientDisconnected()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void plasma::EvictionPolicy::ClientDisconnected </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structplasma_1_1_client.html">Client</a> *&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called to clean up any resources allocated by this client. </p>
<p>This merges any per-client LRU queue created by SetClientQuota into the global LRU queue.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The pointer to the client. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classplasma_1_1_quota_aware_policy.html#a67365071fc86ce8494ec1871a9ab2456">plasma::QuotaAwarePolicy</a>.</p>

</div>
</div>
<a id="aa4e68f089858d59db533091c7a8a6f35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4e68f089858d59db533091c7a8a6f35">&#9670;&nbsp;</a></span>DebugString()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::string plasma::EvictionPolicy::DebugString </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns debugging information for this eviction policy. </p>

<p>Reimplemented in <a class="el" href="classplasma_1_1_quota_aware_policy.html#afb58e0563422446314e303e9460598c4">plasma::QuotaAwarePolicy</a>.</p>

</div>
</div>
<a id="a176728d8bd0b60646b8db067a9e57be1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a176728d8bd0b60646b8db067a9e57be1">&#9670;&nbsp;</a></span>EndObjectAccess()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void plasma::EvictionPolicy::EndObjectAccess </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;&#160;</td>
          <td class="paramname"><em>object_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method will be called whenever an object in the Plasma store that was being used is no longer being used. </p>
<p>When this method is called, the eviction policy will assume that the objects chosen to be evicted will in fact be evicted from the Plasma store by the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object_id</td><td>The ID of the object that is no longer being used. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classplasma_1_1_quota_aware_policy.html#a2d8f9f74003f31d79ec9e13d269e3da8">plasma::QuotaAwarePolicy</a>.</p>

</div>
</div>
<a id="ac4a4c94e0291a5ba533af63077029e89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4a4c94e0291a5ba533af63077029e89">&#9670;&nbsp;</a></span>EnforcePerClientQuota()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool plasma::EvictionPolicy::EnforcePerClientQuota </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structplasma_1_1_client.html">Client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_create</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; *&#160;</td>
          <td class="paramname"><em>objects_to_evict</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine what objects need to be evicted to enforce the given client's quota. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The pointer to the client creating the object. </td></tr>
    <tr><td class="paramname">size</td><td>The size of the object to create. </td></tr>
    <tr><td class="paramname">is_create</td><td>Whether we are creating a new object (vs reading an object). </td></tr>
    <tr><td class="paramname">objects_to_evict</td><td>The object IDs that were chosen for eviction will be stored into this vector.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if enough space could be freed and false otherwise. </dd></dl>

<p>Reimplemented in <a class="el" href="classplasma_1_1_quota_aware_policy.html#afaba9f168db19d0e00bdfad7f7965677">plasma::QuotaAwarePolicy</a>.</p>

</div>
</div>
<a id="a118a523789648de2e552a3f571fe23f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a118a523789648de2e552a3f571fe23f5">&#9670;&nbsp;</a></span>GetObjectSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t plasma::EvictionPolicy::GetObjectSize </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;&#160;</td>
          <td class="paramname"><em>object_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the size of the object. </p>

</div>
</div>
<a id="a444bb25633645dd61a4163f54ea6784b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a444bb25633645dd61a4163f54ea6784b">&#9670;&nbsp;</a></span>ObjectCreated()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void plasma::EvictionPolicy::ObjectCreated </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;&#160;</td>
          <td class="paramname"><em>object_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structplasma_1_1_client.html">Client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_create</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method will be called whenever an object is first created in order to add it to the LRU cache. </p>
<p>This is done so that the first time, the Plasma store calls begin_object_access, we can remove the object from the LRU cache.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object_id</td><td>The object ID of the object that was created. </td></tr>
    <tr><td class="paramname">client</td><td>The pointer to the client. </td></tr>
    <tr><td class="paramname">is_create</td><td>Whether we are creating a new object (vs reading an object). </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classplasma_1_1_quota_aware_policy.html#a2bdd1f9498409b2bb943ddc265e23b43">plasma::QuotaAwarePolicy</a>.</p>

</div>
</div>
<a id="abc9c15167b5a009763db5515814a313f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc9c15167b5a009763db5515814a313f">&#9670;&nbsp;</a></span>RefreshObjects()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void plasma::EvictionPolicy::RefreshObjects </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>object_ids</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented in <a class="el" href="classplasma_1_1_quota_aware_policy.html#a4cb58b8cda6140abca62b9d7f6d45cbe">plasma::QuotaAwarePolicy</a>.</p>

</div>
</div>
<a id="ad0ffe94b655665efdfe1beb908b356a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0ffe94b655665efdfe1beb908b356a9">&#9670;&nbsp;</a></span>RemoveObject()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void plasma::EvictionPolicy::RemoveObject </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &amp;&#160;</td>
          <td class="paramname"><em>object_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method will be called when an object is going to be removed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">object_id</td><td>The ID of the object that is now being used. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classplasma_1_1_quota_aware_policy.html#a8d285fc3a0790b952ca9242a6a49a3aa">plasma::QuotaAwarePolicy</a>.</p>

</div>
</div>
<a id="a27026ab6d95cf2554d5389efbc0912a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27026ab6d95cf2554d5389efbc0912a8">&#9670;&nbsp;</a></span>RequireSpace()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool plasma::EvictionPolicy::RequireSpace </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="namespaceplasma.html#adf1aa2f87f6f11e1993628f574e31e75">ObjectID</a> &gt; *&#160;</td>
          <td class="paramname"><em>objects_to_evict</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method will be called when the Plasma store needs more space, perhaps to create a new object. </p>
<p>When this method is called, the eviction policy will assume that the objects chosen to be evicted will in fact be evicted from the Plasma store by the caller.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>The size in bytes of the new object, including both data and metadata. </td></tr>
    <tr><td class="paramname">objects_to_evict</td><td>The object IDs that were chosen for eviction will be stored into this vector. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if enough space can be freed and false otherwise. </dd></dl>

</div>
</div>
<a id="a084fcfb32d14d978bb18d140dcc4c64e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a084fcfb32d14d978bb18d140dcc4c64e">&#9670;&nbsp;</a></span>SetClientQuota()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool plasma::EvictionPolicy::SetClientQuota </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structplasma_1_1_client.html">Client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>output_memory_quota</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set quota for a client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>The pointer to the client. </td></tr>
    <tr><td class="paramname">output_memory_quota</td><td>Set the quota for this client. This can only be called once per client. This is effectively the equivalent of giving the client its own LRU cache instance. The memory for this is taken out of the capacity of the global LRU cache for the client lifetime.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if enough space can be reserved for the given client quota. </dd></dl>

<p>Reimplemented in <a class="el" href="classplasma_1_1_quota_aware_policy.html#a2ab5a2897e21ef0d96859947755e2d8a">plasma::QuotaAwarePolicy</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ab035814f65b85c6692d15a49987aecbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab035814f65b85c6692d15a49987aecbe">&#9670;&nbsp;</a></span>cache_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classplasma_1_1_l_r_u_cache.html">LRUCache</a> plasma::EvictionPolicy::cache_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Datastructure for the LRU cache. </p>

</div>
</div>
<a id="aae9d0c10bfb3301a99a2ba1d6f85af41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae9d0c10bfb3301a99a2ba1d6f85af41">&#9670;&nbsp;</a></span>pinned_memory_bytes_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t plasma::EvictionPolicy::pinned_memory_bytes_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of bytes pinned by applications. </p>

</div>
</div>
<a id="a080bf6e4bd6ff04d07a682eeae1ca74b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a080bf6e4bd6ff04d07a682eeae1ca74b">&#9670;&nbsp;</a></span>store_info_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structplasma_1_1_plasma_store_info.html">PlasmaStoreInfo</a>* plasma::EvictionPolicy::store_info_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to the plasma store info. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/wesm/code/arrow/cpp/src/plasma/<a class="el" href="eviction__policy_8h_source.html">eviction_policy.h</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107500873-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-107500873-1');
</script>
</body>
</html>
