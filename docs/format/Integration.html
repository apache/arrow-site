


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Integration Testing &mdash; Apache Arrow v0.15.0</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Other Data Structures" href="Other.html" />
    <link rel="prev" title="Arrow Flight RPC" href="Flight.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Apache Arrow
          

          
          </a>

          
            
            
              <div class="version">
                0.15.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="Guidelines.html">Implementation Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="Layout.html">Physical Memory Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="IPC.html">IPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="Metadata.html">Format Metadata</a></li>
</ul>
<p class="caption"><span class="caption-text">Arrow Specifications and Protocols</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Versioning.html">Format Versioning and Stability</a></li>
<li class="toctree-l1"><a class="reference internal" href="Columnar.html">Arrow Columnar Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="Flight.html">Arrow Flight RPC</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Integration Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="Other.html">Other Data Structures</a></li>
</ul>
<p class="caption"><span class="caption-text">Arrow Libraries</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cpp/index.html">C++ Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">Python bindings</a></li>
</ul>
<p class="caption"><span class="caption-text">Development and Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developers/contributing.html">Contribution Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/cpp.html">C++ Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/python.html">Python Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/integration.html">Integration Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/crossbow.html">Packaging and Testing with Crossbow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/benchmarks.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers/documentation.html">Building the Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Apache Arrow</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Integration Testing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/format/Integration.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="integration-testing">
<span id="format-integration-testing"></span><h1>Integration Testing<a class="headerlink" href="#integration-testing" title="Permalink to this headline">Â¶</a></h1>
<p>A JSON representation of Arrow columnar data is provided for
cross-language integration testing purposes.</p>
<p>The high level structure of a JSON integration test files is as follows</p>
<p><strong>Data file</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="o">/*</span><span class="n">Schema</span><span class="o">*/</span><span class="p">,</span>
  <span class="s2">&quot;batches&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="o">/*</span><span class="n">RecordBatch</span><span class="o">*/</span> <span class="p">],</span>
  <span class="s2">&quot;dictionaries&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="o">/*</span><span class="n">DictionaryBatch</span><span class="o">*/</span> <span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Schema</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;fields&quot;</span> <span class="p">:</span> <span class="p">[</span>
    <span class="o">/*</span> <span class="n">Field</span> <span class="o">*/</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Field</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;name_of_the_field&quot;</span><span class="p">,</span>
  <span class="s2">&quot;nullable&quot;</span> <span class="p">:</span> <span class="n">false</span><span class="p">,</span>
  <span class="s2">&quot;type&quot;</span> <span class="p">:</span> <span class="o">/*</span> <span class="n">Type</span> <span class="o">*/</span><span class="p">,</span>
  <span class="s2">&quot;children&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="o">/*</span> <span class="n">Field</span> <span class="o">*/</span> <span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>RecordBatch</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="o">/*</span><span class="n">length</span> <span class="n">of</span> <span class="n">batch</span><span class="o">*/</span><span class="p">,</span>
  <span class="s2">&quot;columns&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="o">/*</span> <span class="n">FieldData</span> <span class="o">*/</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>FieldData</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;field_name&quot;</span><span class="p">,</span>
  <span class="s2">&quot;count&quot;</span> <span class="s2">&quot;field_length&quot;</span><span class="p">,</span>
  <span class="s2">&quot;BUFFER_TYPE&quot;</span><span class="p">:</span> <span class="o">/*</span> <span class="n">BufferData</span> <span class="o">*/</span>
  <span class="o">...</span>
  <span class="s2">&quot;BUFFER_TYPE&quot;</span><span class="p">:</span> <span class="o">/*</span> <span class="n">BufferData</span> <span class="o">*/</span>
  <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="o">/*</span> <span class="n">FieldData</span> <span class="o">*/</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here <code class="docutils literal notranslate"><span class="pre">BUFFER_TYPE</span></code> is one of <code class="docutils literal notranslate"><span class="pre">VALIDITY</span></code>, <code class="docutils literal notranslate"><span class="pre">OFFSET</span></code> (for
variable-length types), <code class="docutils literal notranslate"><span class="pre">TYPE</span></code> (for unions), or <code class="docutils literal notranslate"><span class="pre">DATA</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">BufferData</span></code> is encoded based on the type of buffer:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">VALIDITY</span></code>: a JSON array of 1 (valid) and 0 (null)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">OFFSET</span></code>: a JSON array of integers for 32-bit offsets or
string-formatted integers for 64-bit offsets</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TYPE</span></code>: a JSON array of integers</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DATA</span></code>: a JSON array of encoded values</p></li>
</ul>
<p>The value encoding for <code class="docutils literal notranslate"><span class="pre">DATA</span></code> is different depending on the logical
type:</p>
<ul class="simple">
<li><p>For boolean type: an array of 1 (true) and 0 (false)</p></li>
<li><p>For integer-based types (including timestamps): an array of integers</p></li>
<li><p>For 64-bit integers: an array of integers formatted as JSON strings
to avoid loss of precision</p></li>
<li><p>For floating point types: as is</p></li>
<li><p>For Binary types, a hex-string is produced to encode a variable- or
fixed-size binary value</p></li>
</ul>
<p><strong>Type</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;null|struct|list|largelist|fixedsizelist|union|int|floatingpoint|utf8|largeutf8|binary|largebinary|fixedsizebinary|bool|decimal|date|time|timestamp|interval|duration|map&quot;</span>
  <span class="o">//</span> <span class="n">fields</span> <span class="k">as</span> <span class="n">defined</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">Flatbuffer</span> <span class="n">depending</span> <span class="n">on</span> <span class="n">the</span> <span class="nb">type</span> <span class="n">name</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Union:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;union&quot;</span><span class="p">,</span>
  <span class="s2">&quot;mode&quot;</span> <span class="p">:</span> <span class="s2">&quot;Sparse|Dense&quot;</span><span class="p">,</span>
  <span class="s2">&quot;typeIds&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="o">/*</span> <span class="n">integer</span> <span class="o">*/</span> <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">typeIds</span></code> field in the Union are the codes used to denote each type, which
may be different from the index of the child array. This is so that the union
type ids do not have to be enumerated from 0.</p>
<p>Int:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span>
  <span class="s2">&quot;bitWidth&quot;</span> <span class="p">:</span> <span class="o">/*</span> <span class="n">integer</span> <span class="o">*/</span><span class="p">,</span>
  <span class="s2">&quot;isSigned&quot;</span> <span class="p">:</span> <span class="o">/*</span> <span class="n">boolean</span> <span class="o">*/</span>
<span class="p">}</span>
</pre></div>
</div>
<p>FloatingPoint:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;floatingpoint&quot;</span><span class="p">,</span>
  <span class="s2">&quot;precision&quot;</span> <span class="p">:</span> <span class="s2">&quot;HALF|SINGLE|DOUBLE&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>FixedSizeBinary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;fixedsizebinary&quot;</span><span class="p">,</span>
  <span class="s2">&quot;byteWidth&quot;</span> <span class="p">:</span> <span class="o">/*</span> <span class="n">byte</span> <span class="n">width</span> <span class="o">*/</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Decimal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;decimal&quot;</span><span class="p">,</span>
  <span class="s2">&quot;precision&quot;</span> <span class="p">:</span> <span class="o">/*</span> <span class="n">integer</span> <span class="o">*/</span><span class="p">,</span>
  <span class="s2">&quot;scale&quot;</span> <span class="p">:</span> <span class="o">/*</span> <span class="n">integer</span> <span class="o">*/</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Timestamp:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">,</span>
  <span class="s2">&quot;unit&quot;</span> <span class="p">:</span> <span class="s2">&quot;$TIME_UNIT&quot;</span>
  <span class="s2">&quot;timezone&quot;</span><span class="p">:</span> <span class="s2">&quot;$timezone&quot;</span> <span class="p">[</span><span class="n">optional</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">$TIME_UNIT</span></code> is one of <code class="docutils literal notranslate"><span class="pre">&quot;SECOND|MILLISECOND|MICROSECOND|NANOSECOND&quot;</span></code></p>
<p>Duration:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;duration&quot;</span><span class="p">,</span>
  <span class="s2">&quot;unit&quot;</span> <span class="p">:</span> <span class="s2">&quot;$TIME_UNIT&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Date:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;date&quot;</span><span class="p">,</span>
  <span class="s2">&quot;unit&quot;</span> <span class="p">:</span> <span class="s2">&quot;DAY|MILLISECOND&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Time:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;time&quot;</span><span class="p">,</span>
  <span class="s2">&quot;unit&quot;</span> <span class="p">:</span> <span class="s2">&quot;$TIME_UNIT&quot;</span><span class="p">,</span>
  <span class="s2">&quot;bitWidth&quot;</span><span class="p">:</span> <span class="o">/*</span> <span class="n">integer</span><span class="p">:</span> <span class="mi">32</span> <span class="ow">or</span> <span class="mi">64</span> <span class="o">*/</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Interval:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;interval&quot;</span><span class="p">,</span>
  <span class="s2">&quot;unit&quot;</span> <span class="p">:</span> <span class="s2">&quot;YEAR_MONTH&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Other.html" class="btn btn-neutral float-right" title="Other Data Structures" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Flight.html" class="btn btn-neutral float-left" title="Arrow Flight RPC" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2019 Apache Software Foundation

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107500873-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-107500873-1');
</script>


</body>
</html>