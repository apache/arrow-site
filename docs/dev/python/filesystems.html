

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Filesystem Interface &#8212; Apache Arrow v21.0.0.dev188</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.4cbf315f70debaebd550c87a6162cf0f.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/theme_overrides.css" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'python/filesystems';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = '/docs/_static/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'dev/';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            true;
        </script>
    <link rel="canonical" href="https://arrow.apache.org/docs/python/filesystems.html" />
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="21.0.0.dev188" />

  <!-- Matomo -->
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    /* We explicitly disable cookie tracking to avoid privacy issues */
    _paq.push(['disableCookies']);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="https://analytics.apache.org/";
      _paq.push(['setTrackerUrl', u+'matomo.php']);
      _paq.push(['setSiteId', '20']);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
  </script>
  <!-- End Matomo Code -->

  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/arrow.png" class="logo__image only-light" alt="Apache Arrow v21.0.0.dev188 - Home"/>
    <img src="../_static/arrow-dark.png" class="logo__image only-dark pst-js-only" alt="Apache Arrow v21.0.0.dev188 - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../format/index.html">
    Specifications
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../developers/index.html">
    Development
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../implementations.html">
    Implementations
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item"><div class="kapa-ai-bot">
    <script
        async
        src="https://widget.kapa.ai/kapa-widget.bundle.js"
        data-website-id="9db461d5-ac77-4b3f-a5c5-75efa78339d2"
        data-project-name="Apache Arrow"
        data-project-color="#000000"
        data-project-logo="https://arrow.apache.org/img/arrow-logo_chevrons_white-txt_black-bg.png"
        data-modal-disclaimer="This is a custom LLM with access to all [Arrow documentation](https://arrow.apache.org/docs/). Please include the language you are using in your question, e.g., Python, C++, Java, R, etc."
        data-consent-required="true" 
        data-consent-screen-disclaimer="By clicking &quot;I agree, let's chat&quot;, you consent to the use of the AI assistant in accordance with kapa.ai's [Privacy Policy](https://www.kapa.ai/content/privacy-policy). This service uses reCAPTCHA, which requires your consent to Google's [Privacy Policy](https://policies.google.com/privacy) and [Terms of Service](https://policies.google.com/terms). By proceeding, you explicitly agree to both kapa.ai's and Google's privacy policies."
    ></script>
   
</div>

</div>
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/apache/arrow" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.linkedin.com/company/apache-arrow/" title="LinkedIn" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-linkedin fa-lg" aria-hidden="true"></i>
            <span class="sr-only">LinkedIn</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://bsky.app/profile/arrow.apache.org" title="BlueSky" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-bluesky fa-lg" aria-hidden="true"></i>
            <span class="sr-only">BlueSky</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../format/index.html">
    Specifications
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../developers/index.html">
    Development
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../implementations.html">
    Implementations
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><div class="kapa-ai-bot">
    <script
        async
        src="https://widget.kapa.ai/kapa-widget.bundle.js"
        data-website-id="9db461d5-ac77-4b3f-a5c5-75efa78339d2"
        data-project-name="Apache Arrow"
        data-project-color="#000000"
        data-project-logo="https://arrow.apache.org/img/arrow-logo_chevrons_white-txt_black-bg.png"
        data-modal-disclaimer="This is a custom LLM with access to all [Arrow documentation](https://arrow.apache.org/docs/). Please include the language you are using in your question, e.g., Python, C++, Java, R, etc."
        data-consent-required="true" 
        data-consent-screen-disclaimer="By clicking &quot;I agree, let's chat&quot;, you consent to the use of the AI assistant in accordance with kapa.ai's [Privacy Policy](https://www.kapa.ai/content/privacy-policy). This service uses reCAPTCHA, which requires your consent to Google's [Privacy Policy](https://policies.google.com/privacy) and [Terms of Service](https://policies.google.com/terms). By proceeding, you explicitly agree to both kapa.ai's and Google's privacy policies."
    ></script>
   
</div>

</div>
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/apache/arrow" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.linkedin.com/company/apache-arrow/" title="LinkedIn" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-linkedin fa-lg" aria-hidden="true"></i>
            <span class="sr-only">LinkedIn</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://bsky.app/profile/arrow.apache.org" title="BlueSky" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-bluesky fa-lg" aria-hidden="true"></i>
            <span class="sr-only">BlueSky</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"></div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Filesystem Interface</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="filesystem-interface">
<span id="filesystem"></span><h1>Filesystem Interface<a class="headerlink" href="#filesystem-interface" title="Permalink to this heading">#</a></h1>
<p>PyArrow comes with an abstract filesystem interface, as well as concrete
implementations for various storage types.</p>
<p>The filesystem interface provides input and output streams as well as
directory operations.  A simplified view of the underlying data
storage is exposed.  Data paths are represented as <em>abstract paths</em>, which
are <code class="docutils literal notranslate"><span class="pre">/</span></code>-separated, even on Windows, and shouldn’t include special path
components such as <code class="docutils literal notranslate"><span class="pre">.</span></code> and <code class="docutils literal notranslate"><span class="pre">..</span></code>.  Symbolic links, if supported by the
underlying storage, are automatically dereferenced.  Only basic
<a class="reference internal" href="generated/pyarrow.fs.FileInfo.html#pyarrow.fs.FileInfo" title="pyarrow.fs.FileInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">metadata</span></code></a> about file entries, such as the file size
and modification time, is made available.</p>
<p>The core interface is represented by the base class <a class="reference internal" href="generated/pyarrow.fs.FileSystem.html#pyarrow.fs.FileSystem" title="pyarrow.fs.FileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileSystem</span></code></a>.</p>
<p>Pyarrow implements natively the following filesystem subclasses:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#filesystem-localfs"><span class="std std-ref">Local FS</span></a> (<a class="reference internal" href="generated/pyarrow.fs.LocalFileSystem.html#pyarrow.fs.LocalFileSystem" title="pyarrow.fs.LocalFileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">LocalFileSystem</span></code></a>)</p></li>
<li><p><a class="reference internal" href="#filesystem-s3"><span class="std std-ref">S3</span></a> (<a class="reference internal" href="generated/pyarrow.fs.S3FileSystem.html#pyarrow.fs.S3FileSystem" title="pyarrow.fs.S3FileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">S3FileSystem</span></code></a>)</p></li>
<li><p><a class="reference internal" href="#filesystem-gcs"><span class="std std-ref">Google Cloud Storage File System</span></a> (<a class="reference internal" href="generated/pyarrow.fs.GcsFileSystem.html#pyarrow.fs.GcsFileSystem" title="pyarrow.fs.GcsFileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">GcsFileSystem</span></code></a>)</p></li>
<li><p><a class="reference internal" href="#filesystem-hdfs"><span class="std std-ref">Hadoop Distributed File System (HDFS)</span></a> (<a class="reference internal" href="generated/pyarrow.fs.HadoopFileSystem.html#pyarrow.fs.HadoopFileSystem" title="pyarrow.fs.HadoopFileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">HadoopFileSystem</span></code></a>)</p></li>
<li><p><a class="reference internal" href="#filesystem-azurefs"><span class="std std-ref">Azure Storage File System</span></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">AzureFileSystem</span></code>)</p></li>
</ul>
<p>It is also possible to use your own fsspec-compliant filesystem with pyarrow functionalities as described in the section <a class="reference internal" href="#filesystem-fsspec"><span class="std std-ref">Using fsspec-compatible filesystems with Arrow</span></a>.</p>
<section id="usage">
<span id="filesystem-usage"></span><h2>Usage<a class="headerlink" href="#usage" title="Permalink to this heading">#</a></h2>
<section id="instantiating-a-filesystem">
<h3>Instantiating a filesystem<a class="headerlink" href="#instantiating-a-filesystem" title="Permalink to this heading">#</a></h3>
<p>A FileSystem object can be created with one of the constructors (and check the
respective constructor for its options):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="kn">import</span> <span class="n">fs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">local</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">LocalFileSystem</span><span class="p">()</span>
</pre></div>
</div>
<p>or alternatively inferred from a URI:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s3</span><span class="p">,</span> <span class="n">path</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">FileSystem</span><span class="o">.</span><span class="n">from_uri</span><span class="p">(</span><span class="s2">&quot;s3://my-bucket&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3</span>
<span class="go">&lt;pyarrow._s3fs.S3FileSystem at 0x7f6760cbf4f0&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span>
<span class="go">&#39;my-bucket&#39;</span>
</pre></div>
</div>
</section>
<section id="reading-and-writing-files">
<h3>Reading and writing files<a class="headerlink" href="#reading-and-writing-files" title="Permalink to this heading">#</a></h3>
<p>Several of the IO-related functions in PyArrow accept either a URI (and infer
the filesystem) or an explicit <code class="docutils literal notranslate"><span class="pre">filesystem</span></code> argument to specify the filesystem
to read or write from. For example, the <a class="reference internal" href="generated/pyarrow.parquet.read_table.html#pyarrow.parquet.read_table" title="pyarrow.parquet.read_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyarrow.parquet.read_table()</span></code></a>
function can be used in the following ways:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow.parquet</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pq</span>

<span class="c1"># using a URI -&gt; filesystem is inferred</span>
<span class="n">pq</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s2">&quot;s3://my-bucket/data.parquet&quot;</span><span class="p">)</span>
<span class="c1"># using a path and filesystem</span>
<span class="n">s3</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">S3FileSystem</span><span class="p">(</span><span class="o">..</span><span class="p">)</span>
<span class="n">pq</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s2">&quot;my-bucket/data.parquet&quot;</span><span class="p">,</span> <span class="n">filesystem</span><span class="o">=</span><span class="n">s3</span><span class="p">)</span>
</pre></div>
</div>
<p>The filesystem interface further allows to open files for reading (input) or
writing (output) directly, which can be combined with functions that work with
file-like objects. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pa</span>

<span class="n">local</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">LocalFileSystem</span><span class="p">()</span>

<span class="k">with</span> <span class="n">local</span><span class="o">.</span><span class="n">open_output_stream</span><span class="p">(</span><span class="s2">&quot;test.arrow&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
   <span class="k">with</span> <span class="n">pa</span><span class="o">.</span><span class="n">RecordBatchFileWriter</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">schema</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
      <span class="n">writer</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="listing-files">
<h3>Listing files<a class="headerlink" href="#listing-files" title="Permalink to this heading">#</a></h3>
<p>Inspecting the directories and files on a filesystem can be done with the
<a class="reference internal" href="generated/pyarrow.fs.FileSystem.html#pyarrow.fs.FileSystem.get_file_info" title="pyarrow.fs.FileSystem.get_file_info"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FileSystem.get_file_info()</span></code></a> method. To list the contents of a directory,
use the <a class="reference internal" href="generated/pyarrow.fs.FileSelector.html#pyarrow.fs.FileSelector" title="pyarrow.fs.FileSelector"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileSelector</span></code></a> object to specify the selection:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">local</span><span class="o">.</span><span class="n">get_file_info</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">FileSelector</span><span class="p">(</span><span class="s2">&quot;dataset/&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="go">[&lt;FileInfo for &#39;dataset/part=B&#39;: type=FileType.Directory&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;dataset/part=B/data0.parquet&#39;: type=FileType.File, size=1564&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;dataset/part=A&#39;: type=FileType.Directory&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;dataset/part=A/data0.parquet&#39;: type=FileType.File, size=1564&gt;]</span>
</pre></div>
</div>
<p>This returns a list of <a class="reference internal" href="generated/pyarrow.fs.FileInfo.html#pyarrow.fs.FileInfo" title="pyarrow.fs.FileInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileInfo</span></code></a> objects, containing information about
the type (file or directory), the size, the date last modified, etc.</p>
<p>You can also get this information for a single explicit path (or list of
paths):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">local</span><span class="o">.</span><span class="n">get_file_info</span><span class="p">(</span><span class="s1">&#39;test.arrow&#39;</span><span class="p">)</span>
<span class="go">&lt;FileInfo for &#39;test.arrow&#39;: type=FileType.File, size=3250&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">local</span><span class="o">.</span><span class="n">get_file_info</span><span class="p">(</span><span class="s1">&#39;non_existent&#39;</span><span class="p">)</span>
<span class="go">&lt;FileInfo for &#39;non_existent&#39;: type=FileType.NotFound&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="local-fs">
<span id="filesystem-localfs"></span><h2>Local FS<a class="headerlink" href="#local-fs" title="Permalink to this heading">#</a></h2>
<p>The <a class="reference internal" href="generated/pyarrow.fs.LocalFileSystem.html#pyarrow.fs.LocalFileSystem" title="pyarrow.fs.LocalFileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">LocalFileSystem</span></code></a> allows you to access files on the local machine.</p>
<p>Example how to write to disk and read it back:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="kn">import</span> <span class="n">fs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">local</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">LocalFileSystem</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">local</span><span class="o">.</span><span class="n">open_output_stream</span><span class="p">(</span><span class="s1">&#39;/tmp/pyarrowtest.dat&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
<span class="go">        stream.write(b&#39;data&#39;)</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">local</span><span class="o">.</span><span class="n">open_input_stream</span><span class="p">(</span><span class="s1">&#39;/tmp/pyarrowtest.dat&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
<span class="go">        print(stream.readall())</span>
<span class="go">b&#39;data&#39;</span>
</pre></div>
</div>
</section>
<section id="s3">
<span id="filesystem-s3"></span><h2>S3<a class="headerlink" href="#s3" title="Permalink to this heading">#</a></h2>
<p>PyArrow implements natively a S3 filesystem for S3 compatible storage.</p>
<p>The <a class="reference internal" href="generated/pyarrow.fs.S3FileSystem.html#pyarrow.fs.S3FileSystem" title="pyarrow.fs.S3FileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">S3FileSystem</span></code></a> constructor has several options to configure the S3
connection (e.g. credentials, the region, an endpoint override, etc). In
addition, the constructor will also inspect configured S3 credentials as
supported by AWS (such as the <code class="docutils literal notranslate"><span class="pre">AWS_ACCESS_KEY_ID</span></code> and
<code class="docutils literal notranslate"><span class="pre">AWS_SECRET_ACCESS_KEY</span></code> environment variables, AWS configuration files,
and EC2 Instance Metadata Service for EC2 nodes).</p>
<p>Example how you can read contents from a S3 bucket:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="kn">import</span> <span class="n">fs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">S3FileSystem</span><span class="p">(</span><span class="n">region</span><span class="o">=</span><span class="s1">&#39;eu-west-3&#39;</span><span class="p">)</span>

<span class="go"># List all contents in a bucket, recursively</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3</span><span class="o">.</span><span class="n">get_file_info</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">FileSelector</span><span class="p">(</span><span class="s1">&#39;my-test-bucket&#39;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="go">[&lt;FileInfo for &#39;my-test-bucket/File1&#39;: type=FileType.File, size=10&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;my-test-bucket/File5&#39;: type=FileType.File, size=10&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;my-test-bucket/Dir1&#39;: type=FileType.Directory&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;my-test-bucket/Dir2&#39;: type=FileType.Directory&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;my-test-bucket/EmptyDir&#39;: type=FileType.Directory&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;my-test-bucket/Dir1/File2&#39;: type=FileType.File, size=11&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;my-test-bucket/Dir1/Subdir&#39;: type=FileType.Directory&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;my-test-bucket/Dir2/Subdir&#39;: type=FileType.Directory&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;my-test-bucket/Dir2/Subdir/File3&#39;: type=FileType.File, size=10&gt;]</span>

<span class="go"># Open a file for reading and download its contents</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">s3</span><span class="o">.</span><span class="n">open_input_stream</span><span class="p">(</span><span class="s1">&#39;my-test-bucket/Dir1/File2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">readall</span><span class="p">()</span>
<span class="go">b&#39;some data&#39;</span>
</pre></div>
</div>
<p>Note that it is important to configure <a class="reference internal" href="generated/pyarrow.fs.S3FileSystem.html#pyarrow.fs.S3FileSystem" title="pyarrow.fs.S3FileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">S3FileSystem</span></code></a> with the correct
region for the bucket being used. If <code class="docutils literal notranslate"><span class="pre">region</span></code> is not set, the AWS SDK will
choose a value, defaulting to ‘us-east-1’ if the SDK version is &lt;1.8.
Otherwise it will try to use a variety of heuristics (environment variables,
configuration profile, EC2 metadata server) to resolve the region.</p>
<p>It is also possible to resolve the region from the bucket name for
<a class="reference internal" href="generated/pyarrow.fs.S3FileSystem.html#pyarrow.fs.S3FileSystem" title="pyarrow.fs.S3FileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">S3FileSystem</span></code></a> by using <a class="reference internal" href="generated/pyarrow.fs.resolve_s3_region.html#pyarrow.fs.resolve_s3_region" title="pyarrow.fs.resolve_s3_region"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyarrow.fs.resolve_s3_region()</span></code></a> or
<a class="reference internal" href="generated/pyarrow.fs.S3FileSystem.html#pyarrow.fs.S3FileSystem.from_uri" title="pyarrow.fs.S3FileSystem.from_uri"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyarrow.fs.S3FileSystem.from_uri()</span></code></a>.</p>
<p>Here are a couple examples in code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="kn">import</span> <span class="n">fs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">S3FileSystem</span><span class="p">(</span><span class="n">region</span><span class="o">=</span><span class="n">fs</span><span class="o">.</span><span class="n">resolve_s3_region</span><span class="p">(</span><span class="s1">&#39;my-test-bucket&#39;</span><span class="p">))</span>

<span class="go"># Or via URI:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3</span><span class="p">,</span> <span class="n">path</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">S3FileSystem</span><span class="o">.</span><span class="n">from_uri</span><span class="p">(</span><span class="s1">&#39;s3://[access_key:secret_key@]bucket/path]&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See the <a class="reference external" href="https://docs.aws.amazon.com/sdk-for-cpp/v1/developer-guide/credentials.html">AWS docs</a>
for the different ways to configure the AWS credentials.</p>
<p><a class="reference internal" href="generated/pyarrow.fs.resolve_s3_region.html#pyarrow.fs.resolve_s3_region" title="pyarrow.fs.resolve_s3_region"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyarrow.fs.resolve_s3_region()</span></code></a> for resolving region from a bucket name.</p>
</div>
<section id="troubleshooting">
<h3>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this heading">#</a></h3>
<p>When using <a class="reference internal" href="generated/pyarrow.fs.S3FileSystem.html#pyarrow.fs.S3FileSystem" title="pyarrow.fs.S3FileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">S3FileSystem</span></code></a>, output is only produced for fatal errors or
when printing return values. For troubleshooting, the log level can be set using
the environment variable <code class="docutils literal notranslate"><span class="pre">ARROW_S3_LOG_LEVEL</span></code>. The log level must be set prior
to running any code that interacts with S3. Possible values include <code class="docutils literal notranslate"><span class="pre">FATAL</span></code> (the
default), <code class="docutils literal notranslate"><span class="pre">ERROR</span></code>, <code class="docutils literal notranslate"><span class="pre">WARN</span></code>, <code class="docutils literal notranslate"><span class="pre">INFO</span></code>, <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> (recommended), <code class="docutils literal notranslate"><span class="pre">TRACE</span></code>, and <code class="docutils literal notranslate"><span class="pre">OFF</span></code>.</p>
</section>
</section>
<section id="google-cloud-storage-file-system">
<span id="filesystem-gcs"></span><h2>Google Cloud Storage File System<a class="headerlink" href="#google-cloud-storage-file-system" title="Permalink to this heading">#</a></h2>
<p>PyArrow implements natively a Google Cloud Storage (GCS) backed file system
for GCS storage.</p>
<p>If not running on Google Cloud Platform (GCP), this generally requires the
environment variable <code class="docutils literal notranslate"><span class="pre">GOOGLE_APPLICATION_CREDENTIALS</span></code> to point to a
JSON file containing credentials. Alternatively, use the <code class="docutils literal notranslate"><span class="pre">gcloud</span></code> CLI to
generate a credentials file in the default location:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcloud</span> <span class="n">auth</span> <span class="n">application</span><span class="o">-</span><span class="n">default</span> <span class="n">login</span>
</pre></div>
</div>
<p>To connect to a public bucket without using any credentials, you must pass
<code class="docutils literal notranslate"><span class="pre">anonymous=True</span></code> to <a class="reference internal" href="generated/pyarrow.fs.GcsFileSystem.html#pyarrow.fs.GcsFileSystem" title="pyarrow.fs.GcsFileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">GcsFileSystem</span></code></a>. Otherwise, the filesystem
will report <code class="docutils literal notranslate"><span class="pre">Couldn't</span> <span class="pre">resolve</span> <span class="pre">host</span> <span class="pre">name</span></code> since there are different host
names for authenticated and public access.</p>
<p>Example showing how you can read contents from a GCS bucket:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">timedelta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="kn">import</span> <span class="n">fs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gcs</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">GcsFileSystem</span><span class="p">(</span><span class="n">anonymous</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">retry_time_limit</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">15</span><span class="p">))</span>

<span class="go"># List all contents in a bucket, recursively</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uri</span> <span class="o">=</span> <span class="s2">&quot;gcp-public-data-landsat/LC08/01/001/003/&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_list</span> <span class="o">=</span> <span class="n">gcs</span><span class="o">.</span><span class="n">get_file_info</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">FileSelector</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>

<span class="go"># Open a file for reading and download its contents</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">gcs</span><span class="o">.</span><span class="n">open_input_stream</span><span class="p">(</span><span class="n">file_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">64</span><span class="p">)</span>
<span class="go">b&#39;GROUP = FILE_HEADER\n  LANDSAT_SCENE_ID = &quot;LC80010032013082LGN03&quot;\n  S&#39;</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The <a class="reference internal" href="generated/pyarrow.fs.GcsFileSystem.html#pyarrow.fs.GcsFileSystem" title="pyarrow.fs.GcsFileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">GcsFileSystem</span></code></a> constructor by default uses the
process described in <a class="reference external" href="https://google.aip.dev/auth/4110">GCS docs</a>
to resolve credentials.</p>
</div>
</section>
<section id="hadoop-distributed-file-system-hdfs">
<span id="filesystem-hdfs"></span><h2>Hadoop Distributed File System (HDFS)<a class="headerlink" href="#hadoop-distributed-file-system-hdfs" title="Permalink to this heading">#</a></h2>
<p>PyArrow comes with bindings to the Hadoop File System (based on C++ bindings
using <code class="docutils literal notranslate"><span class="pre">libhdfs</span></code>, a JNI-based interface to the Java Hadoop client). You connect
using the <a class="reference internal" href="generated/pyarrow.fs.HadoopFileSystem.html#pyarrow.fs.HadoopFileSystem" title="pyarrow.fs.HadoopFileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">HadoopFileSystem</span></code></a> constructor:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="kn">import</span> <span class="n">fs</span>
<span class="n">hdfs</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">HadoopFileSystem</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">port</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">kerb_ticket</span><span class="o">=</span><span class="n">ticket_cache_path</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">libhdfs</span></code> library is loaded <strong>at runtime</strong> (rather than at link / library
load time, since the library may not be in your LD_LIBRARY_PATH), and relies on
some environment variables.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">HADOOP_HOME</span></code>: the root of your installed Hadoop distribution. Often has
<code class="docutils literal notranslate"><span class="pre">lib/native/libhdfs.so</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JAVA_HOME</span></code>: the location of your Java SDK installation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ARROW_LIBHDFS_DIR</span></code> (optional): explicit location of <code class="docutils literal notranslate"><span class="pre">libhdfs.so</span></code> if it is
installed somewhere other than <code class="docutils literal notranslate"><span class="pre">$HADOOP_HOME/lib/native</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CLASSPATH</span></code>: must contain the Hadoop jars. You can set these using:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">CLASSPATH</span><span class="o">=</span><span class="sb">`</span><span class="nv">$HADOOP_HOME</span>/bin/hadoop<span class="w"> </span>classpath<span class="w"> </span>--glob<span class="sb">`</span>
<span class="c1"># or on Windows</span>
%HADOOP_HOME%/bin/hadoop<span class="w"> </span>classpath<span class="w"> </span>--glob<span class="w"> </span>&gt;<span class="w"> </span>%CLASSPATH%
</pre></div>
</div>
<p>In contrast to the legacy HDFS filesystem with <code class="docutils literal notranslate"><span class="pre">pa.hdfs.connect</span></code>, setting
<code class="docutils literal notranslate"><span class="pre">CLASSPATH</span></code> is not optional (pyarrow will not attempt to infer it).</p>
</li>
</ul>
</section>
<section id="azure-storage-file-system">
<span id="filesystem-azurefs"></span><h2>Azure Storage File System<a class="headerlink" href="#azure-storage-file-system" title="Permalink to this heading">#</a></h2>
<p>PyArrow implements natively an Azure filesystem for Azure Blob Storage with or
without heirarchical namespace enabled.</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">AzureFileSystem</span></code> constructor has several options to configure the
Azure Blob Storage connection (e.g. account name, account key, SAS token, etc.).</p>
<p>If neither <code class="docutils literal notranslate"><span class="pre">account_key</span></code> or <code class="docutils literal notranslate"><span class="pre">sas_token</span></code> is specified a <a class="reference external" href="https://github.com/Azure/azure-sdk-for-cpp/blob/main/sdk/identity/azure-identity/README.md#defaultazurecredential">DefaultAzureCredential</a>
is used for authentication. This means it will try several types of authentication
and go with the first one that works. If any authentication parameters are provided when
initialising the FileSystem, they will be used instead of the default credential.</p>
<p>Example showing how you can read contents from an Azure Blob Storage account:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="kn">import</span> <span class="n">fs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">azure_fs</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">AzureFileSystem</span><span class="p">(</span><span class="n">account_name</span><span class="o">=</span><span class="s1">&#39;myaccount&#39;</span><span class="p">)</span>

<span class="go"># List all contents in a container, recursively</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">azure_fs</span><span class="o">.</span><span class="n">get_file_info</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">FileSelector</span><span class="p">(</span><span class="s1">&#39;my-container&#39;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="go">[&lt;FileInfo for &#39;my-container/File1&#39;: type=FileType.File, size=10&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;my-container/File2&#39;: type=FileType.File, size=20&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;my-container/Dir1&#39;: type=FileType.Directory&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;my-container/Dir1/File3&#39;: type=FileType.File, size=30&gt;]</span>

<span class="go"># Open a file for reading and download its contents</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">azure_fs</span><span class="o">.</span><span class="n">open_input_stream</span><span class="p">(</span><span class="s1">&#39;my-container/File1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">readall</span><span class="p">()</span>
<span class="go">b&#39;some data&#39;</span>
</pre></div>
</div>
<p>For more details on the parameters and usage, refer to the <code class="xref py py-class docutils literal notranslate"><span class="pre">AzureFileSystem</span></code> class documentation.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See the <a class="reference external" href="https://github.com/Azure/azure-sdk-for-cpp">Azure SDK for C++ documentation</a>
for more information on authentication and configuration options.</p>
</div>
</section>
<section id="using-fsspec-compatible-filesystems-with-arrow">
<span id="filesystem-fsspec"></span><h2>Using fsspec-compatible filesystems with Arrow<a class="headerlink" href="#using-fsspec-compatible-filesystems-with-arrow" title="Permalink to this heading">#</a></h2>
<p>The filesystems mentioned above are natively supported by Arrow C++ / PyArrow.
The Python ecosystem, however, also has several filesystem packages. Those
packages following the <a class="reference external" href="https://filesystem-spec.readthedocs.io/en/latest/">fsspec</a> interface can be used in PyArrow as well.</p>
<p>Functions accepting a filesystem object will also accept an fsspec subclass.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># creating an fsspec-based filesystem object for Google Cloud Storage</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">gcsfs</span>
<span class="n">fs</span> <span class="o">=</span> <span class="n">gcsfs</span><span class="o">.</span><span class="n">GCSFileSystem</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="s1">&#39;my-google-project&#39;</span><span class="p">)</span>

<span class="c1"># using this to read a partitioned dataset</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow.dataset</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ds</span>
<span class="n">ds</span><span class="o">.</span><span class="n">dataset</span><span class="p">(</span><span class="s2">&quot;data/&quot;</span><span class="p">,</span> <span class="n">filesystem</span><span class="o">=</span><span class="n">fs</span><span class="p">)</span>
</pre></div>
</div>
<p>Similarly for Azure Blob Storage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">adlfs</span>
<span class="c1"># ... load your credentials and configure the filesystem</span>
<span class="n">fs</span> <span class="o">=</span> <span class="n">adlfs</span><span class="o">.</span><span class="n">AzureBlobFileSystem</span><span class="p">(</span><span class="n">account_name</span><span class="o">=</span><span class="n">account_name</span><span class="p">,</span> <span class="n">account_key</span><span class="o">=</span><span class="n">account_key</span><span class="p">)</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pyarrow.dataset</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">ds</span>
<span class="n">ds</span><span class="o">.</span><span class="n">dataset</span><span class="p">(</span><span class="s2">&quot;mycontainer/data/&quot;</span><span class="p">,</span> <span class="n">filesystem</span><span class="o">=</span><span class="n">fs</span><span class="p">)</span>
</pre></div>
</div>
<p>Under the hood, the fsspec filesystem object is wrapped into a python-based
PyArrow filesystem (<a class="reference internal" href="generated/pyarrow.fs.PyFileSystem.html#pyarrow.fs.PyFileSystem" title="pyarrow.fs.PyFileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyFileSystem</span></code></a>) using <a class="reference internal" href="generated/pyarrow.fs.FSSpecHandler.html#pyarrow.fs.FSSpecHandler" title="pyarrow.fs.FSSpecHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">FSSpecHandler</span></code></a>.
You can also manually do this to get an object with the PyArrow FileSystem
interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyarrow.fs</span><span class="w"> </span><span class="kn">import</span> <span class="n">PyFileSystem</span><span class="p">,</span> <span class="n">FSSpecHandler</span>
<span class="n">pa_fs</span> <span class="o">=</span> <span class="n">PyFileSystem</span><span class="p">(</span><span class="n">FSSpecHandler</span><span class="p">(</span><span class="n">fs</span><span class="p">))</span>
</pre></div>
</div>
<p>Then all the functionalities of <a class="reference internal" href="generated/pyarrow.fs.FileSystem.html#pyarrow.fs.FileSystem" title="pyarrow.fs.FileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileSystem</span></code></a> are accessible:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># write data</span>
<span class="k">with</span> <span class="n">pa_fs</span><span class="o">.</span><span class="n">open_output_stream</span><span class="p">(</span><span class="s1">&#39;mycontainer/pyarrowtest.dat&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
   <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>

<span class="c1"># read data</span>
<span class="k">with</span> <span class="n">pa_fs</span><span class="o">.</span><span class="n">open_input_stream</span><span class="p">(</span><span class="s1">&#39;mycontainer/pyarrowtest.dat&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">readall</span><span class="p">())</span>
<span class="c1">#b&#39;data&#39;</span>

<span class="c1"># read a partitioned dataset</span>
<span class="n">ds</span><span class="o">.</span><span class="n">dataset</span><span class="p">(</span><span class="s2">&quot;data/&quot;</span><span class="p">,</span> <span class="n">filesystem</span><span class="o">=</span><span class="n">pa_fs</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="using-arrow-filesystems-with-fsspec">
<h2>Using Arrow filesystems with fsspec<a class="headerlink" href="#using-arrow-filesystems-with-fsspec" title="Permalink to this heading">#</a></h2>
<p>The Arrow FileSystem interface has a limited, developer-oriented API surface.
This is sufficient for basic interactions and for using this with
Arrow’s IO functionality. On the other hand, the <a class="reference external" href="https://filesystem-spec.readthedocs.io/en/latest/">fsspec</a> interface provides
a very large API with many helper methods. If you want to use those, or if you
need to interact with a package that expects fsspec-compatible filesystem
objects, you can wrap an Arrow FileSystem object with fsspec.</p>
<p>Starting with <code class="docutils literal notranslate"><span class="pre">fsspec</span></code> version 2021.09, the <code class="docutils literal notranslate"><span class="pre">ArrowFSWrapper</span></code> can be used
for this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pyarrow</span><span class="w"> </span><span class="kn">import</span> <span class="n">fs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">local</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">LocalFileSystem</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">fsspec.implementations.arrow</span><span class="w"> </span><span class="kn">import</span> <span class="n">ArrowFSWrapper</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">local_fsspec</span> <span class="o">=</span> <span class="n">ArrowFSWrapper</span><span class="p">(</span><span class="n">local</span><span class="p">)</span>
</pre></div>
</div>
<p>The resulting object now has an fsspec-compatible interface, while being backed
by the Arrow FileSystem under the hood.
Example usage to create a directory and file, and list the content:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">local_fsspec</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="s2">&quot;./test&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">local_fsspec</span><span class="o">.</span><span class="n">touch</span><span class="p">(</span><span class="s2">&quot;./test/file.txt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">local_fsspec</span><span class="o">.</span><span class="n">ls</span><span class="p">(</span><span class="s2">&quot;./test/&quot;</span><span class="p">)</span>
<span class="go">[&#39;./test/file.txt&#39;]</span>
</pre></div>
</div>
<p>For more information, see the <a class="reference external" href="https://filesystem-spec.readthedocs.io/en/latest/">fsspec</a> documentation.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#usage">Usage</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#instantiating-a-filesystem">Instantiating a filesystem</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-and-writing-files">Reading and writing files</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#listing-files">Listing files</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#local-fs">Local FS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#s3">S3</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#google-cloud-storage-file-system">Google Cloud Storage File System</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hadoop-distributed-file-system-hdfs">Hadoop Distributed File System (HDFS)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#azure-storage-file-system">Azure Storage File System</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-fsspec-compatible-filesystems-with-arrow">Using fsspec-compatible filesystems with Arrow</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-arrow-filesystems-with-fsspec">Using Arrow filesystems with fsspec</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/apache/arrow/edit/main/docs/source/python/filesystems.rst">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2016-2025 Apache Software Foundation.
Apache Arrow, Arrow, Apache, the Apache feather logo, and the Apache Arrow project logo are either registered trademarks or trademarks of The Apache Software Foundation in the United States and other countries.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 6.2.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>