


<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Arrow IPC &mdash; Apache Arrow v3.0.0</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="canonical" href="https://arrow.apache.org/docs/cpp/api/ipc.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="File Formats" href="formats.html" />
    <link rel="prev" title="Input / output" href="io.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Apache Arrow
          

          
          </a>

          
            
            
              <div class="version">
                3.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Specifications and Protocols</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../format/Versioning.html">Format Versioning and Stability</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../format/Columnar.html">Arrow Columnar Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../format/Flight.html">Arrow Flight RPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../format/Integration.html">Integration Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../format/CDataInterface.html">The Arrow C data interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../format/CStreamInterface.html">The Arrow C stream interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../format/Other.html">Other Data Structures</a></li>
</ul>
<p class="caption"><span class="caption-text">Libraries</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../status.html">Implementation Status</a></li>
<li class="toctree-l1"><a class="reference external" href="https://arrow.apache.org/docs/c_glib/">C/GLib</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">C++</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">User Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/index.html">Examples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../api.html">API Reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="support.html">Programming Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="memory.html">Memory (management)</a></li>
<li class="toctree-l3"><a class="reference internal" href="datatype.html">Data Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="array.html">Arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="scalar.html">Scalars</a></li>
<li class="toctree-l3"><a class="reference internal" href="builder.html">Array Builders</a></li>
<li class="toctree-l3"><a class="reference internal" href="table.html">Two-dimensional Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="c_abi.html">C Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="compute.html">Compute Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="tensor.html">Tensors</a></li>
<li class="toctree-l3"><a class="reference internal" href="utilities.html">Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="io.html">Input / output</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Arrow IPC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ipc-options">IPC options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reading-ipc-streams-and-files">Reading IPC streams and files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#writing-ipc-streams-and-files">Writing IPC streams and files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="formats.html">File Formats</a></li>
<li class="toctree-l3"><a class="reference internal" href="cuda.html">CUDA support</a></li>
<li class="toctree-l3"><a class="reference internal" href="flight.html">Arrow Flight RPC</a></li>
<li class="toctree-l3"><a class="reference internal" href="filesystem.html">Filesystems</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/apache/arrow/blob/master/csharp/README.md">C#</a></li>
<li class="toctree-l1"><a class="reference external" href="https://godoc.org/github.com/apache/arrow/go/arrow">Go</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../java/index.html">Java</a></li>
<li class="toctree-l1"><a class="reference external" href="https://arrow.apache.org/docs/js/">JavaScript</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/apache/arrow/blob/master/julia/Arrow/README.md">Julia</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/apache/arrow/blob/master/matlab/README.md">MATLAB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/index.html">Python</a></li>
<li class="toctree-l1"><a class="reference external" href="https://arrow.apache.org/docs/r/">R</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/apache/arrow/blob/master/ruby/README.md">Ruby</a></li>
<li class="toctree-l1"><a class="reference external" href="https://docs.rs/crate/arrow/">Rust</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../developers/contributing.html">Contributing to Apache Arrow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/cpp/index.html">C++ Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/python.html">Python Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/archery.html">Daily Development using Archery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/crossbow.html">Packaging and Testing with Crossbow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/docker.html">Running Docker Builds</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/benchmarks.html">Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/documentation.html">Building the Documentation</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Apache Arrow</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">C++ Implementation</a> &raquo;</li>
        
          <li><a href="../api.html">API Reference</a> &raquo;</li>
        
      <li>Arrow IPC</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/cpp/api/ipc.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="arrow-ipc">
<h1>Arrow IPC<a class="headerlink" href="#arrow-ipc" title="Permalink to this headline">Â¶</a></h1>
<div class="sidebar">
<p class="sidebar-title">Contents</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#ipc-options" id="id3">IPC options</a></p></li>
<li><p><a class="reference internal" href="#reading-ipc-streams-and-files" id="id4">Reading IPC streams and files</a></p>
<ul>
<li><p><a class="reference internal" href="#blocking-api" id="id5">Blocking API</a></p></li>
<li><p><a class="reference internal" href="#event-driven-api" id="id6">Event-driven API</a></p></li>
<li><p><a class="reference internal" href="#statistics" id="id7">Statistics</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#writing-ipc-streams-and-files" id="id8">Writing IPC streams and files</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id9">Blocking API</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id10">Statistics</a></p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="ipc-options">
<h2><a class="toc-backref" href="#id3">IPC options</a><a class="headerlink" href="#ipc-options" title="Permalink to this headline">Â¶</a></h2>
<dl class="cpp struct">
<dt id="_CPPv4N5arrow3ipc14IpcReadOptionsE">
<span id="_CPPv3N5arrow3ipc14IpcReadOptionsE"></span><span id="_CPPv2N5arrow3ipc14IpcReadOptionsE"></span><span id="arrow::ipc::IpcReadOptions"></span><span class="target" id="structarrow_1_1ipc_1_1_ipc_read_options"></span><em class="property">struct </em><code class="sig-prename descclassname">arrow::ipc<code class="sig-prename descclassname">::</code></code><code class="sig-name descname">IpcReadOptions</code><a class="headerlink" href="#_CPPv4N5arrow3ipc14IpcReadOptionsE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Options for reading Arrow IPC messages. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc14IpcReadOptions19max_recursion_depthE">
<span id="_CPPv3N5arrow3ipc14IpcReadOptions19max_recursion_depthE"></span><span id="_CPPv2N5arrow3ipc14IpcReadOptions19max_recursion_depthE"></span><span id="arrow::ipc::IpcReadOptions::max_recursion_depth__i"></span><span class="target" id="structarrow_1_1ipc_1_1_ipc_read_options_1afc396ded5cd90ffc0cb8192f92e5f643"></span>int <code class="sig-name descname">max_recursion_depth</code> = kMaxNestingDepth<a class="headerlink" href="#_CPPv4N5arrow3ipc14IpcReadOptions19max_recursion_depthE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>The maximum permitted schema nesting depth. </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc14IpcReadOptions11memory_poolE">
<span id="_CPPv3N5arrow3ipc14IpcReadOptions11memory_poolE"></span><span id="_CPPv2N5arrow3ipc14IpcReadOptions11memory_poolE"></span><span id="arrow::ipc::IpcReadOptions::memory_pool__MemoryPoolP"></span><span class="target" id="structarrow_1_1ipc_1_1_ipc_read_options_1a911b72da5d76473d602889db59a01491"></span><a class="reference internal" href="memory.html#_CPPv4N5arrow10MemoryPoolE" title="arrow::MemoryPool">MemoryPool</a> *<code class="sig-name descname">memory_pool</code> = <a class="reference internal" href="memory.html#_CPPv4N5arrow19default_memory_poolEv" title="arrow::default_memory_pool">default_memory_pool</a>()<a class="headerlink" href="#_CPPv4N5arrow3ipc14IpcReadOptions11memory_poolE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>The memory pool to use for allocations made during IPC reading. </p>
<p>While Arrow IPC is predominantly zero-copy, it may have to allocate memory in some cases (for example if compression is enabled). </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc14IpcReadOptions15included_fieldsE">
<span id="_CPPv3N5arrow3ipc14IpcReadOptions15included_fieldsE"></span><span id="_CPPv2N5arrow3ipc14IpcReadOptions15included_fieldsE"></span><span id="arrow::ipc::IpcReadOptions::included_fields__std::vector:i:"></span><span class="target" id="structarrow_1_1ipc_1_1_ipc_read_options_1a22e99e85e4650c023285a189d299b3a9"></span>std::vector&lt;int&gt; <code class="sig-name descname">included_fields</code><a class="headerlink" href="#_CPPv4N5arrow3ipc14IpcReadOptions15included_fieldsE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>EXPERIMENTAL: Top-level schema fields to include when deserializing <a class="reference internal" href="table.html#classarrow_1_1_record_batch"><span class="std std-ref">RecordBatch</span></a>. </p>
<p>If empty (the default), return all deserialized fields. If non-empty, the values are the indices of fields in the top-level schema. </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc14IpcReadOptions11use_threadsE">
<span id="_CPPv3N5arrow3ipc14IpcReadOptions11use_threadsE"></span><span id="_CPPv2N5arrow3ipc14IpcReadOptions11use_threadsE"></span><span id="arrow::ipc::IpcReadOptions::use_threads__b"></span><span class="target" id="structarrow_1_1ipc_1_1_ipc_read_options_1aa8ce498216e5b49121acd65d34112267"></span>bool <code class="sig-name descname">use_threads</code> = true<a class="headerlink" href="#_CPPv4N5arrow3ipc14IpcReadOptions11use_threadsE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Use global CPU thread pool to parallelize any computational tasks like decompression. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt id="_CPPv4N5arrow3ipc15IpcWriteOptionsE">
<span id="_CPPv3N5arrow3ipc15IpcWriteOptionsE"></span><span id="_CPPv2N5arrow3ipc15IpcWriteOptionsE"></span><span id="arrow::ipc::IpcWriteOptions"></span><span class="target" id="structarrow_1_1ipc_1_1_ipc_write_options"></span><em class="property">struct </em><code class="sig-prename descclassname">arrow::ipc<code class="sig-prename descclassname">::</code></code><code class="sig-name descname">IpcWriteOptions</code><a class="headerlink" href="#_CPPv4N5arrow3ipc15IpcWriteOptionsE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Options for writing Arrow IPC messages. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc15IpcWriteOptions11allow_64bitE">
<span id="_CPPv3N5arrow3ipc15IpcWriteOptions11allow_64bitE"></span><span id="_CPPv2N5arrow3ipc15IpcWriteOptions11allow_64bitE"></span><span id="arrow::ipc::IpcWriteOptions::allow_64bit__b"></span><span class="target" id="structarrow_1_1ipc_1_1_ipc_write_options_1a069711feb5a9230774f8ac0f1d1ffa0d"></span>bool <code class="sig-name descname">allow_64bit</code> = false<a class="headerlink" href="#_CPPv4N5arrow3ipc15IpcWriteOptions11allow_64bitE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>If true, allow field lengths that donât fit in a signed 32-bit int. </p>
<p>Some implementations may not be able to parse streams created with this option. </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc15IpcWriteOptions19max_recursion_depthE">
<span id="_CPPv3N5arrow3ipc15IpcWriteOptions19max_recursion_depthE"></span><span id="_CPPv2N5arrow3ipc15IpcWriteOptions19max_recursion_depthE"></span><span id="arrow::ipc::IpcWriteOptions::max_recursion_depth__i"></span><span class="target" id="structarrow_1_1ipc_1_1_ipc_write_options_1a6602365f423aee8557b80e5826dbd20f"></span>int <code class="sig-name descname">max_recursion_depth</code> = kMaxNestingDepth<a class="headerlink" href="#_CPPv4N5arrow3ipc15IpcWriteOptions19max_recursion_depthE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>The maximum permitted schema nesting depth. </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc15IpcWriteOptions9alignmentE">
<span id="_CPPv3N5arrow3ipc15IpcWriteOptions9alignmentE"></span><span id="_CPPv2N5arrow3ipc15IpcWriteOptions9alignmentE"></span><span id="arrow::ipc::IpcWriteOptions::alignment__int32_t"></span><span class="target" id="structarrow_1_1ipc_1_1_ipc_write_options_1a0cacd69067efc1a1530c02059b2ca931"></span>int32_t <code class="sig-name descname">alignment</code> = 8<a class="headerlink" href="#_CPPv4N5arrow3ipc15IpcWriteOptions9alignmentE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Write padding after memory buffers up to this multiple of bytes. </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc15IpcWriteOptions23write_legacy_ipc_formatE">
<span id="_CPPv3N5arrow3ipc15IpcWriteOptions23write_legacy_ipc_formatE"></span><span id="_CPPv2N5arrow3ipc15IpcWriteOptions23write_legacy_ipc_formatE"></span><span id="arrow::ipc::IpcWriteOptions::write_legacy_ipc_format__b"></span><span class="target" id="structarrow_1_1ipc_1_1_ipc_write_options_1a8502278af861038dcb9a910324b07903"></span>bool <code class="sig-name descname">write_legacy_ipc_format</code> = false<a class="headerlink" href="#_CPPv4N5arrow3ipc15IpcWriteOptions23write_legacy_ipc_formatE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Write the pre-0.15.0 IPC message format. </p>
<p>This legacy format consists of a 4-byte prefix instead of 8-byte. </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc15IpcWriteOptions11memory_poolE">
<span id="_CPPv3N5arrow3ipc15IpcWriteOptions11memory_poolE"></span><span id="_CPPv2N5arrow3ipc15IpcWriteOptions11memory_poolE"></span><span id="arrow::ipc::IpcWriteOptions::memory_pool__MemoryPoolP"></span><span class="target" id="structarrow_1_1ipc_1_1_ipc_write_options_1a09ddce1594c5400ede80e8896c64c884"></span><a class="reference internal" href="memory.html#_CPPv4N5arrow10MemoryPoolE" title="arrow::MemoryPool">MemoryPool</a> *<code class="sig-name descname">memory_pool</code> = <a class="reference internal" href="memory.html#_CPPv4N5arrow19default_memory_poolEv" title="arrow::default_memory_pool">default_memory_pool</a>()<a class="headerlink" href="#_CPPv4N5arrow3ipc15IpcWriteOptions11memory_poolE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>The memory pool to use for allocations made during IPC writing. </p>
<p>While Arrow IPC is predominantly zero-copy, it may have to allocate memory in some cases (for example if compression is enabled). </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc15IpcWriteOptions5codecE">
<span id="_CPPv3N5arrow3ipc15IpcWriteOptions5codecE"></span><span id="_CPPv2N5arrow3ipc15IpcWriteOptions5codecE"></span><span id="arrow::ipc::IpcWriteOptions::codec__std::shared_ptr:util::Codec:"></span><span class="target" id="structarrow_1_1ipc_1_1_ipc_write_options_1ad60accbc93465c5b525774f4ad75ff53"></span>std::shared_ptr&lt;util::<a class="reference internal" href="utilities.html#_CPPv4N5arrow4util5CodecE" title="arrow::util::Codec">Codec</a>&gt; <code class="sig-name descname">codec</code><a class="headerlink" href="#_CPPv4N5arrow3ipc15IpcWriteOptions5codecE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Compression codec to use for record batch body buffers. </p>
<p>May only be UNCOMPRESSED, LZ4_FRAME and ZSTD. </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc15IpcWriteOptions11use_threadsE">
<span id="_CPPv3N5arrow3ipc15IpcWriteOptions11use_threadsE"></span><span id="_CPPv2N5arrow3ipc15IpcWriteOptions11use_threadsE"></span><span id="arrow::ipc::IpcWriteOptions::use_threads__b"></span><span class="target" id="structarrow_1_1ipc_1_1_ipc_write_options_1ab5b5e0a22c7cff37a2345b5cdeb9e91e"></span>bool <code class="sig-name descname">use_threads</code> = true<a class="headerlink" href="#_CPPv4N5arrow3ipc15IpcWriteOptions11use_threadsE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Use global CPU thread pool to parallelize any computational tasks like compression. </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc15IpcWriteOptions22emit_dictionary_deltasE">
<span id="_CPPv3N5arrow3ipc15IpcWriteOptions22emit_dictionary_deltasE"></span><span id="_CPPv2N5arrow3ipc15IpcWriteOptions22emit_dictionary_deltasE"></span><span id="arrow::ipc::IpcWriteOptions::emit_dictionary_deltas__b"></span><span class="target" id="structarrow_1_1ipc_1_1_ipc_write_options_1a19eedfb9ba4d1c0bd113a7cf1ea2ee22"></span>bool <code class="sig-name descname">emit_dictionary_deltas</code> = false<a class="headerlink" href="#_CPPv4N5arrow3ipc15IpcWriteOptions22emit_dictionary_deltasE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Whether to emit dictionary deltas. </p>
<p>If false, a changed dictionary for a given field will emit a full dictionary replacement. If true, a changed dictionary will be compared against the previous version. If possible, a dictionary delta will be omitted, otherwise a full dictionary replacement.</p>
<p>Default is false to maximize stream compatibility.</p>
<p>Also, note that if a changed dictionary is a nested dictionary, then a delta is never emitted, for compatibility with the read path. </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc15IpcWriteOptions16metadata_versionE">
<span id="_CPPv3N5arrow3ipc15IpcWriteOptions16metadata_versionE"></span><span id="_CPPv2N5arrow3ipc15IpcWriteOptions16metadata_versionE"></span><span id="arrow::ipc::IpcWriteOptions::metadata_version__MetadataVersion"></span><span class="target" id="structarrow_1_1ipc_1_1_ipc_write_options_1af4b13bf8943b951fdf7efb51d9c22257"></span>MetadataVersion <code class="sig-name descname">metadata_version</code> = MetadataVersion::V5<a class="headerlink" href="#_CPPv4N5arrow3ipc15IpcWriteOptions16metadata_versionE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Format version to use for IPC messages and their metadata. </p>
<p>Presently using V5 version (readable by 1.0.0 and later). V4 is also available (readable by 0.8.0 and later). </p>
</dd></dl>

</div>
</dd></dl>

</div>
<div class="section" id="reading-ipc-streams-and-files">
<h2><a class="toc-backref" href="#id4">Reading IPC streams and files</a><a class="headerlink" href="#reading-ipc-streams-and-files" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="blocking-api">
<h3><a class="toc-backref" href="#id5">Blocking API</a><a class="headerlink" href="#blocking-api" title="Permalink to this headline">Â¶</a></h3>
<p>Use either of these two classes, depending on which IPC format you want
to read.  The file format requires a random-access file, while the stream
format only requires a sequential input stream.</p>
<dl class="cpp class">
<dt id="_CPPv4N5arrow3ipc23RecordBatchStreamReaderE">
<span id="_CPPv3N5arrow3ipc23RecordBatchStreamReaderE"></span><span id="_CPPv2N5arrow3ipc23RecordBatchStreamReaderE"></span><span id="arrow::ipc::RecordBatchStreamReader"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_stream_reader"></span><em class="property">class </em><code class="sig-prename descclassname">arrow::ipc<code class="sig-prename descclassname">::</code></code><code class="sig-name descname">RecordBatchStreamReader</code> : <em class="property">public</em> arrow::<a class="reference internal" href="table.html#_CPPv4N5arrow17RecordBatchReaderE" title="arrow::RecordBatchReader">RecordBatchReader</a><a class="headerlink" href="#_CPPv4N5arrow3ipc23RecordBatchStreamReaderE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Synchronous batch stream reader that reads from <a class="reference internal" href="io.html#classarrow_1_1io_1_1_input_stream"><span class="std std-ref">io::InputStream</span></a>. </p>
<p>This class reads the schema (plus any dictionaries) as the first messages in the stream, followed by record batches. For more granular zero-copy reads see the ReadRecordBatch functions </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4NK5arrow3ipc23RecordBatchStreamReader5statsEv">
<span id="_CPPv3NK5arrow3ipc23RecordBatchStreamReader5statsEv"></span><span id="_CPPv2NK5arrow3ipc23RecordBatchStreamReader5statsEv"></span><span id="arrow::ipc::RecordBatchStreamReader::statsC"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_stream_reader_1a5ba2d178d55a254af916b79d4a5973b9"></span><a class="reference internal" href="#_CPPv4N5arrow3ipc9ReadStatsE" title="arrow::ipc::ReadStats">ReadStats</a> <code class="sig-name descname">stats</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em> = 0<a class="headerlink" href="#_CPPv4NK5arrow3ipc23RecordBatchStreamReader5statsEv" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Return current read statistics. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Static Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N5arrow3ipc23RecordBatchStreamReader4OpenENSt10unique_ptrI13MessageReaderEERK14IpcReadOptions">
<span id="_CPPv3N5arrow3ipc23RecordBatchStreamReader4OpenENSt10unique_ptrI13MessageReaderEERK14IpcReadOptions"></span><span id="_CPPv2N5arrow3ipc23RecordBatchStreamReader4OpenENSt10unique_ptrI13MessageReaderEERK14IpcReadOptions"></span><span id="arrow::ipc::RecordBatchStreamReader::Open__std::unique_ptr:MessageReader:.IpcReadOptionsCR"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_stream_reader_1a3a1ef2b3139bc893318605ca388af191"></span><a class="reference internal" href="support.html#_CPPv4I0EN5arrow6ResultE" title="arrow::Result">Result</a>&lt;std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow3ipc23RecordBatchStreamReaderE" title="arrow::ipc::RecordBatchStreamReader">RecordBatchStreamReader</a>&gt;&gt; <code class="sig-name descname">Open</code><span class="sig-paren">(</span>std::unique_ptr&lt;MessageReader&gt; <em>message_reader</em>, <em class="property">const</em> <a class="reference internal" href="#_CPPv4N5arrow3ipc14IpcReadOptionsE" title="arrow::ipc::IpcReadOptions">IpcReadOptions</a> &amp;<em>options</em> = <a class="reference internal" href="#_CPPv4N5arrow3ipc14IpcReadOptionsE" title="arrow::ipc::IpcReadOptions">IpcReadOptions</a>::Defaults()<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow3ipc23RecordBatchStreamReader4OpenENSt10unique_ptrI13MessageReaderEERK14IpcReadOptions" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Create batch reader from generic MessageReader. </p>
<p>This will take ownership of the given MessageReader.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>the created batch reader </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">message_reader</span></code>: a MessageReader implementation </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">options</span></code>: any IPC reading options (optional) </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N5arrow3ipc23RecordBatchStreamReader4OpenEPN2io11InputStreamERK14IpcReadOptions">
<span id="_CPPv3N5arrow3ipc23RecordBatchStreamReader4OpenEPN2io11InputStreamERK14IpcReadOptions"></span><span id="_CPPv2N5arrow3ipc23RecordBatchStreamReader4OpenEPN2io11InputStreamERK14IpcReadOptions"></span><span id="arrow::ipc::RecordBatchStreamReader::Open__io::InputStreamP.IpcReadOptionsCR"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_stream_reader_1a79891df86cbcaf792c78eedffbd31279"></span><a class="reference internal" href="support.html#_CPPv4I0EN5arrow6ResultE" title="arrow::Result">Result</a>&lt;std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow3ipc23RecordBatchStreamReaderE" title="arrow::ipc::RecordBatchStreamReader">RecordBatchStreamReader</a>&gt;&gt; <code class="sig-name descname">Open</code><span class="sig-paren">(</span>io::<a class="reference internal" href="io.html#_CPPv4N5arrow2io11InputStreamE" title="arrow::io::InputStream">InputStream</a> *<em>stream</em>, <em class="property">const</em> <a class="reference internal" href="#_CPPv4N5arrow3ipc14IpcReadOptionsE" title="arrow::ipc::IpcReadOptions">IpcReadOptions</a> &amp;<em>options</em> = <a class="reference internal" href="#_CPPv4N5arrow3ipc14IpcReadOptionsE" title="arrow::ipc::IpcReadOptions">IpcReadOptions</a>::Defaults()<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow3ipc23RecordBatchStreamReader4OpenEPN2io11InputStreamERK14IpcReadOptions" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Record batch stream reader from InputStream. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>the created batch reader </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">stream</span></code>: an input stream instance. Must stay alive throughout lifetime of stream reader </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">options</span></code>: any IPC reading options (optional) </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N5arrow3ipc23RecordBatchStreamReader4OpenERKNSt10shared_ptrIN2io11InputStreamEEERK14IpcReadOptions">
<span id="_CPPv3N5arrow3ipc23RecordBatchStreamReader4OpenERKNSt10shared_ptrIN2io11InputStreamEEERK14IpcReadOptions"></span><span id="_CPPv2N5arrow3ipc23RecordBatchStreamReader4OpenERKNSt10shared_ptrIN2io11InputStreamEEERK14IpcReadOptions"></span><span id="arrow::ipc::RecordBatchStreamReader::Open__std::shared_ptr:io::InputStream:CR.IpcReadOptionsCR"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_stream_reader_1a2a8ff4fbc26cb179c4617769fd1e5899"></span><a class="reference internal" href="support.html#_CPPv4I0EN5arrow6ResultE" title="arrow::Result">Result</a>&lt;std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow3ipc23RecordBatchStreamReaderE" title="arrow::ipc::RecordBatchStreamReader">RecordBatchStreamReader</a>&gt;&gt; <code class="sig-name descname">Open</code><span class="sig-paren">(</span><em class="property">const</em> std::shared_ptr&lt;io::<a class="reference internal" href="io.html#_CPPv4N5arrow2io11InputStreamE" title="arrow::io::InputStream">InputStream</a>&gt; &amp;<em>stream</em>, <em class="property">const</em> <a class="reference internal" href="#_CPPv4N5arrow3ipc14IpcReadOptionsE" title="arrow::ipc::IpcReadOptions">IpcReadOptions</a> &amp;<em>options</em> = <a class="reference internal" href="#_CPPv4N5arrow3ipc14IpcReadOptionsE" title="arrow::ipc::IpcReadOptions">IpcReadOptions</a>::Defaults()<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow3ipc23RecordBatchStreamReader4OpenERKNSt10shared_ptrIN2io11InputStreamEEERK14IpcReadOptions" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Open stream and retain ownership of stream object. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>the created batch reader </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">stream</span></code>: the input stream </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">options</span></code>: any IPC reading options (optional) </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp class">
<dt id="_CPPv4N5arrow3ipc21RecordBatchFileReaderE">
<span id="_CPPv3N5arrow3ipc21RecordBatchFileReaderE"></span><span id="_CPPv2N5arrow3ipc21RecordBatchFileReaderE"></span><span id="arrow::ipc::RecordBatchFileReader"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_file_reader"></span><em class="property">class </em><code class="sig-prename descclassname">arrow::ipc<code class="sig-prename descclassname">::</code></code><code class="sig-name descname">RecordBatchFileReader</code><a class="headerlink" href="#_CPPv4N5arrow3ipc21RecordBatchFileReaderE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Reads the record batch file format. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4NK5arrow3ipc21RecordBatchFileReader6schemaEv">
<span id="_CPPv3NK5arrow3ipc21RecordBatchFileReader6schemaEv"></span><span id="_CPPv2NK5arrow3ipc21RecordBatchFileReader6schemaEv"></span><span id="arrow::ipc::RecordBatchFileReader::schemaC"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_file_reader_1a4ea846f0c45c7ae86dd81da1c21ed02f"></span>std::shared_ptr&lt;<a class="reference internal" href="datatype.html#_CPPv4N5arrow6SchemaE" title="arrow::Schema">Schema</a>&gt; <code class="sig-name descname">schema</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em> = 0<a class="headerlink" href="#_CPPv4NK5arrow3ipc21RecordBatchFileReader6schemaEv" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>The schema read from the file. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK5arrow3ipc21RecordBatchFileReader18num_record_batchesEv">
<span id="_CPPv3NK5arrow3ipc21RecordBatchFileReader18num_record_batchesEv"></span><span id="_CPPv2NK5arrow3ipc21RecordBatchFileReader18num_record_batchesEv"></span><span id="arrow::ipc::RecordBatchFileReader::num_record_batchesC"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_file_reader_1a74ea326fbee08f5906dfb218900706ab"></span>int <code class="sig-name descname">num_record_batches</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em> = 0<a class="headerlink" href="#_CPPv4NK5arrow3ipc21RecordBatchFileReader18num_record_batchesEv" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Returns the number of record batches in the file. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK5arrow3ipc21RecordBatchFileReader7versionEv">
<span id="_CPPv3NK5arrow3ipc21RecordBatchFileReader7versionEv"></span><span id="_CPPv2NK5arrow3ipc21RecordBatchFileReader7versionEv"></span><span id="arrow::ipc::RecordBatchFileReader::versionC"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_file_reader_1a8a0e42bdaf417dbffb5f36ca37178823"></span>MetadataVersion <code class="sig-name descname">version</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em> = 0<a class="headerlink" href="#_CPPv4NK5arrow3ipc21RecordBatchFileReader7versionEv" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Return the metadata version from the file metadata. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK5arrow3ipc21RecordBatchFileReader8metadataEv">
<span id="_CPPv3NK5arrow3ipc21RecordBatchFileReader8metadataEv"></span><span id="_CPPv2NK5arrow3ipc21RecordBatchFileReader8metadataEv"></span><span id="arrow::ipc::RecordBatchFileReader::metadataC"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_file_reader_1a8f203829465396657a0ebecdcbaea68e"></span>std::shared_ptr&lt;<em class="property">const</em> KeyValueMetadata&gt; <code class="sig-name descname">metadata</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em> = 0<a class="headerlink" href="#_CPPv4NK5arrow3ipc21RecordBatchFileReader8metadataEv" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Return the contents of the custom_metadata field from the fileâs Footer. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N5arrow3ipc21RecordBatchFileReader15ReadRecordBatchEi">
<span id="_CPPv3N5arrow3ipc21RecordBatchFileReader15ReadRecordBatchEi"></span><span id="_CPPv2N5arrow3ipc21RecordBatchFileReader15ReadRecordBatchEi"></span><span id="arrow::ipc::RecordBatchFileReader::ReadRecordBatch__i"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_file_reader_1abfd1fad49dc2fc795befd03b2024359b"></span><a class="reference internal" href="support.html#_CPPv4I0EN5arrow6ResultE" title="arrow::Result">Result</a>&lt;std::shared_ptr&lt;<a class="reference internal" href="table.html#_CPPv4N5arrow11RecordBatchE" title="arrow::RecordBatch">RecordBatch</a>&gt;&gt; <code class="sig-name descname">ReadRecordBatch</code><span class="sig-paren">(</span>int <em>i</em><span class="sig-paren">)</span> = 0<a class="headerlink" href="#_CPPv4N5arrow3ipc21RecordBatchFileReader15ReadRecordBatchEi" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Read a particular record batch from the file. </p>
<p>Does not copy memory if the input source supports zero-copy.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>the read batch </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">i</span></code>: the index of the record batch to return </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK5arrow3ipc21RecordBatchFileReader5statsEv">
<span id="_CPPv3NK5arrow3ipc21RecordBatchFileReader5statsEv"></span><span id="_CPPv2NK5arrow3ipc21RecordBatchFileReader5statsEv"></span><span id="arrow::ipc::RecordBatchFileReader::statsC"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_file_reader_1a2b015b4a89566fee6e6e136fd114db65"></span><a class="reference internal" href="#_CPPv4N5arrow3ipc9ReadStatsE" title="arrow::ipc::ReadStats">ReadStats</a> <code class="sig-name descname">stats</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em> = 0<a class="headerlink" href="#_CPPv4NK5arrow3ipc21RecordBatchFileReader5statsEv" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Return current read statistics. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Static Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N5arrow3ipc21RecordBatchFileReader4OpenEPN2io16RandomAccessFileERK14IpcReadOptions">
<span id="_CPPv3N5arrow3ipc21RecordBatchFileReader4OpenEPN2io16RandomAccessFileERK14IpcReadOptions"></span><span id="_CPPv2N5arrow3ipc21RecordBatchFileReader4OpenEPN2io16RandomAccessFileERK14IpcReadOptions"></span><span id="arrow::ipc::RecordBatchFileReader::Open__io::RandomAccessFileP.IpcReadOptionsCR"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_file_reader_1a0aea6c88ca401308475e96e72f3433f5"></span><a class="reference internal" href="support.html#_CPPv4I0EN5arrow6ResultE" title="arrow::Result">Result</a>&lt;std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow3ipc21RecordBatchFileReaderE" title="arrow::ipc::RecordBatchFileReader">RecordBatchFileReader</a>&gt;&gt; <code class="sig-name descname">Open</code><span class="sig-paren">(</span>io::<a class="reference internal" href="io.html#_CPPv4N5arrow2io16RandomAccessFileE" title="arrow::io::RandomAccessFile">RandomAccessFile</a> *<em>file</em>, <em class="property">const</em> <a class="reference internal" href="#_CPPv4N5arrow3ipc14IpcReadOptionsE" title="arrow::ipc::IpcReadOptions">IpcReadOptions</a> &amp;<em>options</em> = <a class="reference internal" href="#_CPPv4N5arrow3ipc14IpcReadOptionsE" title="arrow::ipc::IpcReadOptions">IpcReadOptions</a>::Defaults()<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow3ipc21RecordBatchFileReader4OpenEPN2io16RandomAccessFileERK14IpcReadOptions" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Open a <a class="reference internal" href="#classarrow_1_1ipc_1_1_record_batch_file_reader"><span class="std std-ref">RecordBatchFileReader</span></a>. </p>
<p>Open a file-like object that is assumed to be self-contained; i.e., the end of the file interface is the end of the Arrow file. Note that there can be any amount of data preceding the Arrow-formatted data, because we need only locate the end of the Arrow file stream to discover the metadata and then proceed to read the data into memory. </p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N5arrow3ipc21RecordBatchFileReader4OpenEPN2io16RandomAccessFileE7int64_tRK14IpcReadOptions">
<span id="_CPPv3N5arrow3ipc21RecordBatchFileReader4OpenEPN2io16RandomAccessFileE7int64_tRK14IpcReadOptions"></span><span id="_CPPv2N5arrow3ipc21RecordBatchFileReader4OpenEPN2io16RandomAccessFileE7int64_tRK14IpcReadOptions"></span><span id="arrow::ipc::RecordBatchFileReader::Open__io::RandomAccessFileP.int64_t.IpcReadOptionsCR"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_file_reader_1a01a15be3b2898c6c8c1e6c1466f39dd4"></span><a class="reference internal" href="support.html#_CPPv4I0EN5arrow6ResultE" title="arrow::Result">Result</a>&lt;std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow3ipc21RecordBatchFileReaderE" title="arrow::ipc::RecordBatchFileReader">RecordBatchFileReader</a>&gt;&gt; <code class="sig-name descname">Open</code><span class="sig-paren">(</span>io::<a class="reference internal" href="io.html#_CPPv4N5arrow2io16RandomAccessFileE" title="arrow::io::RandomAccessFile">RandomAccessFile</a> *<em>file</em>, int64_t <em>footer_offset</em>, <em class="property">const</em> <a class="reference internal" href="#_CPPv4N5arrow3ipc14IpcReadOptionsE" title="arrow::ipc::IpcReadOptions">IpcReadOptions</a> &amp;<em>options</em> = <a class="reference internal" href="#_CPPv4N5arrow3ipc14IpcReadOptionsE" title="arrow::ipc::IpcReadOptions">IpcReadOptions</a>::Defaults()<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow3ipc21RecordBatchFileReader4OpenEPN2io16RandomAccessFileE7int64_tRK14IpcReadOptions" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Open a <a class="reference internal" href="#classarrow_1_1ipc_1_1_record_batch_file_reader"><span class="std std-ref">RecordBatchFileReader</span></a> If the file is embedded within some larger file or memory region, you can pass the absolute memory offset to the end of the file (which contains the metadata footer). </p>
<p>The metadata must have been written with memory offsets relative to the start of the containing file</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>the returned reader </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">file</span></code>: the data source </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">footer_offset</span></code>: the position of the end of the Arrow file </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">options</span></code>: options for IPC reading </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N5arrow3ipc21RecordBatchFileReader4OpenERKNSt10shared_ptrIN2io16RandomAccessFileEEERK14IpcReadOptions">
<span id="_CPPv3N5arrow3ipc21RecordBatchFileReader4OpenERKNSt10shared_ptrIN2io16RandomAccessFileEEERK14IpcReadOptions"></span><span id="_CPPv2N5arrow3ipc21RecordBatchFileReader4OpenERKNSt10shared_ptrIN2io16RandomAccessFileEEERK14IpcReadOptions"></span><span id="arrow::ipc::RecordBatchFileReader::Open__std::shared_ptr:io::RandomAccessFile:CR.IpcReadOptionsCR"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_file_reader_1a8588ab178da86959fd9e8759baf78005"></span><a class="reference internal" href="support.html#_CPPv4I0EN5arrow6ResultE" title="arrow::Result">Result</a>&lt;std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow3ipc21RecordBatchFileReaderE" title="arrow::ipc::RecordBatchFileReader">RecordBatchFileReader</a>&gt;&gt; <code class="sig-name descname">Open</code><span class="sig-paren">(</span><em class="property">const</em> std::shared_ptr&lt;io::<a class="reference internal" href="io.html#_CPPv4N5arrow2io16RandomAccessFileE" title="arrow::io::RandomAccessFile">RandomAccessFile</a>&gt; &amp;<em>file</em>, <em class="property">const</em> <a class="reference internal" href="#_CPPv4N5arrow3ipc14IpcReadOptionsE" title="arrow::ipc::IpcReadOptions">IpcReadOptions</a> &amp;<em>options</em> = <a class="reference internal" href="#_CPPv4N5arrow3ipc14IpcReadOptionsE" title="arrow::ipc::IpcReadOptions">IpcReadOptions</a>::Defaults()<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow3ipc21RecordBatchFileReader4OpenERKNSt10shared_ptrIN2io16RandomAccessFileEEERK14IpcReadOptions" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Version of Open that retains ownership of file. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>the returned reader </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">file</span></code>: the data source </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">options</span></code>: options for IPC reading </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N5arrow3ipc21RecordBatchFileReader4OpenERKNSt10shared_ptrIN2io16RandomAccessFileEEE7int64_tRK14IpcReadOptions">
<span id="_CPPv3N5arrow3ipc21RecordBatchFileReader4OpenERKNSt10shared_ptrIN2io16RandomAccessFileEEE7int64_tRK14IpcReadOptions"></span><span id="_CPPv2N5arrow3ipc21RecordBatchFileReader4OpenERKNSt10shared_ptrIN2io16RandomAccessFileEEE7int64_tRK14IpcReadOptions"></span><span id="arrow::ipc::RecordBatchFileReader::Open__std::shared_ptr:io::RandomAccessFile:CR.int64_t.IpcReadOptionsCR"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_file_reader_1a2c4fd24d1b172be479d16a50ea16d2fb"></span><a class="reference internal" href="support.html#_CPPv4I0EN5arrow6ResultE" title="arrow::Result">Result</a>&lt;std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow3ipc21RecordBatchFileReaderE" title="arrow::ipc::RecordBatchFileReader">RecordBatchFileReader</a>&gt;&gt; <code class="sig-name descname">Open</code><span class="sig-paren">(</span><em class="property">const</em> std::shared_ptr&lt;io::<a class="reference internal" href="io.html#_CPPv4N5arrow2io16RandomAccessFileE" title="arrow::io::RandomAccessFile">RandomAccessFile</a>&gt; &amp;<em>file</em>, int64_t <em>footer_offset</em>, <em class="property">const</em> <a class="reference internal" href="#_CPPv4N5arrow3ipc14IpcReadOptionsE" title="arrow::ipc::IpcReadOptions">IpcReadOptions</a> &amp;<em>options</em> = <a class="reference internal" href="#_CPPv4N5arrow3ipc14IpcReadOptionsE" title="arrow::ipc::IpcReadOptions">IpcReadOptions</a>::Defaults()<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow3ipc21RecordBatchFileReader4OpenERKNSt10shared_ptrIN2io16RandomAccessFileEEE7int64_tRK14IpcReadOptions" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Version of Open that retains ownership of file. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>the returned reader </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">file</span></code>: the data source </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">footer_offset</span></code>: the position of the end of the Arrow file </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">options</span></code>: options for IPC reading </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</dd></dl>

</div>
<div class="section" id="event-driven-api">
<h3><a class="toc-backref" href="#id6">Event-driven API</a><a class="headerlink" href="#event-driven-api" title="Permalink to this headline">Â¶</a></h3>
<p>To read an IPC stream in event-driven fashion, you must implement a
<a class="reference internal" href="#_CPPv4N5arrow3ipc8ListenerE" title="arrow::ipc::Listener"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">Listener</span></code></a> subclass that you will pass to
<a class="reference internal" href="#_CPPv4N5arrow3ipc13StreamDecoderE" title="arrow::ipc::StreamDecoder"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">StreamDecoder</span></code></a>.</p>
<dl class="cpp class">
<dt id="_CPPv4N5arrow3ipc8ListenerE">
<span id="_CPPv3N5arrow3ipc8ListenerE"></span><span id="_CPPv2N5arrow3ipc8ListenerE"></span><span id="arrow::ipc::Listener"></span><span class="target" id="classarrow_1_1ipc_1_1_listener"></span><em class="property">class </em><code class="sig-prename descclassname">arrow::ipc<code class="sig-prename descclassname">::</code></code><code class="sig-name descname">Listener</code><a class="headerlink" href="#_CPPv4N5arrow3ipc8ListenerE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>A general listener class to receive events. </p>
<p>You must implement callback methods for interested events.</p>
<p>This API is EXPERIMENTAL.</p>
<p><dl class="simple">
<dt><strong>Since</strong></dt><dd><p>0.17.0 </p>
</dd>
</dl>
</p>
<p>Subclassed by arrow::ipc::CollectListener</p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N5arrow3ipc8Listener5OnEOSEv">
<span id="_CPPv3N5arrow3ipc8Listener5OnEOSEv"></span><span id="_CPPv2N5arrow3ipc8Listener5OnEOSEv"></span><span id="arrow::ipc::Listener::OnEOS"></span><span class="target" id="classarrow_1_1ipc_1_1_listener_1a4484c1f30a7873c8c9db24180ab68915"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="sig-name descname">OnEOS</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow3ipc8Listener5OnEOSEv" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Called when end-of-stream is received. </p>
<p>The default implementation just returns <a class="reference internal" href="support.html#classarrow_1_1_status_1a5c0b0031db6eeec3dcc70485d24cfe03"><span class="std std-ref">arrow::Status::OK()</span></a>.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a></p>
</dd>
<dt><strong>See</strong></dt><dd><p><a class="reference internal" href="#classarrow_1_1ipc_1_1_stream_decoder"><span class="std std-ref">StreamDecoder</span></a> </p>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N5arrow3ipc8Listener20OnRecordBatchDecodedENSt10shared_ptrI11RecordBatchEE">
<span id="_CPPv3N5arrow3ipc8Listener20OnRecordBatchDecodedENSt10shared_ptrI11RecordBatchEE"></span><span id="_CPPv2N5arrow3ipc8Listener20OnRecordBatchDecodedENSt10shared_ptrI11RecordBatchEE"></span><span id="arrow::ipc::Listener::OnRecordBatchDecoded__std::shared_ptr:RecordBatch:"></span><span class="target" id="classarrow_1_1ipc_1_1_listener_1aee30e5b08a255a8a8be87f59b3e17417"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="sig-name descname">OnRecordBatchDecoded</code><span class="sig-paren">(</span>std::shared_ptr&lt;<a class="reference internal" href="table.html#_CPPv4N5arrow11RecordBatchE" title="arrow::RecordBatch">RecordBatch</a>&gt; <em>record_batch</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow3ipc8Listener20OnRecordBatchDecodedENSt10shared_ptrI11RecordBatchEE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Called when a record batch is decoded. </p>
<p>The default implementation just returns <a class="reference internal" href="support.html#classarrow_1_1_status_1ae63ddaaa7db5edef4e75a26b693351a1"><span class="std std-ref">arrow::Status::NotImplemented()</span></a>.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a></p>
</dd>
<dt><strong>See</strong></dt><dd><p><a class="reference internal" href="#classarrow_1_1ipc_1_1_stream_decoder"><span class="std std-ref">StreamDecoder</span></a> </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">record_batch</span></code>: a record batch decoded </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N5arrow3ipc8Listener15OnSchemaDecodedENSt10shared_ptrI6SchemaEE">
<span id="_CPPv3N5arrow3ipc8Listener15OnSchemaDecodedENSt10shared_ptrI6SchemaEE"></span><span id="_CPPv2N5arrow3ipc8Listener15OnSchemaDecodedENSt10shared_ptrI6SchemaEE"></span><span id="arrow::ipc::Listener::OnSchemaDecoded__std::shared_ptr:Schema:"></span><span class="target" id="classarrow_1_1ipc_1_1_listener_1a18aa14c248dcc36fae10854f38f8c71e"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="sig-name descname">OnSchemaDecoded</code><span class="sig-paren">(</span>std::shared_ptr&lt;<a class="reference internal" href="datatype.html#_CPPv4N5arrow6SchemaE" title="arrow::Schema">Schema</a>&gt; <em>schema</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow3ipc8Listener15OnSchemaDecodedENSt10shared_ptrI6SchemaEE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Called when a schema is decoded. </p>
<p>The default implementation just returns <a class="reference internal" href="support.html#classarrow_1_1_status_1a5c0b0031db6eeec3dcc70485d24cfe03"><span class="std std-ref">arrow::Status::OK()</span></a>.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a></p>
</dd>
<dt><strong>See</strong></dt><dd><p><a class="reference internal" href="#classarrow_1_1ipc_1_1_stream_decoder"><span class="std std-ref">StreamDecoder</span></a> </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">schema</span></code>: a schema decoded </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp class">
<dt id="_CPPv4N5arrow3ipc13StreamDecoderE">
<span id="_CPPv3N5arrow3ipc13StreamDecoderE"></span><span id="_CPPv2N5arrow3ipc13StreamDecoderE"></span><span id="arrow::ipc::StreamDecoder"></span><span class="target" id="classarrow_1_1ipc_1_1_stream_decoder"></span><em class="property">class </em><code class="sig-prename descclassname">arrow::ipc<code class="sig-prename descclassname">::</code></code><code class="sig-name descname">StreamDecoder</code><a class="headerlink" href="#_CPPv4N5arrow3ipc13StreamDecoderE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Push style stream decoder that receives data from user. </p>
<p>This class decodes the Apache Arrow IPC streaming format data.</p>
<p>This API is EXPERIMENTAL.</p>
<p><dl class="simple">
<dt><strong>See</strong></dt><dd><p><a class="reference external" href="https://arrow.apache.org/docs/format/Columnar.html#ipc-streaming-format">https://arrow.apache.org/docs/format/Columnar.html#ipc-streaming-format</a></p>
</dd>
<dt><strong>Since</strong></dt><dd><p>0.17.0 </p>
</dd>
</dl>
</p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N5arrow3ipc13StreamDecoder13StreamDecoderENSt10shared_ptrI8ListenerEE14IpcReadOptions">
<span id="_CPPv3N5arrow3ipc13StreamDecoder13StreamDecoderENSt10shared_ptrI8ListenerEE14IpcReadOptions"></span><span id="_CPPv2N5arrow3ipc13StreamDecoder13StreamDecoderENSt10shared_ptrI8ListenerEE14IpcReadOptions"></span><span id="arrow::ipc::StreamDecoder::StreamDecoder__std::shared_ptr:Listener:.IpcReadOptions"></span><span class="target" id="classarrow_1_1ipc_1_1_stream_decoder_1a3011f9acb0aa2525af282bb2b49aaf10"></span><code class="sig-name descname">StreamDecoder</code><span class="sig-paren">(</span>std::shared_ptr&lt;<a class="reference internal" href="#_CPPv4N5arrow3ipc8ListenerE" title="arrow::ipc::Listener">Listener</a>&gt; <em>listener</em>, <a class="reference internal" href="#_CPPv4N5arrow3ipc14IpcReadOptionsE" title="arrow::ipc::IpcReadOptions">IpcReadOptions</a> <em>options</em> = <a class="reference internal" href="#_CPPv4N5arrow3ipc14IpcReadOptionsE" title="arrow::ipc::IpcReadOptions">IpcReadOptions</a>::Defaults()<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow3ipc13StreamDecoder13StreamDecoderENSt10shared_ptrI8ListenerEE14IpcReadOptions" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Construct a stream decoder. </p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">listener</span></code>: a <a class="reference internal" href="#classarrow_1_1ipc_1_1_listener"><span class="std std-ref">Listener</span></a> that must implement <a class="reference internal" href="#classarrow_1_1ipc_1_1_listener_1aee30e5b08a255a8a8be87f59b3e17417"><span class="std std-ref">Listener::OnRecordBatchDecoded()</span></a> to receive decoded record batches </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">options</span></code>: any IPC reading options (optional) </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N5arrow3ipc13StreamDecoder7ConsumeEPK7uint8_t7int64_t">
<span id="_CPPv3N5arrow3ipc13StreamDecoder7ConsumeEPK7uint8_t7int64_t"></span><span id="_CPPv2N5arrow3ipc13StreamDecoder7ConsumeEPK7uint8_t7int64_t"></span><span id="arrow::ipc::StreamDecoder::Consume__uint8_tCP.int64_t"></span><span class="target" id="classarrow_1_1ipc_1_1_stream_decoder_1a2b05c37f754e13c194878e8d240542b8"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="sig-name descname">Consume</code><span class="sig-paren">(</span><em class="property">const</em> uint8_t *<em>data</em>, int64_t <em>size</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow3ipc13StreamDecoder7ConsumeEPK7uint8_t7int64_t" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Feed data to the decoder as a raw data. </p>
<p>If the decoder can read one or more record batches by the data, the decoder calls listener-&gt;OnRecordBatchDecoded() with a decoded record batch multiple times.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a> </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">data</span></code>: a raw data to be processed. This data isnât copied. The passed memory must be kept alive through record batch processing. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">size</span></code>: raw data size. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N5arrow3ipc13StreamDecoder7ConsumeENSt10shared_ptrI6BufferEE">
<span id="_CPPv3N5arrow3ipc13StreamDecoder7ConsumeENSt10shared_ptrI6BufferEE"></span><span id="_CPPv2N5arrow3ipc13StreamDecoder7ConsumeENSt10shared_ptrI6BufferEE"></span><span id="arrow::ipc::StreamDecoder::Consume__std::shared_ptr:Buffer:"></span><span class="target" id="classarrow_1_1ipc_1_1_stream_decoder_1a79715886a8a5e3efc71b7e9107eddc98"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="sig-name descname">Consume</code><span class="sig-paren">(</span>std::shared_ptr&lt;<a class="reference internal" href="memory.html#_CPPv4N5arrow6BufferE" title="arrow::Buffer">Buffer</a>&gt; <em>buffer</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow3ipc13StreamDecoder7ConsumeENSt10shared_ptrI6BufferEE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Feed data to the decoder as a <a class="reference internal" href="memory.html#classarrow_1_1_buffer"><span class="std std-ref">Buffer</span></a>. </p>
<p>If the decoder can read one or more record batches by the <a class="reference internal" href="memory.html#classarrow_1_1_buffer"><span class="std std-ref">Buffer</span></a>, the decoder calls listener-&gt;RecordBatchReceived() with a decoded record batch multiple times.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a> </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">buffer</span></code>: a <a class="reference internal" href="memory.html#classarrow_1_1_buffer"><span class="std std-ref">Buffer</span></a> to be processed. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK5arrow3ipc13StreamDecoder6schemaEv">
<span id="_CPPv3NK5arrow3ipc13StreamDecoder6schemaEv"></span><span id="_CPPv2NK5arrow3ipc13StreamDecoder6schemaEv"></span><span id="arrow::ipc::StreamDecoder::schemaC"></span><span class="target" id="classarrow_1_1ipc_1_1_stream_decoder_1a1432cd43d83730480d2241e13835ce74"></span>std::shared_ptr&lt;<a class="reference internal" href="datatype.html#_CPPv4N5arrow6SchemaE" title="arrow::Schema">Schema</a>&gt; <code class="sig-name descname">schema</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK5arrow3ipc13StreamDecoder6schemaEv" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>the shared schema of the record batches in the stream </p>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK5arrow3ipc13StreamDecoder18next_required_sizeEv">
<span id="_CPPv3NK5arrow3ipc13StreamDecoder18next_required_sizeEv"></span><span id="_CPPv2NK5arrow3ipc13StreamDecoder18next_required_sizeEv"></span><span id="arrow::ipc::StreamDecoder::next_required_sizeC"></span><span class="target" id="classarrow_1_1ipc_1_1_stream_decoder_1aa8c7ac5a806a8cc89306015095b098d2"></span>int64_t <code class="sig-name descname">next_required_size</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK5arrow3ipc13StreamDecoder18next_required_sizeEv" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Return the number of bytes needed to advance the state of the decoder. </p>
<p>This method is provided for users who want to optimize performance. Normal users donât need to use this method.</p>
<p>Here is an example usage for normal users:</p>
<p><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">decoder</span><span class="p">.</span><span class="n">Consume</span><span class="p">(</span><span class="n">buffer1</span><span class="p">);</span>
<span class="n">decoder</span><span class="p">.</span><span class="n">Consume</span><span class="p">(</span><span class="n">buffer2</span><span class="p">);</span>
<span class="n">decoder</span><span class="p">.</span><span class="n">Consume</span><span class="p">(</span><span class="n">buffer3</span><span class="p">);</span>
</pre></div>
</div>
</p>
<p>Decoder has internal buffer. If consumed data isnât enough to advance the state of the decoder, consumed data is buffered to the internal buffer. It causes performance overhead.</p>
<p>If you pass <a class="reference internal" href="#classarrow_1_1ipc_1_1_stream_decoder_1aa8c7ac5a806a8cc89306015095b098d2"><span class="std std-ref">next_required_size()</span></a> size data to each <a class="reference internal" href="#classarrow_1_1ipc_1_1_stream_decoder_1a2b05c37f754e13c194878e8d240542b8"><span class="std std-ref">Consume()</span></a> call, the decoder doesnât use its internal buffer. It improves performance.</p>
<p>Here is an example usage to avoid using internal buffer:</p>
<p><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">buffer1</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">decoder</span><span class="p">.</span><span class="n">next_required_size</span><span class="p">());</span>
<span class="n">decoder</span><span class="p">.</span><span class="n">Consume</span><span class="p">(</span><span class="n">buffer1</span><span class="p">);</span>
<span class="n">buffer2</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">decoder</span><span class="p">.</span><span class="n">next_required_size</span><span class="p">());</span>
<span class="n">decoder</span><span class="p">.</span><span class="n">Consume</span><span class="p">(</span><span class="n">buffer2</span><span class="p">);</span>
</pre></div>
</div>
</p>
<p>Users can use this method to avoid creating small chunks. Record batch data must be contiguous data. If users pass small chunks to the decoder, the decoder needs concatenate small chunks internally. It causes performance overhead.</p>
<p>Here is an example usage to reduce small chunks:</p>
<p><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">buffer</span> <span class="o">=</span> <span class="n">AllocateResizableBuffer</span><span class="p">();</span>
<span class="k">while</span> <span class="p">((</span><span class="n">small_chunk</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="o">&amp;</span><span class="n">small_chunk_size</span><span class="p">)))</span> <span class="p">{</span>
  <span class="k">auto</span> <span class="n">current_buffer_size</span> <span class="o">=</span> <span class="n">buffer</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">();</span>
  <span class="n">buffer</span><span class="o">-&gt;</span><span class="n">Resize</span><span class="p">(</span><span class="n">current_buffer_size</span> <span class="o">+</span> <span class="n">small_chunk_size</span><span class="p">);</span>
  <span class="n">memcpy</span><span class="p">(</span><span class="n">buffer</span><span class="o">-&gt;</span><span class="n">mutable_data</span><span class="p">()</span> <span class="o">+</span> <span class="n">current_buffer_size</span><span class="p">,</span>
         <span class="n">small_chunk</span><span class="p">,</span>
         <span class="n">small_chunk_size</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">buffer</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">decoder</span><span class="p">.</span><span class="n">next_required_size</span><span class="p">())</span> <span class="p">{</span>
    <span class="k">continue</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">arrow</span><span class="o">::</span><span class="n">Buffer</span><span class="o">&gt;</span> <span class="n">chunk</span><span class="p">(</span><span class="n">buffer</span><span class="p">.</span><span class="n">release</span><span class="p">());</span>
  <span class="n">decoder</span><span class="p">.</span><span class="n">Consume</span><span class="p">(</span><span class="n">chunk</span><span class="p">);</span>
  <span class="n">buffer</span> <span class="o">=</span> <span class="n">AllocateResizableBuffer</span><span class="p">();</span>
<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="n">buffer</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">arrow</span><span class="o">::</span><span class="n">Buffer</span><span class="o">&gt;</span> <span class="n">chunk</span><span class="p">(</span><span class="n">buffer</span><span class="p">.</span><span class="n">release</span><span class="p">());</span>
  <span class="n">decoder</span><span class="p">.</span><span class="n">Consume</span><span class="p">(</span><span class="n">chunk</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>the number of bytes needed to advance the state of the decoder </p>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK5arrow3ipc13StreamDecoder5statsEv">
<span id="_CPPv3NK5arrow3ipc13StreamDecoder5statsEv"></span><span id="_CPPv2NK5arrow3ipc13StreamDecoder5statsEv"></span><span id="arrow::ipc::StreamDecoder::statsC"></span><span class="target" id="classarrow_1_1ipc_1_1_stream_decoder_1a238b8fa539c479cb970c07fbf546db0e"></span><a class="reference internal" href="#_CPPv4N5arrow3ipc9ReadStatsE" title="arrow::ipc::ReadStats">ReadStats</a> <code class="sig-name descname">stats</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em><a class="headerlink" href="#_CPPv4NK5arrow3ipc13StreamDecoder5statsEv" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Return current read statistics. </p>
</dd></dl>

</div>
</dd></dl>

</div>
<div class="section" id="statistics">
<h3><a class="toc-backref" href="#id7">Statistics</a><a class="headerlink" href="#statistics" title="Permalink to this headline">Â¶</a></h3>
<dl class="cpp struct">
<dt id="_CPPv4N5arrow3ipc9ReadStatsE">
<span id="_CPPv3N5arrow3ipc9ReadStatsE"></span><span id="_CPPv2N5arrow3ipc9ReadStatsE"></span><span id="arrow::ipc::ReadStats"></span><span class="target" id="structarrow_1_1ipc_1_1_read_stats"></span><em class="property">struct </em><code class="sig-prename descclassname">arrow::ipc<code class="sig-prename descclassname">::</code></code><code class="sig-name descname">ReadStats</code><a class="headerlink" href="#_CPPv4N5arrow3ipc9ReadStatsE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc9ReadStats12num_messagesE">
<span id="_CPPv3N5arrow3ipc9ReadStats12num_messagesE"></span><span id="_CPPv2N5arrow3ipc9ReadStats12num_messagesE"></span><span id="arrow::ipc::ReadStats::num_messages__int64_t"></span><span class="target" id="structarrow_1_1ipc_1_1_read_stats_1a831c5940243fe2f5db6055d1c2693b0e"></span>int64_t <code class="sig-name descname">num_messages</code> = 0<a class="headerlink" href="#_CPPv4N5arrow3ipc9ReadStats12num_messagesE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Number of IPC messages read. </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc9ReadStats18num_record_batchesE">
<span id="_CPPv3N5arrow3ipc9ReadStats18num_record_batchesE"></span><span id="_CPPv2N5arrow3ipc9ReadStats18num_record_batchesE"></span><span id="arrow::ipc::ReadStats::num_record_batches__int64_t"></span><span class="target" id="structarrow_1_1ipc_1_1_read_stats_1a1985ac978e931ee853b6ad36b442679e"></span>int64_t <code class="sig-name descname">num_record_batches</code> = 0<a class="headerlink" href="#_CPPv4N5arrow3ipc9ReadStats18num_record_batchesE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Number of record batches read. </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc9ReadStats22num_dictionary_batchesE">
<span id="_CPPv3N5arrow3ipc9ReadStats22num_dictionary_batchesE"></span><span id="_CPPv2N5arrow3ipc9ReadStats22num_dictionary_batchesE"></span><span id="arrow::ipc::ReadStats::num_dictionary_batches__int64_t"></span><span class="target" id="structarrow_1_1ipc_1_1_read_stats_1ab31b8bd214938ee8ed08ecdba237715c"></span>int64_t <code class="sig-name descname">num_dictionary_batches</code> = 0<a class="headerlink" href="#_CPPv4N5arrow3ipc9ReadStats22num_dictionary_batchesE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Number of dictionary batches read. </p>
<p>Note: num_dictionary_batches &gt;= num_dictionary_deltas + num_replaced_dictionaries </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc9ReadStats21num_dictionary_deltasE">
<span id="_CPPv3N5arrow3ipc9ReadStats21num_dictionary_deltasE"></span><span id="_CPPv2N5arrow3ipc9ReadStats21num_dictionary_deltasE"></span><span id="arrow::ipc::ReadStats::num_dictionary_deltas__int64_t"></span><span class="target" id="structarrow_1_1ipc_1_1_read_stats_1a97cddf894f39f4b708353786314641dd"></span>int64_t <code class="sig-name descname">num_dictionary_deltas</code> = 0<a class="headerlink" href="#_CPPv4N5arrow3ipc9ReadStats21num_dictionary_deltasE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Number of dictionary deltas read. </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc9ReadStats25num_replaced_dictionariesE">
<span id="_CPPv3N5arrow3ipc9ReadStats25num_replaced_dictionariesE"></span><span id="_CPPv2N5arrow3ipc9ReadStats25num_replaced_dictionariesE"></span><span id="arrow::ipc::ReadStats::num_replaced_dictionaries__int64_t"></span><span class="target" id="structarrow_1_1ipc_1_1_read_stats_1afaa0eeffe0b58e206e7d710726e566d2"></span>int64_t <code class="sig-name descname">num_replaced_dictionaries</code> = 0<a class="headerlink" href="#_CPPv4N5arrow3ipc9ReadStats25num_replaced_dictionariesE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Number of replaced dictionaries (i.e. </p>
<p>where a dictionary batch replaces an existing dictionary with an unrelated new dictionary). </p>
</dd></dl>

</div>
</dd></dl>

</div>
</div>
<div class="section" id="writing-ipc-streams-and-files">
<h2><a class="toc-backref" href="#id8">Writing IPC streams and files</a><a class="headerlink" href="#writing-ipc-streams-and-files" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id9">Blocking API</a><a class="headerlink" href="#id1" title="Permalink to this headline">Â¶</a></h3>
<p>The IPC stream format is only optionally terminated, whereas the IPC file format
must include a terminating footer. Thus a writer of the IPC file format must be
explicitly finalized with <a class="reference internal" href="#_CPPv4N5arrow3ipc17RecordBatchWriter5CloseEv" title="arrow::ipc::RecordBatchWriter::Close"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">Close()</span></code></a> or the resulting
file will be corrupt.</p>
<dl class="cpp function">
<dt id="_CPPv416MakeStreamWriterPN2io12OutputStreamERKNSt10shared_ptrI6SchemaEERK15IpcWriteOptions">
<span id="_CPPv316MakeStreamWriterPN2io12OutputStreamERKNSt10shared_ptrI6SchemaEERK15IpcWriteOptions"></span><span id="_CPPv216MakeStreamWriterPN2io12OutputStreamERKNSt10shared_ptrI6SchemaEERK15IpcWriteOptions"></span><span id="MakeStreamWriter__io::OutputStreamP.std::shared_ptr:Schema:CR.IpcWriteOptionsCR"></span><span class="target" id="group__record-batch-writer-factories_1ga2b514aa25a5d0954b026dd7bd3b973f4"></span>Result&lt;std::shared_ptr&lt;RecordBatchWriter&gt;&gt; <code class="sig-name descname">MakeStreamWriter</code><span class="sig-paren">(</span>io::OutputStream *<em>sink</em>, <em class="property">const</em> std::shared_ptr&lt;Schema&gt; &amp;<em>schema</em>, <em class="property">const</em> IpcWriteOptions &amp;<em>options</em> = IpcWriteOptions::Defaults()<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv416MakeStreamWriterPN2io12OutputStreamERKNSt10shared_ptrI6SchemaEERK15IpcWriteOptions" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Create a new IPC stream writer from stream sink and schema. </p>
<p>User is responsible for closing the actual OutputStream.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="support.html#classarrow_1_1_result"><span class="std std-ref">Result</span></a>&lt;std::shared_ptr&lt;RecordBatchWriter&gt;&gt; </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">sink</span></code>: output stream to write to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">schema</span></code>: the schema of the record batches to be written </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">options</span></code>: options for serialization </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv416MakeStreamWriterNSt10shared_ptrIN2io12OutputStreamEEERKNSt10shared_ptrI6SchemaEERK15IpcWriteOptions">
<span id="_CPPv316MakeStreamWriterNSt10shared_ptrIN2io12OutputStreamEEERKNSt10shared_ptrI6SchemaEERK15IpcWriteOptions"></span><span id="_CPPv216MakeStreamWriterNSt10shared_ptrIN2io12OutputStreamEEERKNSt10shared_ptrI6SchemaEERK15IpcWriteOptions"></span><span id="MakeStreamWriter__std::shared_ptr:io::OutputStream:.std::shared_ptr:Schema:CR.IpcWriteOptionsCR"></span><span class="target" id="group__record-batch-writer-factories_1ga3a85310e2402e59650cc7b13f7989a51"></span>Result&lt;std::shared_ptr&lt;RecordBatchWriter&gt;&gt; <code class="sig-name descname">MakeStreamWriter</code><span class="sig-paren">(</span>std::shared_ptr&lt;io::OutputStream&gt; <em>sink</em>, <em class="property">const</em> std::shared_ptr&lt;Schema&gt; &amp;<em>schema</em>, <em class="property">const</em> IpcWriteOptions &amp;<em>options</em> = IpcWriteOptions::Defaults()<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv416MakeStreamWriterNSt10shared_ptrIN2io12OutputStreamEEERKNSt10shared_ptrI6SchemaEERK15IpcWriteOptions" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Create a new IPC stream writer from stream sink and schema. </p>
<p>User is responsible for closing the actual OutputStream.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="support.html#classarrow_1_1_result"><span class="std std-ref">Result</span></a>&lt;std::shared_ptr&lt;RecordBatchWriter&gt;&gt; </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">sink</span></code>: output stream to write to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">schema</span></code>: the schema of the record batches to be written </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">options</span></code>: options for serialization </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv414MakeFileWriterPN2io12OutputStreamERKNSt10shared_ptrI6SchemaEERK15IpcWriteOptionsRKNSt10shared_ptrIK16KeyValueMetadataEE">
<span id="_CPPv314MakeFileWriterPN2io12OutputStreamERKNSt10shared_ptrI6SchemaEERK15IpcWriteOptionsRKNSt10shared_ptrIK16KeyValueMetadataEE"></span><span id="_CPPv214MakeFileWriterPN2io12OutputStreamERKNSt10shared_ptrI6SchemaEERK15IpcWriteOptionsRKNSt10shared_ptrIK16KeyValueMetadataEE"></span><span id="MakeFileWriter__io::OutputStreamP.std::shared_ptr:Schema:CR.IpcWriteOptionsCR.std::shared_ptr:KeyValueMetadataC:CR"></span><span class="target" id="group__record-batch-writer-factories_1gaa2cfff8a11418dcdd6bb3a6ce94b3344"></span>Result&lt;std::shared_ptr&lt;RecordBatchWriter&gt;&gt; <code class="sig-name descname">MakeFileWriter</code><span class="sig-paren">(</span>io::OutputStream *<em>sink</em>, <em class="property">const</em> std::shared_ptr&lt;Schema&gt; &amp;<em>schema</em>, <em class="property">const</em> IpcWriteOptions &amp;<em>options</em> = IpcWriteOptions::Defaults(), <em class="property">const</em> std::shared_ptr&lt;<em class="property">const</em> KeyValueMetadata&gt; &amp;<em>metadata</em> = NULLPTR<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv414MakeFileWriterPN2io12OutputStreamERKNSt10shared_ptrI6SchemaEERK15IpcWriteOptionsRKNSt10shared_ptrIK16KeyValueMetadataEE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Create a new IPC file writer from stream sink and schema. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="support.html#classarrow_1_1_result"><span class="std std-ref">Result</span></a>&lt;std::shared_ptr&lt;RecordBatchWriter&gt;&gt; </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">sink</span></code>: output stream to write to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">schema</span></code>: the schema of the record batches to be written </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">options</span></code>: options for serialization, optional </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">metadata</span></code>: custom metadata for File Footer, optional </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv414MakeFileWriterNSt10shared_ptrIN2io12OutputStreamEEERKNSt10shared_ptrI6SchemaEERK15IpcWriteOptionsRKNSt10shared_ptrIK16KeyValueMetadataEE">
<span id="_CPPv314MakeFileWriterNSt10shared_ptrIN2io12OutputStreamEEERKNSt10shared_ptrI6SchemaEERK15IpcWriteOptionsRKNSt10shared_ptrIK16KeyValueMetadataEE"></span><span id="_CPPv214MakeFileWriterNSt10shared_ptrIN2io12OutputStreamEEERKNSt10shared_ptrI6SchemaEERK15IpcWriteOptionsRKNSt10shared_ptrIK16KeyValueMetadataEE"></span><span id="MakeFileWriter__std::shared_ptr:io::OutputStream:.std::shared_ptr:Schema:CR.IpcWriteOptionsCR.std::shared_ptr:KeyValueMetadataC:CR"></span><span class="target" id="group__record-batch-writer-factories_1ga69581a387ad6bfa8e66d7be8d725ddfd"></span>Result&lt;std::shared_ptr&lt;RecordBatchWriter&gt;&gt; <code class="sig-name descname">MakeFileWriter</code><span class="sig-paren">(</span>std::shared_ptr&lt;io::OutputStream&gt; <em>sink</em>, <em class="property">const</em> std::shared_ptr&lt;Schema&gt; &amp;<em>schema</em>, <em class="property">const</em> IpcWriteOptions &amp;<em>options</em> = IpcWriteOptions::Defaults(), <em class="property">const</em> std::shared_ptr&lt;<em class="property">const</em> KeyValueMetadata&gt; &amp;<em>metadata</em> = NULLPTR<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv414MakeFileWriterNSt10shared_ptrIN2io12OutputStreamEEERKNSt10shared_ptrI6SchemaEERK15IpcWriteOptionsRKNSt10shared_ptrIK16KeyValueMetadataEE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Create a new IPC file writer from stream sink and schema. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="support.html#classarrow_1_1_result"><span class="std std-ref">Result</span></a>&lt;std::shared_ptr&lt;RecordBatchWriter&gt;&gt; </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">sink</span></code>: output stream to write to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">schema</span></code>: the schema of the record batches to be written </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">options</span></code>: options for serialization, optional </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">metadata</span></code>: custom metadata for File Footer, optional </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp class">
<dt id="_CPPv4N5arrow3ipc17RecordBatchWriterE">
<span id="_CPPv3N5arrow3ipc17RecordBatchWriterE"></span><span id="_CPPv2N5arrow3ipc17RecordBatchWriterE"></span><span id="arrow::ipc::RecordBatchWriter"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_writer"></span><em class="property">class </em><code class="sig-prename descclassname">arrow::ipc<code class="sig-prename descclassname">::</code></code><code class="sig-name descname">RecordBatchWriter</code><a class="headerlink" href="#_CPPv4N5arrow3ipc17RecordBatchWriterE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Abstract interface for writing a stream of record batches. </p>
<p>Subclassed by arrow::flight::MetadataRecordBatchWriter</p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="cpp function">
<dt id="_CPPv4N5arrow3ipc17RecordBatchWriter16WriteRecordBatchERK11RecordBatch">
<span id="_CPPv3N5arrow3ipc17RecordBatchWriter16WriteRecordBatchERK11RecordBatch"></span><span id="_CPPv2N5arrow3ipc17RecordBatchWriter16WriteRecordBatchERK11RecordBatch"></span><span id="arrow::ipc::RecordBatchWriter::WriteRecordBatch__RecordBatchCR"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_writer_1a9f8bf7d6a2fa74a05e345097aa171e6e"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="sig-name descname">WriteRecordBatch</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="table.html#_CPPv4N5arrow11RecordBatchE" title="arrow::RecordBatch">RecordBatch</a> &amp;<em>batch</em><span class="sig-paren">)</span> = 0<a class="headerlink" href="#_CPPv4N5arrow3ipc17RecordBatchWriter16WriteRecordBatchERK11RecordBatch" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Write a record batch to the stream. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a> </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">batch</span></code>: the record batch to write to the stream </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N5arrow3ipc17RecordBatchWriter10WriteTableERK5Table">
<span id="_CPPv3N5arrow3ipc17RecordBatchWriter10WriteTableERK5Table"></span><span id="_CPPv2N5arrow3ipc17RecordBatchWriter10WriteTableERK5Table"></span><span id="arrow::ipc::RecordBatchWriter::WriteTable__TableCR"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_writer_1ad1d588a01d6e03df40baa283d207d00c"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="sig-name descname">WriteTable</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="table.html#_CPPv4N5arrow5TableE" title="arrow::Table">Table</a> &amp;<em>table</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow3ipc17RecordBatchWriter10WriteTableERK5Table" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Write possibly-chunked table by creating sequence of record batches. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a> </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">table</span></code>: table to write </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N5arrow3ipc17RecordBatchWriter10WriteTableERK5Table7int64_t">
<span id="_CPPv3N5arrow3ipc17RecordBatchWriter10WriteTableERK5Table7int64_t"></span><span id="_CPPv2N5arrow3ipc17RecordBatchWriter10WriteTableERK5Table7int64_t"></span><span id="arrow::ipc::RecordBatchWriter::WriteTable__TableCR.int64_t"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_writer_1af1d2049d61c5d3e18ccdd3001d104982"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="sig-name descname">WriteTable</code><span class="sig-paren">(</span><em class="property">const</em> <a class="reference internal" href="table.html#_CPPv4N5arrow5TableE" title="arrow::Table">Table</a> &amp;<em>table</em>, int64_t <em>max_chunksize</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N5arrow3ipc17RecordBatchWriter10WriteTableERK5Table7int64_t" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Write <a class="reference internal" href="table.html#classarrow_1_1_table"><span class="std std-ref">Table</span></a> with a particular chunksize. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a> </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">table</span></code>: table to write </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">max_chunksize</span></code>: maximum chunk size for table chunks </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4N5arrow3ipc17RecordBatchWriter5CloseEv">
<span id="_CPPv3N5arrow3ipc17RecordBatchWriter5CloseEv"></span><span id="_CPPv2N5arrow3ipc17RecordBatchWriter5CloseEv"></span><span id="arrow::ipc::RecordBatchWriter::Close"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_writer_1ad1706dac64039b5e46bf03458d65ed1a"></span><a class="reference internal" href="support.html#_CPPv4N5arrow6StatusE" title="arrow::Status">Status</a> <code class="sig-name descname">Close</code><span class="sig-paren">(</span><span class="sig-paren">)</span> = 0<a class="headerlink" href="#_CPPv4N5arrow3ipc17RecordBatchWriter5CloseEv" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Perform any logic necessary to finish the stream. </p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p><a class="reference internal" href="support.html#classarrow_1_1_status"><span class="std std-ref">Status</span></a> </p>
</dd>
</dl>
</p>
</dd></dl>

<dl class="cpp function">
<dt id="_CPPv4NK5arrow3ipc17RecordBatchWriter5statsEv">
<span id="_CPPv3NK5arrow3ipc17RecordBatchWriter5statsEv"></span><span id="_CPPv2NK5arrow3ipc17RecordBatchWriter5statsEv"></span><span id="arrow::ipc::RecordBatchWriter::statsC"></span><span class="target" id="classarrow_1_1ipc_1_1_record_batch_writer_1a2cf6f4aaf8852e7b51c754f95237c3d7"></span><a class="reference internal" href="#_CPPv4N5arrow3ipc10WriteStatsE" title="arrow::ipc::WriteStats">WriteStats</a> <code class="sig-name descname">stats</code><span class="sig-paren">(</span><span class="sig-paren">)</span> <em class="property">const</em> = 0<a class="headerlink" href="#_CPPv4NK5arrow3ipc17RecordBatchWriter5statsEv" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Return current write statistics. </p>
</dd></dl>

</div>
</dd></dl>

</div>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id10">Statistics</a><a class="headerlink" href="#id2" title="Permalink to this headline">Â¶</a></h3>
<dl class="cpp struct">
<dt id="_CPPv4N5arrow3ipc10WriteStatsE">
<span id="_CPPv3N5arrow3ipc10WriteStatsE"></span><span id="_CPPv2N5arrow3ipc10WriteStatsE"></span><span id="arrow::ipc::WriteStats"></span><span class="target" id="structarrow_1_1ipc_1_1_write_stats"></span><em class="property">struct </em><code class="sig-prename descclassname">arrow::ipc<code class="sig-prename descclassname">::</code></code><code class="sig-name descname">WriteStats</code><a class="headerlink" href="#_CPPv4N5arrow3ipc10WriteStatsE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc10WriteStats12num_messagesE">
<span id="_CPPv3N5arrow3ipc10WriteStats12num_messagesE"></span><span id="_CPPv2N5arrow3ipc10WriteStats12num_messagesE"></span><span id="arrow::ipc::WriteStats::num_messages__int64_t"></span><span class="target" id="structarrow_1_1ipc_1_1_write_stats_1ac0a5d4660cfdbcf8a7ffc9ed9b8ac2a2"></span>int64_t <code class="sig-name descname">num_messages</code> = 0<a class="headerlink" href="#_CPPv4N5arrow3ipc10WriteStats12num_messagesE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Number of IPC messages written. </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc10WriteStats18num_record_batchesE">
<span id="_CPPv3N5arrow3ipc10WriteStats18num_record_batchesE"></span><span id="_CPPv2N5arrow3ipc10WriteStats18num_record_batchesE"></span><span id="arrow::ipc::WriteStats::num_record_batches__int64_t"></span><span class="target" id="structarrow_1_1ipc_1_1_write_stats_1a30965e160abbff184dc43b60d5e910dc"></span>int64_t <code class="sig-name descname">num_record_batches</code> = 0<a class="headerlink" href="#_CPPv4N5arrow3ipc10WriteStats18num_record_batchesE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Number of record batches written. </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc10WriteStats22num_dictionary_batchesE">
<span id="_CPPv3N5arrow3ipc10WriteStats22num_dictionary_batchesE"></span><span id="_CPPv2N5arrow3ipc10WriteStats22num_dictionary_batchesE"></span><span id="arrow::ipc::WriteStats::num_dictionary_batches__int64_t"></span><span class="target" id="structarrow_1_1ipc_1_1_write_stats_1af2eb900815d2aaecdd432c5f82521d3f"></span>int64_t <code class="sig-name descname">num_dictionary_batches</code> = 0<a class="headerlink" href="#_CPPv4N5arrow3ipc10WriteStats22num_dictionary_batchesE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Number of dictionary batches written. </p>
<p>Note: num_dictionary_batches &gt;= num_dictionary_deltas + num_replaced_dictionaries </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc10WriteStats21num_dictionary_deltasE">
<span id="_CPPv3N5arrow3ipc10WriteStats21num_dictionary_deltasE"></span><span id="_CPPv2N5arrow3ipc10WriteStats21num_dictionary_deltasE"></span><span id="arrow::ipc::WriteStats::num_dictionary_deltas__int64_t"></span><span class="target" id="structarrow_1_1ipc_1_1_write_stats_1a6af4385abbf241efa18fd4412f633b62"></span>int64_t <code class="sig-name descname">num_dictionary_deltas</code> = 0<a class="headerlink" href="#_CPPv4N5arrow3ipc10WriteStats21num_dictionary_deltasE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Number of dictionary deltas written. </p>
</dd></dl>

<dl class="cpp var">
<dt id="_CPPv4N5arrow3ipc10WriteStats25num_replaced_dictionariesE">
<span id="_CPPv3N5arrow3ipc10WriteStats25num_replaced_dictionariesE"></span><span id="_CPPv2N5arrow3ipc10WriteStats25num_replaced_dictionariesE"></span><span id="arrow::ipc::WriteStats::num_replaced_dictionaries__int64_t"></span><span class="target" id="structarrow_1_1ipc_1_1_write_stats_1a2b661ba006fdee4583331605e14c5a1a"></span>int64_t <code class="sig-name descname">num_replaced_dictionaries</code> = 0<a class="headerlink" href="#_CPPv4N5arrow3ipc10WriteStats25num_replaced_dictionariesE" title="Permalink to this definition">Â¶</a><br /></dt>
<dd><p>Number of replaced dictionaries (i.e. </p>
<p>where a dictionary batch replaces an existing dictionary with an unrelated new dictionary). </p>
</dd></dl>

</div>
</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="formats.html" class="btn btn-neutral float-right" title="File Formats" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="io.html" class="btn btn-neutral float-left" title="Input / output" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2016-2019 Apache Software Foundation.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107500873-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-107500873-1');
</script>


</body>
</html>