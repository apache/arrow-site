<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Installing the Arrow Package on Linux • Arrow R Package</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><script src="../extra.js"></script><meta property="og:title" content="Installing the Arrow Package on Linux">
<meta property="og:description" content="arrow">
<meta property="og:image" content="https://arrow.apache.org/img/arrow-logo_horizontal_black-txt_white-bg.png">
<meta property="og:image:alt" content="Apache Arrow logo, displaying the triple chevron image adjacent to the text">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@apachearrow">
<meta name="twitter:site" content="@apachearrow">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-107500873-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-107500873-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Arrow R Package</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">8.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="https://arrow.apache.org/" class="external-link">❯❯❯</a>
</li>
<li>
  <a href="../articles/arrow.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/install.html">Installing the Arrow Package on Linux</a>
    </li>
    <li>
      <a href="../articles/dataset.html">Working with Arrow Datasets and dplyr</a>
    </li>
    <li>
      <a href="../articles/fs.html">Working with Cloud Storage (S3)</a>
    </li>
    <li>
      <a href="../articles/python.html">Apache Arrow in Python and R with reticulate</a>
    </li>
    <li>
      <a href="../articles/flight.html">Connecting to Flight RPC Servers</a>
    </li>
    <li>
      <a href="../articles/developing.html">Arrow R Developer Guide</a>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Developers</a>
      <ul class="dropdown-menu" role="menu">
<li>
          <a href="../articles/developers/setup.html">Developer Environment Setup</a>
        </li>
        <li>
          <a href="../articles/developers/workflow.html">Common Workflow Tasks</a>
        </li>
        <li>
          <a href="../articles/developers/debugging.html">Debugging</a>
        </li>
        <li>
          <a href="../articles/developers/install_details.html">Package Installation Details</a>
        </li>
        <li>
          <a href="../articles/developers/docker.html">Docker</a>
        </li>
        <li>
          <a href="../articles/developers/bindings.html">Writing Bindings</a>
        </li>
      </ul>
</li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Project docs
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://arrow.apache.org/docs/format/Columnar.html" class="external-link">Specification</a>
    </li>
    <li>
      <a href="https://arrow.apache.org/docs/c_glib" class="external-link">C GLib</a>
    </li>
    <li>
      <a href="https://arrow.apache.org/docs/cpp" class="external-link">C++</a>
    </li>
    <li>
      <a href="https://arrow.apache.org/docs/java" class="external-link">Java</a>
    </li>
    <li>
      <a href="https://arrow.apache.org/docs/js" class="external-link">JavaScript</a>
    </li>
    <li>
      <a href="https://arrow.apache.org/docs/python" class="external-link">Python</a>
    </li>
    <li>
      <a href="../index.html">R</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Installing the Arrow Package on Linux</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/apache/arrow/blob/master/r/vignettes/install.Rmd" class="external-link"><code>vignettes/install.Rmd</code></a></small>
      <div class="hidden name"><code>install.Rmd</code></div>

    </div>

    
    
<p>The Apache Arrow project is implemented in multiple languages, and the R package depends on the Arrow C++ library (referred to from here on as libarrow). This means that when you install arrow, you need both the R and C++ versions. If you install arrow from CRAN on a machine running Windows or MacOS, when you call <code>install.packages("arrow")</code>, a precompiled binary containing both the R package and libarrow will be downloaded. However, CRAN does not host R package binaries for Linux, and so you must choose from one of the alternative approaches.</p>
<p>This vignette outlines the recommend approaches to installing arrow on Linux, starting from the simplest and least customisable to the most complex but with more flexbility to customise your installation.</p>
<p>The intended audience for this document is arrow R package <em>users</em> on Linux, and not Arrow <em>developers</em>. If you’re contributing to the Arrow project, see <code><a href="../articles/developing.html">vignette("developing", package = "arrow")</a></code> for resources to help you on set up your development environment. You can also find a more detailed discussion of the code run during the installation process in the <a href="https://arrow.apache.org/docs/r/articles/developers/install_details.html">developers’ installation docs</a></p>
<blockquote>
<p>Having trouble installing arrow? See the “Troubleshooting” section below.</p>
</blockquote>
<div class="section level2">
<h2 id="installing-a-release-version-the-easy-way">Installing a release version (the easy way)<a class="anchor" aria-label="anchor" href="#installing-a-release-version-the-easy-way"></a>
</h2>
<div class="section level3">
<h3 id="method-1---installation-with-a-precompiled-libarrow-binary">Method 1 - Installation with a precompiled libarrow binary<a class="anchor" aria-label="anchor" href="#method-1---installation-with-a-precompiled-libarrow-binary"></a>
</h3>
<p>As mentioned above, on macOS and Windows, when you run <code>install.packages("arrow")</code>, and install arrow from CRAN, you get an R binary package that contains a precompiled version of libarrow, though CRAN does not host binary packages for Linux. This means that the default behaviour when you run <code><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages()</a></code> on Linux is to retrieve the source version of the R package that has to be compiled locally, including building libarrow from source. See method 2 below for details of this.</p>
<p>For a faster installation, we recommend that you instead use one of the methods below for installing arrow with a precompiled libarrow binary.</p>
<div class="section level4">
<h4 id="method-1a---binary-r-package-containing-libarrow-binary-via-rspmconda">Method 1a - Binary R package containing libarrow binary via RSPM/conda<a class="anchor" aria-label="anchor" href="#method-1a---binary-r-package-containing-libarrow-binary-via-rspmconda"></a>
</h4>
<p><img src="r_binary_libarrow_binary.png" title="Graphic showing R and C++ logo inside the package icon" alt="Graphic showing R and C++ logo inside the package icon" width="30%"></p>
<p>If you want a quicker installation process, and by default a more fully-featured build, you could install arrow from <a href="https://packagemanager.rstudio.com/client/#/" class="external-link">RStudio’s public package manager</a>, which hosts binaries for both Windows and Linux.</p>
<p>For example, if you are using Ubuntu 20.04 (Focal):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"arrow"</span>, repos <span class="op">=</span> <span class="st">"https://packagemanager.rstudio.com/all/__linux__/focal/latest"</span><span class="op">)</span></code></pre></div>
<p>For other Linux distributions, to get the relevant URL, you can visit <a href="https://packagemanager.rstudio.com/client/#/repos/1/overview" class="external-link">the RSPM site</a>, click on ‘binary’, and select your preferred distribution.</p>
<p>Similarly, if you use <code>conda</code> to manage your R environment, you can get the latest official release of the R package including libarrow via:</p>
<pre class="shell"><code>conda install -c conda-forge --strict-channel-priority r-arrow</code></pre>
</div>
<div class="section level4">
<h4 id="method-1b---r-source-package-with-libarrow-binary">Method 1b - R source package with libarrow binary<a class="anchor" aria-label="anchor" href="#method-1b---r-source-package-with-libarrow-binary"></a>
</h4>
<p><img src="r_source_libarrow_binary.png" title="Graphic showing R logo in folder icon, then a plus sign, then C++ logo inside the package icon" alt="Graphic showing R logo in folder icon, then a plus sign, then C++ logo inside the package icon" width="50%"></p>
<p>Another way of achieving faster installation with all key features enabled is to use our self-hosted libarrow binaries. You can do this by setting the <code>NOT_CRAN</code> environment variable before you call <code><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span><span class="st">"NOT_CRAN"</span> <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"arrow"</span><span class="op">)</span></code></pre></div>
<p>This installs the source version of the R package, but during the installation process will check for compatible libarrow binaries that we host and use those if available. If no binary is available or can’t be found, then this option falls back onto method 2 below, but results in a more fully-featured build than default.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="installing-libarrow-dependencies">Installing libarrow dependencies<a class="anchor" aria-label="anchor" href="#installing-libarrow-dependencies"></a>
</h2>
<p>When you install libarrow, its dependencies will be automatically downloaded.<br>
The environment variable <code>ARROW_DEPENDENCY_SOURCE</code> controls whether the libarrow installation also downloads or installs all dependencies (when set to <code>BUNDLED</code>), uses only system-installed dependencies (when set to <code>SYSTEM</code>) or checks system-installed dependencies first and only installs dependencies which aren’t already present (when set to <code>AUTO</code>).</p>
<p>These dependencies vary by platform; however, if you wish to install these yourself prior to libarrow installation, we recommend that you take a look at the <a href="https://github.com/apache/arrow/tree/master/ci/docker" class="external-link">docker file for whichever of our CI builds</a> (the ones ending in “cpp” are for building Arrow’s C++ libaries aka libarrow) corresponds most closely to your setup. This will contain the most up-to-date information about dependencies and minimum versions.</p>
<div class="section level3">
<h3 id="dependencies-for-s3-support">Dependencies for S3 support<a class="anchor" aria-label="anchor" href="#dependencies-for-s3-support"></a>
</h3>
<p>The arrow package allows you to work with data in AWS S3 or in other cloud storage system that emulate S3. However, support for working with S3 is not enabled in the default build, and it has additional system requirements. To enable it, set the environment variable <code>LIBARROW_MINIMAL=false</code> or <code>NOT_CRAN=true</code> to choose the full-featured build, or more selectively set <code>ARROW_S3=ON</code>. You also need the following system dependencies:</p>
<ul>
<li>
<code>gcc</code> &gt;= 4.9 or <code>clang</code> &gt;= 3.3; note that the default compiler on CentOS 7 is gcc 4.8.5, which is not sufficient</li>
<li>CURL: install <code>libcurl-devel</code> (rpm) or <code>libcurl4-openssl-dev</code> (deb)</li>
<li>OpenSSL &gt;= 1.0.2: install <code>openssl-devel</code> (rpm) or <code>libssl-dev</code> (deb)</li>
</ul>
<p>The prebuilt libarrow binaries come with S3 support enabled, so you will need to meet these system requirements in order to use them–the package will not install without them (and will error with a message that explains this).If you’re building everything from source, the install script will check for the presence of these dependencies and turn off S3 support in the build if the prerequisites are not met–installation will succeed but without S3 functionality. If afterwards you install the missing system requirements, you’ll need to reinstall the package in order to enable S3 support.</p>
</div>
</div>
<div class="section level2">
<h2 id="installing-a-release-version-the-less-easy-way">Installing a release version (the less easy way)<a class="anchor" aria-label="anchor" href="#installing-a-release-version-the-less-easy-way"></a>
</h2>
<div class="section level3">
<h3 id="method-2---installing-an-r-source-package-and-building-libarrow-from-source">Method 2 - Installing an R source package and building libarrow from source<a class="anchor" aria-label="anchor" href="#method-2---installing-an-r-source-package-and-building-libarrow-from-source"></a>
</h3>
<p><img src="r_source_libarrow_source.png" title="Graphic showing R inside a folder icon, then a plus sign, then C++ logo inside a folder icon" alt="Graphic showing R inside a folder icon, then a plus sign, then C++ logo inside a folder icon" width="50%"></p>
<p>Generally compiling and installing R packages with C++ dependencies, requires either installing system packages, which you may not have privileges to do, or building the C++ dependencies separately, which introduces all sorts of additional ways for things to go wrong, which is why we recommend method 1 above.</p>
<p>However, if you wish to fine-tune or customise your Linux installation, the instructions in this section explain how to do that.</p>
<div class="section level4">
<h4 id="basic-configuration-for-building-from-source-with-fully-featured-installation">Basic configuration for building from source with fully featured installation<a class="anchor" aria-label="anchor" href="#basic-configuration-for-building-from-source-with-fully-featured-installation"></a>
</h4>
<p>If you wish to install libarrow from source instead of looking for pre-compiled binaries, you can set the <code>LIBARROW_BINARY</code> variable.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span><span class="st">"LIBARROW_BINARY"</span> <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p>By default, this is set to <code>TRUE</code>, and so libarrow will only be built from source if this environment variable is set to <code>FALSE</code> or no compatible binary for your OS can be found.</p>
<p>When compiling libarrow from source, you have the power to really fine-tune which features to install. You can set the environment variable <code>LIBARROW_MINIMAL</code> to <code>FALSE</code> to enable a more full-featured build including S3 support and alternative memory allocators.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span><span class="st">"LIBARROW_MINIMAL"</span> <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p>By default this variable is unset; if set to <code>TRUE</code> a trimmed-down version of arrow is installed with many features disabled.</p>
<p>Note that in this guide, you will have seen us mention the environment variable <code>NOT_CRAN</code> - this is a convenience variable, which when set to <code>TRUE</code>, automatically sets <code>LIBARROW_MINIMAL</code> to <code>FALSE</code> and <code>LIBARROW_BINARY</code> to <code>TRUE</code>.</p>
<p>Building libarrow from source requires more time and resources than installing a binary. We recommend that you set the environment variable <code>ARROW_R_DEV</code> to <code>TRUE</code> for more verbose output during the installation process if anything goes wrong.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span><span class="st">"ARROW_R_DEV"</span> <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p>Once you have set these variables, call <code><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages()</a></code> to install arrow using this configuration.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"arrow"</span><span class="op">)</span></code></pre></div>
<p>The section below discusses environment variables you can set before calling <code>install.packages("arrow")</code> to build from source and customise your configuration.</p>
</div>
<div class="section level4">
<h4 id="advanced-configuration-for-building-from-source">Advanced configuration for building from source<a class="anchor" aria-label="anchor" href="#advanced-configuration-for-building-from-source"></a>
</h4>
<p>In this section, we describe how to fine-tune your installation at a more granular level.</p>
<div class="section level5">
<h5 id="libarrow-configuration">libarrow configuration<a class="anchor" aria-label="anchor" href="#libarrow-configuration"></a>
</h5>
<p>Some features are optional when you build Arrow from source - you can configure whether these components are built via the use of environment variables. The names of the environment variables which control these features and their default values are shown below.</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th>Name</th>
<th>Description</th>
<th align="center">Default Value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>ARROW_S3</code></td>
<td>S3 support (if dependencies are met)*</td>
<td align="center"><code>OFF</code></td>
</tr>
<tr class="even">
<td><code>ARROW_JEMALLOC</code></td>
<td>The <code>jemalloc</code> memory allocator</td>
<td align="center"><code>ON</code></td>
</tr>
<tr class="odd">
<td><code>ARROW_MIMALLOC</code></td>
<td>The <code>mimalloc</code> memory allocator</td>
<td align="center"><code>ON</code></td>
</tr>
<tr class="even">
<td><code>ARROW_PARQUET</code></td>
<td></td>
<td align="center"><code>ON</code></td>
</tr>
<tr class="odd">
<td><code>ARROW_DATASET</code></td>
<td></td>
<td align="center"><code>ON</code></td>
</tr>
<tr class="even">
<td><code>ARROW_JSON</code></td>
<td>The JSON parsing library</td>
<td align="center"><code>ON</code></td>
</tr>
<tr class="odd">
<td><code>ARROW_WITH_RE2</code></td>
<td>The RE2 regular expression library, used in some string compute functions</td>
<td align="center"><code>ON</code></td>
</tr>
<tr class="even">
<td><code>ARROW_WITH_UTF8PROC</code></td>
<td>The UTF8Proc string library, used in many other string compute functions</td>
<td align="center"><code>ON</code></td>
</tr>
<tr class="odd">
<td><code>ARROW_WITH_BROTLI</code></td>
<td>Compression algorithm</td>
<td align="center"><code>ON</code></td>
</tr>
<tr class="even">
<td><code>ARROW_WITH_BZ2</code></td>
<td>Compression algorithm</td>
<td align="center"><code>ON</code></td>
</tr>
<tr class="odd">
<td><code>ARROW_WITH_LZ4</code></td>
<td>Compression algorithm</td>
<td align="center"><code>ON</code></td>
</tr>
<tr class="even">
<td><code>ARROW_WITH_SNAPPY</code></td>
<td>Compression algorithm</td>
<td align="center"><code>ON</code></td>
</tr>
<tr class="odd">
<td><code>ARROW_WITH_ZLIB</code></td>
<td>Compression algorithm</td>
<td align="center"><code>ON</code></td>
</tr>
<tr class="even">
<td><code>ARROW_WITH_ZSTD</code></td>
<td>Compression algorithm</td>
<td align="center"><code>ON</code></td>
</tr>
</tbody>
</table>
</div>
<div class="section level5">
<h5 id="r-package-configuration">R package configuration<a class="anchor" aria-label="anchor" href="#r-package-configuration"></a>
</h5>
<p>There are a number of other variables that affect the <code>configure</code> script and the bundled build script. All boolean variables are case-insensitive.</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th>Name</th>
<th>Description</th>
<th align="center">Default</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>LIBARROW_BUILD</code></td>
<td>Allow building from source</td>
<td align="center"><code>true</code></td>
</tr>
<tr class="even">
<td><code>LIBARROW_BINARY</code></td>
<td>Try to install <code>libarrow</code> binary instead of building from source</td>
<td align="center"><code>true</code></td>
</tr>
<tr class="odd">
<td><code>LIBARROW_MINIMAL</code></td>
<td>Build with minimal features enabled</td>
<td align="center">(unset)</td>
</tr>
<tr class="even">
<td><code>NOT_CRAN</code></td>
<td>Set <code>LIBARROW_BINARY=true</code> and <code>LIBARROW_MINIMAL=false</code>
</td>
<td align="center"><code>false</code></td>
</tr>
<tr class="odd">
<td><code>ARROW_R_DEV</code></td>
<td>More verbose messaging and regenerates some code</td>
<td align="center"><code>false</code></td>
</tr>
<tr class="even">
<td><code>ARROW_USE_PKG_CONFIG</code></td>
<td>Use <code>pkg-config</code> to search for <code>libarrow</code> install</td>
<td align="center"><code>true</code></td>
</tr>
<tr class="odd">
<td><code>LIBARROW_DEBUG_DIR</code></td>
<td>Directory to save source build logs</td>
<td align="center">(unset)</td>
</tr>
<tr class="even">
<td><code>CMAKE</code></td>
<td>Alternative CMake path</td>
<td align="center">(unset)</td>
</tr>
</tbody>
</table>
<p>See below for more in-depth explanations of these environment variables.</p>
<ul>
<li>
<code>LIBARROW_BINARY</code> : If set to <code>true</code>, the script will try to download a binary C++ library built for your operating system. You may also set it to some other string, a related “distro-version” that has binaries built that work for your OS. See the <a href="https://raw.githubusercontent.com/ursa-labs/arrow-r-nightly/master/linux/distro-map.csv" class="external-link">distro map</a> for compatible binaries and OSs. If no binary is found, installation will fall back to building C++ dependencies from source.</li>
<li>
<code>LIBARROW_BUILD</code> : If set to <code>false</code>, the build script will not attempt to build the C++ from source. This means you will only get a working arrow R package if a prebuilt binary is found. Use this if you want to avoid compiling the C++ library, which may be slow and resource-intensive, and ensure that you only use a prebuilt binary.</li>
<li>
<code>LIBARROW_MINIMAL</code> : If set to <code>false</code>, the build script will enable some optional features, including S3 support and additional alternative memory allocators. This will increase the source build time but results in a more fully functional library. If set to <code>true</code> turns off Parquet, Datasets, compression libraries, and other optional features. This is not commonly used but may be helpful if needing to compile on a platform that does not support these features, e.g. Solaris.</li>
<li>
<code>NOT_CRAN</code> : If this variable is set to <code>true</code>, as the <code>devtools</code> package does, the build script will set <code>LIBARROW_BINARY=true</code> and <code>LIBARROW_MINIMAL=false</code> unless those environment variables are already set. This provides for a more complete and fast installation experience for users who already have <code>NOT_CRAN=true</code> as part of their workflow, without requiring additional environment variables to be set.</li>
<li>
<code>ARROW_R_DEV</code> : If set to <code>true</code>, more verbose messaging will be printed in the build script. <code>arrow::install_arrow(verbose = TRUE)</code> sets this. This variable also is needed if you’re modifying C++ code in the package: see the developer guide vignette.</li>
<li>
<code>ARROW_USE_PKG_CONFIG</code>: If set to <code>false</code>, the configure script won’t look for Arrow libraries on your system and instead will look to download/build them. Use this if you have a version mismatch between installed system libraries and the version of the R package you’re installing.</li>
<li>
<code>LIBARROW_DEBUG_DIR</code> : If the C++ library building from source fails (<code>cmake</code>), there may be messages telling you to check some log file in the build directory. However, when the library is built during R package installation, that location is in a temp directory that is already deleted. To capture those logs, set this variable to an absolute (not relative) path and the log files will be copied there. The directory will be created if it does not exist.</li>
<li>
<code>CMAKE</code> : When building the C++ library from source, you can specify a <code>/path/to/cmake</code> to use a different version than whatever is found on the <code>$PATH</code>.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="install-the-nightly-build">Install the nightly build<a class="anchor" aria-label="anchor" href="#install-the-nightly-build"></a>
</h2>
<p>Daily development builds, which are not official releases, can be installed from the Ursa Labs repository:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>NOT_CRAN <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"arrow"</span>, repos <span class="op">=</span> <span class="st">"https://arrow-r-nightly.s3.amazonaws.com"</span><span class="op">)</span></code></pre></div>
<p>or for conda users via:</p>
<pre><code>conda install -c arrow-nightlies -c conda-forge --strict-channel-priority r-arrow</code></pre>
</div>
<div class="section level2">
<h2 id="install-from-git-repo">Install from git repo<a class="anchor" aria-label="anchor" href="#install-from-git-repo"></a>
</h2>
<p>You can also install the R package from a git checkout:</p>
<pre class="shell"><code>git clone https://github.com/apache/arrow
cd arrow/r
R CMD INSTALL .</code></pre>
<p>If you don’t already have libarrow on your system, when installing the R package from source, it will also download and build libarrow for you. See the section above on build environment variables for options for configuring the build source and enabled features.</p>
</div>
<div class="section level2">
<h2 id="installation-using-install_arrow">Installation using install_arrow()<a class="anchor" aria-label="anchor" href="#installation-using-install_arrow"></a>
</h2>
<p>The previous instructions are useful for a fresh arrow installation, but arrow provides the function <code><a href="../reference/install_arrow.html">install_arrow()</a></code>, which you can use if you:</p>
<ul>
<li>already have arrow installed and want to upgrade to a different version</li>
<li>want to install a development build</li>
<li>want to try to reinstall and fix issues with Linux C++ binaries</li>
</ul>
<p><code><a href="../reference/install_arrow.html">install_arrow()</a></code> provides some convenience wrappers around the various environment variables described below.</p>
<p>Although this function is part of the arrow package, it is also available as a standalone script, so you can access it for convenience without first installing the package:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/apache/arrow/master/r/R/install-arrow.R"</span><span class="op">)</span></code></pre></div>
<div class="section level3">
<h3 id="install-the-latest-release">Install the latest release<a class="anchor" aria-label="anchor" href="#install-the-latest-release"></a>
</h3>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/install_arrow.html">install_arrow</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="install-the-nightly-build-1">Install the nightly build<a class="anchor" aria-label="anchor" href="#install-the-nightly-build-1"></a>
</h3>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/install_arrow.html">install_arrow</a></span><span class="op">(</span>nightly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="install-with-more-verbose-output-for-debugging-errors">Install with more verbose output for debugging errors<a class="anchor" aria-label="anchor" href="#install-with-more-verbose-output-for-debugging-errors"></a>
</h3>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/install_arrow.html">install_arrow</a></span><span class="op">(</span>verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><code><a href="../reference/install_arrow.html">install_arrow()</a></code> does not require environment variables to be set in order to satisfy C++ dependencies.</p>
<blockquote>
<p>Note that, unlike packages like <code>tensorflow</code>, <code>blogdown</code>, and others that require external dependencies, you do not need to run <code><a href="../reference/install_arrow.html">install_arrow()</a></code> after a successful arrow installation.</p>
</blockquote>
</div>
</div>
<div class="section level2">
<h2 id="offline-installation">Offline installation<a class="anchor" aria-label="anchor" href="#offline-installation"></a>
</h2>
<p>The <code>install-arrow.R</code> file also includes the <code><a href="../reference/create_package_with_all_dependencies.html">create_package_with_all_dependencies()</a></code> function. Normally, when installing on a computer with internet access, the build process will download third-party dependencies as needed. This function provides a way to download them in advance.</p>
<p>Doing so may be useful when installing Arrow on a computer without internet access. Note that Arrow <em>can</em> be installed on a computer without internet access without doing this, but many useful features will be disabled, as they depend on third-party components. More precisely, <code>arrow::arrow_info()$capabilities()</code> will be <code>FALSE</code> for every capability. One approach to add more capabilities in an offline install is to prepare a package with pre-downloaded dependencies. The <code><a href="../reference/create_package_with_all_dependencies.html">create_package_with_all_dependencies()</a></code> function does this preparation.</p>
<p>If you’re using binary packages you shouldn’t need to follow these steps. You should download the appropriate binary from your package repository, transfer that to the offline computer, and install that. Any OS can create the source bundle, but it cannot be installed on Windows. (Instead, use a standard Windows binary package.)</p>
<p>Note if you’re using RStudio Package Manager on Linux: If you still want to make a source bundle with this function, make sure to set the first repo in <code>options("repos")</code> to be a mirror that contains source packages (that is: something other than the RSPM binary mirror URLs).</p>
<div class="section level4">
<h4 id="step-1---using-a-computer-with-internet-access-pre-download-the-dependencies">Step 1 - Using a computer with internet access, pre-download the dependencies:<a class="anchor" aria-label="anchor" href="#step-1---using-a-computer-with-internet-access-pre-download-the-dependencies"></a>
</h4>
<ul>
<li>Install the arrow package <em>or</em> run <code>source("https://raw.githubusercontent.com/apache/arrow/master/r/R/install-arrow.R")</code>
</li>
<li>Run <code>create_package_with_all_dependencies("my_arrow_pkg.tar.gz")</code>
</li>
<li>Copy the newly created <code>my_arrow_pkg.tar.gz</code> to the computer without internet access</li>
</ul>
</div>
<div class="section level4">
<h4 id="step-2---on-the-computer-without-internet-access-install-the-prepared-package">Step 2 - On the computer without internet access, install the prepared package:<a class="anchor" aria-label="anchor" href="#step-2---on-the-computer-without-internet-access-install-the-prepared-package"></a>
</h4>
<ul>
<li>Install the arrow package from the copied file
<ul>
<li><code>install.packages("my_arrow_pkg.tar.gz", dependencies = c("Depends", "Imports", "LinkingTo"))</code></li>
<li>This installation will build from source, so <code>cmake</code> must be available</li>
</ul>
</li>
<li>Run <code><a href="../reference/arrow_info.html">arrow_info()</a></code> to check installed capabilities</li>
</ul>
<div class="section level5">
<h5 id="alternative-hands-on-approach">Alternative, hands-on approach<a class="anchor" aria-label="anchor" href="#alternative-hands-on-approach"></a>
</h5>
<ul>
<li>Download the dependency files (<code>cpp/thirdparty/download_dependencies.sh</code> may be helpful)</li>
<li>Copy the directory of dependencies to the offline computer</li>
<li>Create the environment variable <code>ARROW_THIRDPARTY_DEPENDENCY_DIR</code> on the offline computer, pointing to the copied directory.</li>
<li>Install the arrow package as usual.</li>
</ul>
</div>
</div>
</div>
<div class="section level2">
<h2 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h2>
<p>The intent is that <code>install.packages("arrow")</code> will just work and handle all C++ dependencies, but depending on your system, you may have better results if you tune one of several parameters. Here are some known complications and ways to address them.</p>
<div class="section level3">
<h3 id="package-failed-to-build-c-dependencies">Package failed to build C++ dependencies<a class="anchor" aria-label="anchor" href="#package-failed-to-build-c-dependencies"></a>
</h3>
<p>If you see a message like</p>
<pre><code>------------------------- NOTE ---------------------------
There was an issue preparing the Arrow C++ libraries.
See https://arrow.apache.org/docs/r/articles/install.html
---------------------------------------------------------</code></pre>
<p>in the output when the package fails to install, that means that installation failed to retrieve or build the libarrow version compatible with the current version of the R package.</p>
<p>Please check the “Known installation issues” below to see if any apply, and if none apply, set the environment variable <code>ARROW_R_DEV=TRUE</code> for more verbose output and try installing again. Then, please <a href="https://issues.apache.org/jira/projects/ARROW/issues" class="external-link">report an issue</a> and include the full installation output.</p>
</div>
<div class="section level3">
<h3 id="using-system-libraries">Using system libraries<a class="anchor" aria-label="anchor" href="#using-system-libraries"></a>
</h3>
<p>If a system library or other installed Arrow is found but it doesn’t match the R package version (for example, you have libarrow 1.0.0 on your system and are installing R package 2.0.0), it is likely that the R bindings will fail to compile. Because the Apache Arrow project is under active development, it is essential that versions of libarrow and the R package matches. When <code>install.packages("arrow")</code> has to download libarrow, the install script ensures that you fetch the libarrow version that corresponds to your R package version. However, if you are using a version of libarrow already on your system, version match isn’t guaranteed.</p>
<p>To fix version mismatch, you can either update your libarrow system packages to match the R package version, or set the environment variable <code>ARROW_USE_PKG_CONFIG=FALSE</code> to tell the configure script not to look for system version of libarrow. (The latter is the default of <code><a href="../reference/install_arrow.html">install_arrow()</a></code>.) System libarrow versions are available corresponding to all CRAN releases but not for nightly or dev versions, so depending on the R package version you’re installing, system libarrow version may not be an option.</p>
<p>Note also that once you have a working R package installation based on system (shared) libraries, if you update your system libarrow installation, you’ll need to reinstall the R package to match its version. Similarly, if you’re using libarrow system libraries, running <code><a href="https://rdrr.io/r/utils/update.packages.html" class="external-link">update.packages()</a></code> after a new release of the arrow package will likely fail unless you first update the libarrow system packages.</p>
</div>
<div class="section level3">
<h3 id="using-prebuilt-binaries">Using prebuilt binaries<a class="anchor" aria-label="anchor" href="#using-prebuilt-binaries"></a>
</h3>
<p>If the R package finds and downloads a prebuilt binary of libarrow, but then the arrow package can’t be loaded, perhaps with “undefined symbols” errors, please <a href="https://issues.apache.org/jira/projects/ARROW/issues" class="external-link">report an issue</a>. This is likely a compiler mismatch and may be resolvable by setting some environment variables to instruct R to compile the packages to match libarrow.</p>
<p>A workaround would be to set the environment variable <code>LIBARROW_BINARY=FALSE</code> and retry installation: this value instructs the package to build libarrow from source instead of downloading the prebuilt binary. That should guarantee that the compiler settings match.</p>
<p>If a prebuilt libarrow binary wasn’t found for your operating system but you think it should have been, check the logs for a message that says <code>*** Unable to identify current OS/version</code>, or a message that says <code>*** No C++ binaries found for</code> an invalid OS. If you see either, please <a href="https://issues.apache.org/jira/projects/ARROW/issues" class="external-link">report an issue</a>. You may also set the environment variable <code>ARROW_R_DEV=TRUE</code> for additional debug messages.</p>
<p>A workaround would be to set the environment variable <code>LIBARROW_BINARY</code> to a <code>distribution-version</code> that exists in the Ursa Labs repository. Setting <code>LIBARROW_BINARY</code> is also an option when there’s not an exact match for your OS but a similar version would work, such as if you’re on <code>ubuntu-18.10</code> and there’s only a binary for <code>ubuntu-18.04</code>.</p>
<p>If that workaround works for you, and you believe that it should work for everyone else too, you may propose <a href="https://github.com/ursa-labs/arrow-r-nightly/edit/master/linux/distro-map.csv" class="external-link">adding an entry to this lookup table</a>. This table is checked during the installation process and tells the script to use binaries built on a different operating system/version because they’re known to work.</p>
</div>
<div class="section level3">
<h3 id="building-libarrow-from-source">Building libarrow from source<a class="anchor" aria-label="anchor" href="#building-libarrow-from-source"></a>
</h3>
<p>If building libarrow from source fails, check the error message. (If you don’t see an error message, only the <code>----- NOTE -----</code>, set the environment variable <code>ARROW_R_DEV=TRUE</code> to increase verbosity and retry installation.) The install script should work everywhere, so if libarrow fails to compile, please <a href="https://issues.apache.org/jira/projects/ARROW/issues" class="external-link">report an issue</a> so that we can improve the script.</p>
</div>
<div class="section level3">
<h3 id="known-installation-issues">Known installation issues<a class="anchor" aria-label="anchor" href="#known-installation-issues"></a>
</h3>
<ul>
<li><p>On CentOS, if you are using a more modern <code>devtoolset</code>, you may need to set the environment variables <code>CC</code> and <code>CXX</code> either in the shell or in R’s <code>Makeconf</code>. For CentOS 7 and above, both the Arrow system packages and the C++ binaries for R are built with the default system compilers. If you want to use either of these and you have a <code>devtoolset</code> installed, set <code>CC=/usr/bin/gcc CXX=/usr/bin/g++</code> to use the system compilers instead of the <code>devtoolset</code>. Alternatively, if you want to build arrow with the newer <code>devtoolset</code> compilers, set both <code>ARROW_USE_PKG_CONFIG</code> and <code>LIBARROW_BINARY</code> to <code>false</code> so that you build the Arrow C++ from source using those compilers. Compiler mismatch between the arrow system libraries and the R package may cause R to segfault when arrow package functions are used. See discussions <a href="https://issues.apache.org/jira/browse/ARROW-8586" class="external-link">here</a> and <a href="https://issues.apache.org/jira/browse/ARROW-10780" class="external-link">here</a>.</p></li>
<li><p>If you have multiple versions of <code>zstd</code> installed on your system, installation by building libarrow from source may fail with an “undefined symbols” error. Workarounds include (1) setting <code>LIBARROW_BINARY</code> to use a C++ binary; (2) setting <code>ARROW_WITH_ZSTD=OFF</code> to build without <code>zstd</code>; or (3) uninstalling the conflicting <code>zstd</code>. See discussion <a href="https://issues.apache.org/jira/browse/ARROW-8556" class="external-link">here</a>.</p></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>As mentioned above, please <a href="https://issues.apache.org/jira/projects/ARROW/issues" class="external-link">report an issue</a> if you encounter ways to improve this. If you find that your Linux distribution or version is not supported, we welcome the contribution of Docker images (hosted on Docker Hub) that we can use in our continuous integration. These Docker images should be minimal, containing only R and the dependencies it requires. (For reference, see the images that <a href="https://github.com/r-hub/rhub-linux-builders" class="external-link">R-hub</a> uses.)</p>
<p>You can test the arrow R package installation using the <code>docker-compose</code> setup included in the <code>apache/arrow</code> git repository. For example,</p>
<pre><code>R_ORG=rhub R_IMAGE=ubuntu-gcc-release R_TAG=latest docker-compose build r
R_ORG=rhub R_IMAGE=ubuntu-gcc-release R_TAG=latest docker-compose run r</code></pre>
<p>installs the arrow R package, including libarrow, on the <a href="https://hub.docker.com/r/rhub/ubuntu-gcc-release" class="external-link">rhub/ubuntu-gcc-release</a> image.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Neal Richardson, Ian Cook, Nic Crane, Dewey Dunnington, Romain François, Jonathan Keane, Dragoș Moldovan-Grünfeld, Jeroen Ooms, Apache Arrow.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer>
</div>

  


  

<script type="text/javascript" src="/docs/_static/versionwarning.js"></script>  </body>
</html>
