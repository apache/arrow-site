<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Data types • Arrow R Package</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Data types">
<meta name="description" content="Learn about fundamental data types in Apache Arrow and how those  types are mapped onto corresponding data types in R
">
<meta property="og:description" content="Learn about fundamental data types in Apache Arrow and how those  types are mapped onto corresponding data types in R
">
<meta property="og:image" content="https://arrow.apache.org/img/arrow-logo_horizontal_black-txt_white-bg.png">
<meta property="og:image:alt" content="Apache Arrow logo, displaying the triple chevron image adjacent to the text">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@apachearrow">
<meta name="twitter:site" content="@apachearrow">
<!-- Matomo --><script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  /* We explicitly disable cookie tracking to avoid privacy issues */
  _paq.push(['disableCookies']);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://analytics.apache.org/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '20']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script><!-- End Matomo Code --><!-- Kapa AI --><script async src="https://widget.kapa.ai/kapa-widget.bundle.js" data-website-id="9db461d5-ac77-4b3f-a5c5-75efa78339d2" data-project-name="Apache Arrow" data-project-color="#000000" data-project-logo="https://arrow.apache.org/img/arrow-logo_chevrons_white-txt_black-bg.png" data-modal-disclaimer="This is a custom LLM with access to all of [Arrow documentation](https://arrow.apache.org/docs/).  If you want an R-specific answer, please mention this in your question." data-consent-required="true" data-user-analytics-cookie-enabled="false" data-consent-screen-disclaimer="By clicking &quot;I agree, let's chat&quot;, you consent to the use of the AI assistant in accordance with kapa.ai's [Privacy Policy](https://www.kapa.ai/content/privacy-policy). This service uses reCAPTCHA, which requires your consent to Google's [Privacy Policy](https://policies.google.com/privacy) and [Terms of Service](https://policies.google.com/terms). By proceeding, you explicitly agree to both kapa.ai's and Google's privacy policies."></script><!-- End Kapa AI --><!-- Make the package title visible and white. This overcomes an issue with pkgdown and the cosmo theme we use. More straightforward options were attempted but none worked. --><style>
  .navbar-brand {
    color: white !important;
  }
</style>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-black"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Arrow R Package</a>

    <span class="version">
      <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">20.0.0.2</small>
    </span>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/arrow.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Using the package</h6></li>
    <li><a class="dropdown-item" href="../articles/read_write.html">Reading and writing data files</a></li>
    <li><a class="dropdown-item" href="../articles/data_wrangling.html">Data analysis with dplyr syntax</a></li>
    <li><a class="dropdown-item" href="../articles/dataset.html">Working with multi-file data sets</a></li>
    <li><a class="dropdown-item" href="../articles/python.html">Integrating Arrow, Python, and R</a></li>
    <li><a class="dropdown-item" href="../articles/fs.html">Using cloud storage (S3, GCS)</a></li>
    <li><a class="dropdown-item" href="../articles/flight.html">Connecting to a Flight server</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Arrow concepts</h6></li>
    <li><a class="dropdown-item" href="../articles/data_objects.html">Data objects</a></li>
    <li><a class="dropdown-item" href="../articles/data_types.html">Data types</a></li>
    <li><a class="dropdown-item" href="../articles/metadata.html">Metadata</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Installation</h6></li>
    <li><a class="dropdown-item" href="../articles/install.html">Installing on Linux</a></li>
    <li><a class="dropdown-item" href="../articles/install_nightly.html">Installing development versions</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/apache/arrow/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Data types</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/apache/arrow/blob/main/r/vignettes/data_types.Rmd" class="external-link"><code>vignettes/data_types.Rmd</code></a></small>
      <div class="d-none name"><code>data_types.Rmd</code></div>
    </div>

    
    
<p>Arrow has a rich data type system that includes direct analogs of
many R data types, and many data types that do not have a counterpart in
R. This article describes the Arrow type system, compares it to R data
types, and outlines the default mappings used when data are transferred
from Arrow to R. At the end of the article there are two lookup tables:
one describing the default “R to Arrow” type mappings and the other
describing the “Arrow to R” mappings.</p>
<div class="section level2">
<h2 id="motivating-example">Motivating example<a class="anchor" aria-label="anchor" href="#motivating-example"></a>
</h2>
<p>To illustrate the conversion that needs to take place, consider the
differences between the output when obtain we use
<code><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">dplyr::glimpse()</a></code> to inspect the <code>starwars</code> data
in its original format – as a data frame in R – and the output we obtain
when we convert it to an Arrow Table first by calling
<code><a href="../reference/table.html">arrow_table()</a></code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/apache/arrow/" class="external-link">arrow</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Some features are not enabled in this build of Arrow. Run `arrow_info()` for more information.</span></span></code></pre>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">starwars</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Rows: 87</span></span>
<span><span class="co">## Columns: 14</span></span>
<span><span class="co">## $ name       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Luke Skywalker"<span style="color: #949494;">, </span>"C-3PO"<span style="color: #949494;">, </span>"R2-D2"<span style="color: #949494;">, </span>"Darth Vader"<span style="color: #949494;">, </span>"Leia Or…</span></span>
<span><span class="co">## $ height     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 172<span style="color: #949494;">, </span>167<span style="color: #949494;">, </span>96<span style="color: #949494;">, </span>202<span style="color: #949494;">, </span>150<span style="color: #949494;">, </span>178<span style="color: #949494;">, </span>165<span style="color: #949494;">, </span>97<span style="color: #949494;">, </span>183<span style="color: #949494;">, </span>182<span style="color: #949494;">, </span>188<span style="color: #949494;">, </span>180<span style="color: #949494;">, </span>2…</span></span>
<span><span class="co">## $ mass       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 77.0<span style="color: #949494;">, </span>75.0<span style="color: #949494;">, </span>32.0<span style="color: #949494;">, </span>136.0<span style="color: #949494;">, </span>49.0<span style="color: #949494;">, </span>120.0<span style="color: #949494;">, </span>75.0<span style="color: #949494;">, </span>32.0<span style="color: #949494;">, </span>84.0<span style="color: #949494;">, </span>77.…</span></span>
<span><span class="co">## $ hair_color <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "blond"<span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>"none"<span style="color: #949494;">, </span>"brown"<span style="color: #949494;">, </span>"brown, grey"<span style="color: #949494;">, </span>"brown"<span style="color: #949494;">, </span><span style="color: #BB0000;">N</span>…</span></span>
<span><span class="co">## $ skin_color <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "fair"<span style="color: #949494;">, </span>"gold"<span style="color: #949494;">, </span>"white, blue"<span style="color: #949494;">, </span>"white"<span style="color: #949494;">, </span>"light"<span style="color: #949494;">, </span>"light"<span style="color: #949494;">, </span>"…</span></span>
<span><span class="co">## $ eye_color  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "blue"<span style="color: #949494;">, </span>"yellow"<span style="color: #949494;">, </span>"red"<span style="color: #949494;">, </span>"yellow"<span style="color: #949494;">, </span>"brown"<span style="color: #949494;">, </span>"blue"<span style="color: #949494;">, </span>"blue"<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">## $ birth_year <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 19.0<span style="color: #949494;">, </span>112.0<span style="color: #949494;">, </span>33.0<span style="color: #949494;">, </span>41.9<span style="color: #949494;">, </span>19.0<span style="color: #949494;">, </span>52.0<span style="color: #949494;">, </span>47.0<span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>24.0<span style="color: #949494;">, </span>57.0<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">## $ sex        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "male"<span style="color: #949494;">, </span>"none"<span style="color: #949494;">, </span>"none"<span style="color: #949494;">, </span>"male"<span style="color: #949494;">, </span>"female"<span style="color: #949494;">, </span>"male"<span style="color: #949494;">, </span>"female"<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">## $ gender     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "masculine"<span style="color: #949494;">, </span>"masculine"<span style="color: #949494;">, </span>"masculine"<span style="color: #949494;">, </span>"masculine"<span style="color: #949494;">, </span>"femini…</span></span>
<span><span class="co">## $ homeworld  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Tatooine"<span style="color: #949494;">, </span>"Tatooine"<span style="color: #949494;">, </span>"Naboo"<span style="color: #949494;">, </span>"Tatooine"<span style="color: #949494;">, </span>"Alderaan"<span style="color: #949494;">, </span>"T…</span></span>
<span><span class="co">## $ species    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Human"<span style="color: #949494;">, </span>"Droid"<span style="color: #949494;">, </span>"Droid"<span style="color: #949494;">, </span>"Human"<span style="color: #949494;">, </span>"Human"<span style="color: #949494;">, </span>"Human"<span style="color: #949494;">, </span>"Huma…</span></span>
<span><span class="co">## $ films      <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> &lt;"A New Hope", "The Empire Strikes Back", "Return of the J…</span></span>
<span><span class="co">## $ vehicles   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> &lt;"Snowspeeder", "Imperial Speeder Bike"&gt;<span style="color: #949494;">, </span>&lt;&gt;<span style="color: #949494;">, </span>&lt;&gt;<span style="color: #949494;">, </span>&lt;&gt;<span style="color: #949494;">, </span>"Imp…</span></span>
<span><span class="co">## $ starships  <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> &lt;"X-wing", "Imperial shuttle"&gt;<span style="color: #949494;">, </span>&lt;&gt;<span style="color: #949494;">, </span>&lt;&gt;<span style="color: #949494;">, </span>"TIE Advanced x1"<span style="color: #949494;">,</span>…</span></span></code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="fu"><a href="../reference/table.html">arrow_table</a></span><span class="op">(</span><span class="va">starwars</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Table</span></span>
<span><span class="co">## 87 rows x 14 columns</span></span>
<span><span class="co">## $ name         <span style="color: #949494; font-style: italic;">&lt;string&gt;</span> "Luke Skywalker", "C-3PO", "R2-D2", "Darth Vader", "Leia…</span></span>
<span><span class="co">## $ height        <span style="color: #949494; font-style: italic;">&lt;int32&gt;</span> 172, 167, 96, 202, 150, 178, 165, 97, 183, 182, 188, 180…</span></span>
<span><span class="co">## $ mass         <span style="color: #949494; font-style: italic;">&lt;double&gt;</span> 77.0, 75.0, 32.0, 136.0, 49.0, 120.0, 75.0, 32.0, 84.0, …</span></span>
<span><span class="co">## $ hair_color   <span style="color: #949494; font-style: italic;">&lt;string&gt;</span> "blond", <span style="color: #BB0000;">NA</span>, <span style="color: #BB0000;">NA</span>, "none", "brown", "brown, grey", "brown"…</span></span>
<span><span class="co">## $ skin_color   <span style="color: #949494; font-style: italic;">&lt;string&gt;</span> "fair", "gold", "white, blue", "white", "light", "light"…</span></span>
<span><span class="co">## $ eye_color    <span style="color: #949494; font-style: italic;">&lt;string&gt;</span> "blue", "yellow", "red", "yellow", "brown", "blue", "blu…</span></span>
<span><span class="co">## $ birth_year   <span style="color: #949494; font-style: italic;">&lt;double&gt;</span> 19.0, 112.0, 33.0, 41.9, 19.0, 52.0, 47.0, <span style="color: #BB0000;">NA</span>, 24.0, 57.…</span></span>
<span><span class="co">## $ sex          <span style="color: #949494; font-style: italic;">&lt;string&gt;</span> "male", "none", "none", "male", "female", "male", "femal…</span></span>
<span><span class="co">## $ gender       <span style="color: #949494; font-style: italic;">&lt;string&gt;</span> "masculine", "masculine", "masculine", "masculine", "fem…</span></span>
<span><span class="co">## $ homeworld    <span style="color: #949494; font-style: italic;">&lt;string&gt;</span> "Tatooine", "Tatooine", "Naboo", "Tatooine", "Alderaan",…</span></span>
<span><span class="co">## $ species      <span style="color: #949494; font-style: italic;">&lt;string&gt;</span> "Human", "Droid", "Droid", "Human", "Human", "Human", "H…</span></span>
<span><span class="co">## $ films     <span style="color: #949494; font-style: italic;">&lt;list&lt;...&gt;&gt;</span> &lt;"A New Hope", "The Empire Strikes Back", "Return of the…</span></span>
<span><span class="co">## $ vehicles  <span style="color: #949494; font-style: italic;">&lt;list&lt;...&gt;&gt;</span> &lt;"Snowspeeder", "Imperial Speeder Bike"&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, "I…</span></span>
<span><span class="co">## $ starships <span style="color: #949494; font-style: italic;">&lt;list&lt;...&gt;&gt;</span> &lt;"X-wing", "Imperial shuttle"&gt;, &lt;&gt;, &lt;&gt;, "TIE Advanced x1…</span></span>
<span><span class="co">## Call `print()` for full schema details</span></span></code></pre>
<p>The data represented are essentially the same, but the descriptions
of the data types for the columns have changed. For example:</p>
<ul>
<li>
<code>name</code> is labelled <code>&lt;chr&gt;</code> (character
vector) in the data frame; it is labelled <code>&lt;string&gt;</code> (a
string type, also referred to as utf8 type) in the Arrow Table</li>
<li>
<code>height</code> is labelled <code>&lt;int&gt;</code> (integer
vector) in the data frame; it is labelled <code>&lt;int32&gt;</code> (32
bit signed integer) in the Arrow Table</li>
<li>
<code>mass</code> is labelled <code>&lt;dbl&gt;</code> (numeric
vector) in the data frame; it is labelled <code>&lt;double&gt;</code>
(64 bit floating point number) in the Arrow Table</li>
</ul>
<p>Some of these differences are purely cosmetic: integers in R are in
fact 32 bit signed integers, so the underlying data types in Arrow and R
are direct analogs of one another. In other cases the differences are
purely about the implementation: Arrow and R have different ways to
store a vector of strings, but at a high level of abstraction the R
character type and the Arrow string type can be viewed as direct
analogs. In some cases, however, there are no clear analogs: while Arrow
has an analog of POSIXct (the timestamp type) it does not have an analog
of POSIXlt; conversely, while R can represent 32 bit signed integers, it
does not have an equivalent of a 64 bit unsigned integer.</p>
<p>When the arrow package converts between R data and Arrow data, it
will first check to see if a Schema has been provided – see
<code><a href="../reference/schema.html">schema()</a></code> for more information – and if none is available it
will attempt to guess the appropriate type by following the default
mappings. A complete listing of these mappings is provided at the end of
the article, but the most common cases are depicted in the illustration
below:</p>
<p><img src="data_types.png" width="100%"></p>
<p>In this image, black boxes refer to R data types and light blue boxes
refer to Arrow data types. Directional arrows specify conversions (e.g.,
the bidirectional arrow between the logical R type and the boolean Arrow
type means that the logical R converts to an Arrow boolean and vice
versa). Solid lines indicate that this conversion rule is always the
default; dashed lines mean that it only sometimes applies (the rules and
special cases are described below).</p>
</div>
<div class="section level2">
<h2 id="logicalboolean-types">Logical/boolean types<a class="anchor" aria-label="anchor" href="#logicalboolean-types"></a>
</h2>
<p>Arrow and R both use three-valued logic. In R, logical values can be
<code>TRUE</code> or <code>FALSE</code>, with <code>NA</code> used to
represent missing data. In Arrow, the corresponding boolean type can
take values <code>true</code>, <code>false</code>, or <code>null</code>,
as shown below:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/chunked_array.html">chunked_array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">NA</span><span class="op">)</span>, type <span class="op">=</span> <span class="fu"><a href="../reference/data-type.html">boolean</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="co"># default</span></span></code></pre></div>
<pre><code><span><span class="co">## ChunkedArray</span></span>
<span><span class="co">## &lt;bool&gt;</span></span>
<span><span class="co">## [</span></span>
<span><span class="co">##   [</span></span>
<span><span class="co">##     true,</span></span>
<span><span class="co">##     false,</span></span>
<span><span class="co">##     null</span></span>
<span><span class="co">##   ]</span></span>
<span><span class="co">## ]</span></span></code></pre>
<p>It is not strictly necessary to set <code>type = boolean()</code> in
this example because the default behavior in arrow is to translate R
logical vectors to Arrow booleans and vice versa. However, for the sake
of clarity we will specify the data types explicitly throughout this
article. We will likewise use <code><a href="../reference/chunked_array.html">chunked_array()</a></code> to create
Arrow data from R objects and <code><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector()</a></code> to create R data
from Arrow objects, but similar results are obtained if we use other
methods.</p>
</div>
<div class="section level2">
<h2 id="integer-types">Integer types<a class="anchor" aria-label="anchor" href="#integer-types"></a>
</h2>
<p>Base R natively supports only one type of integer, using 32 bits to
represent signed numbers between -2147483648 and 2147483647, though R
can also support 64 bit integers via the <a href="https://cran.r-project.org/package=bit64" class="external-link"><code>bit64</code></a>
package. Arrow inherits signed and unsigned integer types from C++ in 8
bit, 16 bit, 32 bit, and 64 bit versions:</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="24%">
<col width="27%">
<col width="27%">
</colgroup>
<thead><tr class="header">
<th>Description</th>
<th align="right">Data Type Function</th>
<th align="right">Smallest Value</th>
<th align="right">Largest Value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>8 bit unsigned</td>
<td align="right"><code><a href="../reference/data-type.html">uint8()</a></code></td>
<td align="right">0</td>
<td align="right">255</td>
</tr>
<tr class="even">
<td>16 bit unsigned</td>
<td align="right"><code><a href="../reference/data-type.html">uint16()</a></code></td>
<td align="right">0</td>
<td align="right">65535</td>
</tr>
<tr class="odd">
<td>32 bit unsigned</td>
<td align="right"><code><a href="../reference/data-type.html">uint32()</a></code></td>
<td align="right">0</td>
<td align="right">4294967295</td>
</tr>
<tr class="even">
<td>64 bit unsigned</td>
<td align="right"><code><a href="../reference/data-type.html">uint64()</a></code></td>
<td align="right">0</td>
<td align="right">18446744073709551615</td>
</tr>
<tr class="odd">
<td>8 bit signed</td>
<td align="right"><code><a href="../reference/data-type.html">int8()</a></code></td>
<td align="right">-128</td>
<td align="right">127</td>
</tr>
<tr class="even">
<td>16 bit signed</td>
<td align="right"><code><a href="../reference/data-type.html">int16()</a></code></td>
<td align="right">-32768</td>
<td align="right">32767</td>
</tr>
<tr class="odd">
<td>32 bit signed</td>
<td align="right"><code><a href="../reference/data-type.html">int32()</a></code></td>
<td align="right">-2147483648</td>
<td align="right">2147483647</td>
</tr>
<tr class="even">
<td>64 bit signed</td>
<td align="right"><code><a href="../reference/data-type.html">int64()</a></code></td>
<td align="right">-9223372036854775808</td>
<td align="right">9223372036854775807</td>
</tr>
</tbody>
</table>
<p>By default, arrow translates R integers to the int32 type in Arrow,
but you can override this by explicitly specifying another integer
type:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/chunked_array.html">chunked_array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10L</span>, <span class="fl">3L</span>, <span class="fl">200L</span><span class="op">)</span>, type <span class="op">=</span> <span class="fu"><a href="../reference/data-type.html">int32</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="co"># default</span></span></code></pre></div>
<pre><code><span><span class="co">## ChunkedArray</span></span>
<span><span class="co">## &lt;int32&gt;</span></span>
<span><span class="co">## [</span></span>
<span><span class="co">##   [</span></span>
<span><span class="co">##     10,</span></span>
<span><span class="co">##     3,</span></span>
<span><span class="co">##     200</span></span>
<span><span class="co">##   ]</span></span>
<span><span class="co">## ]</span></span></code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/chunked_array.html">chunked_array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10L</span>, <span class="fl">3L</span>, <span class="fl">200L</span><span class="op">)</span>, type <span class="op">=</span> <span class="fu"><a href="../reference/data-type.html">int64</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ChunkedArray</span></span>
<span><span class="co">## &lt;int64&gt;</span></span>
<span><span class="co">## [</span></span>
<span><span class="co">##   [</span></span>
<span><span class="co">##     10,</span></span>
<span><span class="co">##     3,</span></span>
<span><span class="co">##     200</span></span>
<span><span class="co">##   ]</span></span>
<span><span class="co">## ]</span></span></code></pre>
<p>If the value in R does not fall within the permissible range for the
corresponding Arrow type, arrow throws an error:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/chunked_array.html">chunked_array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10L</span>, <span class="fl">3L</span>, <span class="fl">200L</span><span class="op">)</span>, type <span class="op">=</span> <span class="fu"><a href="../reference/data-type.html">int8</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error: Invalid: value outside of range</span></span></code></pre>
<p>When translating from Arrow to R, integer types alway translate to R
integers unless one of the following exceptions applies:</p>
<ul>
<li>If the value of an Arrow uint32 or uint64 falls outside the range
allowed for R integers, the result will be a numeric vector in R</li>
<li>If the value of an Arrow int64 variable falls outside the range
allowed for R integers, the result will be a
<code><a href="https://rdrr.io/pkg/bit64/man/bit64-package.html" class="external-link">bit64::integer64</a></code> vector in R</li>
<li>If the user sets <code>options(arrow.int64_downcast = FALSE)</code>,
the Arrow int64 type always yields a <code><a href="https://rdrr.io/pkg/bit64/man/bit64-package.html" class="external-link">bit64::integer64</a></code>
vector in R regardless of the value</li>
</ul>
</div>
<div class="section level2">
<h2 id="floating-point-numeric-types">Floating point numeric types<a class="anchor" aria-label="anchor" href="#floating-point-numeric-types"></a>
</h2>
<p>R has one double-precision (64 bit) numeric type, which translates to
the Arrow 64 bit floating point type by default. Arrow supports both
single-precision (32 bit) and double-precision (64 bit) floating point
numbers, specified using the <code><a href="../reference/data-type.html">float32()</a></code> and
<code><a href="../reference/data-type.html">float64()</a></code> data type functions. Both of these are translated
to doubles in R. Examples are shown below:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/chunked_array.html">chunked_array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span><span class="op">)</span>, type <span class="op">=</span> <span class="fu"><a href="../reference/data-type.html">float64</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="co"># default</span></span></code></pre></div>
<pre><code><span><span class="co">## ChunkedArray</span></span>
<span><span class="co">## &lt;double&gt;</span></span>
<span><span class="co">## [</span></span>
<span><span class="co">##   [</span></span>
<span><span class="co">##     0.1,</span></span>
<span><span class="co">##     0.2,</span></span>
<span><span class="co">##     0.3</span></span>
<span><span class="co">##   ]</span></span>
<span><span class="co">## ]</span></span></code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/chunked_array.html">chunked_array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span><span class="op">)</span>, type <span class="op">=</span> <span class="fu"><a href="../reference/data-type.html">float32</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ChunkedArray</span></span>
<span><span class="co">## &lt;float&gt;</span></span>
<span><span class="co">## [</span></span>
<span><span class="co">##   [</span></span>
<span><span class="co">##     0.1,</span></span>
<span><span class="co">##     0.2,</span></span>
<span><span class="co">##     0.3</span></span>
<span><span class="co">##   ]</span></span>
<span><span class="co">## ]</span></span></code></pre>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">arrow_double</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chunked_array.html">chunked_array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span><span class="op">)</span>, type <span class="op">=</span> <span class="fu"><a href="../reference/data-type.html">float64</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">arrow_double</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.1 0.2 0.3</span></span></code></pre>
<p>Note that the Arrow specification also permits half-precision (16
bit) floating point numbers, but these have not yet been
implemented.</p>
</div>
<div class="section level2">
<h2 id="fixed-point-decimal-types">Fixed point decimal types<a class="anchor" aria-label="anchor" href="#fixed-point-decimal-types"></a>
</h2>
<p>Arrow also contains <code><a href="../reference/data-type.html">decimal()</a></code> data types, in which
numeric values are specified in decimal format rather than binary.
Decimals in Arrow come in two varieties, a 128 bit version and a 256 bit
version, but in most cases users should be able to use the more general
<code><a href="../reference/data-type.html">decimal()</a></code> data type function rather than the specific
<code><a href="../reference/data-type.html">decimal128()</a></code> and <code><a href="../reference/data-type.html">decimal256()</a></code> functions.</p>
<p>The decimal types in Arrow are fixed-precision numbers (rather than
floating-point), which means it is necessary to explicitly specify the
<code>precision</code> and <code>scale</code> arguments:</p>
<ul>
<li>
<code>precision</code> specifies the number of significant digits to
store.</li>
<li>
<code>scale</code> specifies the number of digits that should be
stored after the decimal point. If you set <code>scale = 2</code>,
exactly two digits will be stored after the decimal point. If you set
<code>scale = 0</code>, values will be rounded to the nearest whole
number. Negative scales are also permitted (handy when dealing with
extremely large numbers), so <code>scale = -2</code> stores the value to
the nearest 100.</li>
</ul>
<p>Because R does not have any way to create decimal types natively, the
example below is a little circuitous. First we create some floating
point numbers as Chunked Arrays, and then explicitly cast these to
decimal types within Arrow. This is possible because Chunked Array
objects possess a <code><a href="../reference/cast.html">cast()</a></code> method:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">arrow_floating</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chunked_array.html">chunked_array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.01</span>, <span class="fl">.1</span>, <span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">arrow_decimals</span> <span class="op">&lt;-</span> <span class="va">arrow_floating</span><span class="op">$</span><span class="fu">cast</span><span class="op">(</span><span class="fu"><a href="../reference/data-type.html">decimal</a></span><span class="op">(</span>precision <span class="op">=</span> <span class="fl">5</span>, scale <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">arrow_decimals</span></span></code></pre></div>
<pre><code><span><span class="co">## ChunkedArray</span></span>
<span><span class="co">## &lt;decimal128(5, 2)&gt;</span></span>
<span><span class="co">## [</span></span>
<span><span class="co">##   [</span></span>
<span><span class="co">##     0.01,</span></span>
<span><span class="co">##     0.10,</span></span>
<span><span class="co">##     1.00,</span></span>
<span><span class="co">##     10.00,</span></span>
<span><span class="co">##     100.00</span></span>
<span><span class="co">##   ]</span></span>
<span><span class="co">## ]</span></span></code></pre>
<p>Though not natively used in R, decimal types can be useful in
situations where it is especially important to avoid problems that arise
in floating point arithmetic.</p>
</div>
<div class="section level2">
<h2 id="stringcharacter-types">String/character types<a class="anchor" aria-label="anchor" href="#stringcharacter-types"></a>
</h2>
<p>R uses a single character type to represent strings whereas Arrow has
two types. In the Arrow C++ library these types are referred to as
strings and large_strings, but to avoid ambiguity in the arrow R package
they are defined using the <code><a href="../reference/data-type.html">utf8()</a></code> and
<code><a href="../reference/data-type.html">large_utf8()</a></code> data type functions. The distinction between
these two Arrow types is unlikely to be important for R users, though
the difference is discussed in the article on <a href="./developers/data_object_layout.html">data object layout</a>.</p>
<p>The default behavior is to translate R character vectors to the
utf8/string type, and to translate both Arrow types to R character
vectors:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">strings</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chunked_array.html">chunked_array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"oh"</span>, <span class="st">"well"</span>, <span class="st">"whatever"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">strings</span></span></code></pre></div>
<pre><code><span><span class="co">## ChunkedArray</span></span>
<span><span class="co">## &lt;string&gt;</span></span>
<span><span class="co">## [</span></span>
<span><span class="co">##   [</span></span>
<span><span class="co">##     "oh",</span></span>
<span><span class="co">##     "well",</span></span>
<span><span class="co">##     "whatever"</span></span>
<span><span class="co">##   ]</span></span>
<span><span class="co">## ]</span></span></code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">strings</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "oh"       "well"     "whatever"</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="factordictionary-types">Factor/dictionary types<a class="anchor" aria-label="anchor" href="#factordictionary-types"></a>
</h2>
<p>The analog of R factors in Arrow is the dictionary type. Factors
translate to dictionaries and vice versa. To illustrate this, let’s
create a small factor object in R:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fct</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cat"</span>, <span class="st">"dog"</span>, <span class="st">"pig"</span>, <span class="st">"dog"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">fct</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] cat dog pig dog</span></span>
<span><span class="co">## Levels: cat dog pig</span></span></code></pre>
<p>When translated to Arrow, this is the dictionary that results:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dict</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chunked_array.html">chunked_array</a></span><span class="op">(</span><span class="va">fct</span>, type <span class="op">=</span> <span class="fu"><a href="../reference/dictionary.html">dictionary</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dict</span></span></code></pre></div>
<pre><code><span><span class="co">## ChunkedArray</span></span>
<span><span class="co">## &lt;dictionary&lt;values=string, indices=int32&gt;&gt;</span></span>
<span><span class="co">## [</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   -- dictionary:</span></span>
<span><span class="co">##     [</span></span>
<span><span class="co">##       "cat",</span></span>
<span><span class="co">##       "dog",</span></span>
<span><span class="co">##       "pig"</span></span>
<span><span class="co">##     ]</span></span>
<span><span class="co">##   -- indices:</span></span>
<span><span class="co">##     [</span></span>
<span><span class="co">##       0,</span></span>
<span><span class="co">##       1,</span></span>
<span><span class="co">##       2,</span></span>
<span><span class="co">##       1</span></span>
<span><span class="co">##     ]</span></span>
<span><span class="co">## ]</span></span></code></pre>
<p>When translated back to R, we recover the original factor:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">dict</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] cat dog pig dog</span></span>
<span><span class="co">## Levels: cat dog pig</span></span></code></pre>
<p>Arrow dictionaries are slightly more flexible than R factors: values
in a dictionary do not necessarily have to be strings, but labels in a
factor do. As a consequence, non-string values in an Arrow dictionary
are coerced to strings when translated to R.</p>
</div>
<div class="section level2">
<h2 id="date-types">Date types<a class="anchor" aria-label="anchor" href="#date-types"></a>
</h2>
<p>In R, dates are typically represented using the Date class.
Internally a Date object is a numeric type whose value counts the number
of days since the beginning of the Unix epoch (1 January 1970). Arrow
supplies two data types that can be used to represent dates: the date32
type and the date64 type. The date32 type is similar to the Date class
in R: internally it stores a 32 bit integer that counts the number of
days since 1 January 1970. The default in arrow is to translate R Date
objects to Arrow date32 types:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nirvana_album_dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1989-06-15"</span>, <span class="st">"1991-09-24"</span>, <span class="st">"1993-09-13"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">nirvana_album_dates</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "1989-06-15" "1991-09-24" "1993-09-13"</span></span></code></pre>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nirvana_32</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chunked_array.html">chunked_array</a></span><span class="op">(</span><span class="va">nirvana_album_dates</span>, type <span class="op">=</span> <span class="fu"><a href="../reference/data-type.html">date32</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="co"># default</span></span>
<span><span class="va">nirvana_32</span></span></code></pre></div>
<pre><code><span><span class="co">## ChunkedArray</span></span>
<span><span class="co">## &lt;date32[day]&gt;</span></span>
<span><span class="co">## [</span></span>
<span><span class="co">##   [</span></span>
<span><span class="co">##     1989-06-15,</span></span>
<span><span class="co">##     1991-09-24,</span></span>
<span><span class="co">##     1993-09-13</span></span>
<span><span class="co">##   ]</span></span>
<span><span class="co">## ]</span></span></code></pre>
<p>Arrow also supplies a higher-precision date64 type, in which the date
is represented as a 64 bit integer that encodes the number of
<em>milliseconds</em> since 1970-01-01 00:00 UTC:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nirvana_64</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chunked_array.html">chunked_array</a></span><span class="op">(</span><span class="va">nirvana_album_dates</span>, type <span class="op">=</span> <span class="fu"><a href="../reference/data-type.html">date64</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">nirvana_64</span></span></code></pre></div>
<pre><code><span><span class="co">## ChunkedArray</span></span>
<span><span class="co">## &lt;date64[ms]&gt;</span></span>
<span><span class="co">## [</span></span>
<span><span class="co">##   [</span></span>
<span><span class="co">##     1989-06-15,</span></span>
<span><span class="co">##     1991-09-24,</span></span>
<span><span class="co">##     1993-09-13</span></span>
<span><span class="co">##   ]</span></span>
<span><span class="co">## ]</span></span></code></pre>
<p>The translation from Arrow to R differs. Internally the date32 type
is very similar to an R Date, so these objects are translated to R as
Dates:</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">nirvana_32</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "Date"</span></span></code></pre>
<p>However, because date64 types are specified to millisecond-level
precision, they are translated to R as POSIXct times to avoid the
possibility of losing relevant information:</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">nirvana_64</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "POSIXct" "POSIXt"</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="temporaltimestamp-types">Temporal/timestamp types<a class="anchor" aria-label="anchor" href="#temporaltimestamp-types"></a>
</h2>
<p>In R there are two classes used to represent date and time
information, POSIXct and POSIXlt. Arrow only has one: the timestamp
type. Arrow timestamps are loosely analogous to the POSIXct class.
Internally, a POSIXct object represents the date with as a numeric
variable that stores the number of seconds since 1970-01-01 00:00 UTC.
Internally, an Arrow timestamp is a 64 bit integer counting the number
of milliseconds since 1970-01-01 00:00 UTC.</p>
<p>Arrow and R both support timezone information, but display it
differently in the printed object. In R, local time is printed with the
timezone name adjacent to it:</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sydney_newyear</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"2000-01-01 00:01"</span>, tz <span class="op">=</span> <span class="st">"Australia/Sydney"</span><span class="op">)</span></span>
<span><span class="va">sydney_newyear</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "2000-01-01 00:01:00 AEDT"</span></span></code></pre>
<p>When translated to Arrow, this POSIXct object becomes an Arrow
timestamp object. When printed, however, the temporal instant is always
displayed in UTC rather than local time:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sydney_newyear_arrow</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/chunked_array.html">chunked_array</a></span><span class="op">(</span><span class="va">sydney_newyear</span>, type <span class="op">=</span> <span class="fu"><a href="../reference/data-type.html">timestamp</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">sydney_newyear_arrow</span></span></code></pre></div>
<pre><code><span><span class="co">## ChunkedArray</span></span>
<span><span class="co">## &lt;timestamp[s]&gt;</span></span>
<span><span class="co">## [</span></span>
<span><span class="co">##   [</span></span>
<span><span class="co">##     1999-12-31 13:01:00</span></span>
<span><span class="co">##   ]</span></span>
<span><span class="co">## ]</span></span></code></pre>
<p>The timezone information is not lost, however, which we can easily
see by translating the <code>sydney_newyear_arrow</code> object back to
an R POSIXct object:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="va">sydney_newyear_arrow</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "1999-12-31 05:01:00 PST"</span></span></code></pre>
<p>For POSIXlt objects the behaviour is different. Internally a POSIXlt
object is a list specifying the “local time” in terms of a variety of
human-relevant fields. There is no analogous class to this in Arrow, so
the default behaviour is to translate it to an Arrow list.</p>
</div>
<div class="section level2">
<h2 id="time-of-day-types">Time of day types<a class="anchor" aria-label="anchor" href="#time-of-day-types"></a>
</h2>
<p>Base R does not have a class to represent the time of day independent
of the date (i.e., it is not possible to specify “3pm” without referring
to a specific day), but it can be done with the help of the <a href="https://hms.tidyverse.org/" class="external-link"><code>hms</code></a> package.
Internally, hms objects are always stored as the number of seconds since
00:00:00.</p>
<p>Arrow has two data types for this purposes. For time32 types, data
are stored as a 32 bit integer that is interpreted either as the number
of seconds or the number of milliseconds since 00:00:00. Note the
difference between the following:</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">time_of_day</span> <span class="op">&lt;-</span> <span class="fu">hms</span><span class="fu">::</span><span class="fu"><a href="https://hms.tidyverse.org/reference/hms.html" class="external-link">hms</a></span><span class="op">(</span><span class="fl">56</span>, <span class="fl">34</span>, <span class="fl">12</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/chunked_array.html">chunked_array</a></span><span class="op">(</span><span class="va">time_of_day</span>, type <span class="op">=</span> <span class="fu"><a href="../reference/data-type.html">time32</a></span><span class="op">(</span>unit <span class="op">=</span> <span class="st">"s"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ChunkedArray</span></span>
<span><span class="co">## &lt;time32[s]&gt;</span></span>
<span><span class="co">## [</span></span>
<span><span class="co">##   [</span></span>
<span><span class="co">##     12:34:56</span></span>
<span><span class="co">##   ]</span></span>
<span><span class="co">## ]</span></span></code></pre>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/chunked_array.html">chunked_array</a></span><span class="op">(</span><span class="va">time_of_day</span>, type <span class="op">=</span> <span class="fu"><a href="../reference/data-type.html">time32</a></span><span class="op">(</span>unit <span class="op">=</span> <span class="st">"ms"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ChunkedArray</span></span>
<span><span class="co">## &lt;time32[ms]&gt;</span></span>
<span><span class="co">## [</span></span>
<span><span class="co">##   [</span></span>
<span><span class="co">##     12:34:56.000</span></span>
<span><span class="co">##   ]</span></span>
<span><span class="co">## ]</span></span></code></pre>
<p>A time64 object is similar, but stores the time of day using a 64 bit
integer and can represent the time at higher precision. It is possible
to choose microseconds (<code>unit = "us"</code>) or nanoseconds
(<code>unit = "ns"</code>), as shown below:</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/chunked_array.html">chunked_array</a></span><span class="op">(</span><span class="va">time_of_day</span>, type <span class="op">=</span> <span class="fu"><a href="../reference/data-type.html">time64</a></span><span class="op">(</span>unit <span class="op">=</span> <span class="st">"us"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ChunkedArray</span></span>
<span><span class="co">## &lt;time64[us]&gt;</span></span>
<span><span class="co">## [</span></span>
<span><span class="co">##   [</span></span>
<span><span class="co">##     12:34:56.000000</span></span>
<span><span class="co">##   ]</span></span>
<span><span class="co">## ]</span></span></code></pre>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/chunked_array.html">chunked_array</a></span><span class="op">(</span><span class="va">time_of_day</span>, type <span class="op">=</span> <span class="fu"><a href="../reference/data-type.html">time64</a></span><span class="op">(</span>unit <span class="op">=</span> <span class="st">"ns"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ChunkedArray</span></span>
<span><span class="co">## &lt;time64[ns]&gt;</span></span>
<span><span class="co">## [</span></span>
<span><span class="co">##   [</span></span>
<span><span class="co">##     12:34:56.000000000</span></span>
<span><span class="co">##   ]</span></span>
<span><span class="co">## ]</span></span></code></pre>
<p>All versions of time32 and time64 objects in Arrow translate to hms
times in R.</p>
</div>
<div class="section level2">
<h2 id="duration-types">Duration types<a class="anchor" aria-label="anchor" href="#duration-types"></a>
</h2>
<p>Lengths of time are represented as difftime objects in R. The
analogous data type in Arrow is the duration type. A duration type is
stored as a 64 bit integer, which can represent the number of seconds
(the default, <code>unit = "s"</code>), milliseconds
(<code>unit = "ms"</code>), microseconds (<code>unit = "us"</code>), or
nanoseconds (<code>unit = "ns"</code>). To illustrate this we’ll create
a difftime in R corresponding to 278 seconds:</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">len</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/difftime.html" class="external-link">as.difftime</a></span><span class="op">(</span><span class="fl">278</span>, unit <span class="op">=</span> <span class="st">"secs"</span><span class="op">)</span></span>
<span><span class="va">len</span></span></code></pre></div>
<pre><code><span><span class="co">## Time difference of 278 secs</span></span></code></pre>
<p>The translation to Arrow looks like this:</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/chunked_array.html">chunked_array</a></span><span class="op">(</span><span class="va">len</span>, type <span class="op">=</span> <span class="fu"><a href="../reference/data-type.html">duration</a></span><span class="op">(</span>unit <span class="op">=</span> <span class="st">"s"</span><span class="op">)</span><span class="op">)</span> <span class="co"># default</span></span></code></pre></div>
<pre><code><span><span class="co">## ChunkedArray</span></span>
<span><span class="co">## &lt;duration[s]&gt;</span></span>
<span><span class="co">## [</span></span>
<span><span class="co">##   [</span></span>
<span><span class="co">##     278</span></span>
<span><span class="co">##   ]</span></span>
<span><span class="co">## ]</span></span></code></pre>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/chunked_array.html">chunked_array</a></span><span class="op">(</span><span class="va">len</span>, type <span class="op">=</span> <span class="fu"><a href="../reference/data-type.html">duration</a></span><span class="op">(</span>unit <span class="op">=</span> <span class="st">"ns"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ChunkedArray</span></span>
<span><span class="co">## &lt;duration[ns]&gt;</span></span>
<span><span class="co">## [</span></span>
<span><span class="co">##   [</span></span>
<span><span class="co">##     278000000000</span></span>
<span><span class="co">##   ]</span></span>
<span><span class="co">## ]</span></span></code></pre>
<p>Regardless of the underlying unit, duration objects in Arrow
translate to difftime objects in R.</p>
</div>
<div class="section level2">
<h2 id="list-of-default-translations">List of default translations<a class="anchor" aria-label="anchor" href="#list-of-default-translations"></a>
</h2>
<p>The discussion above covers the most common cases. The two tables in
this section provide a more complete list of how arrow translates
between R data types and Arrow data types. In these table, entries with
a <code>-</code> are not currently implemented.</p>
<div class="section level3">
<h3 id="translations-from-r-to-arrow">Translations from R to Arrow<a class="anchor" aria-label="anchor" href="#translations-from-r-to-arrow"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>Original R type</th>
<th>Arrow type after translation</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>logical</td>
<td>boolean</td>
</tr>
<tr class="even">
<td>integer</td>
<td>int32</td>
</tr>
<tr class="odd">
<td>double (“numeric”)</td>
<td>float64 <sup>1</sup>
</td>
</tr>
<tr class="even">
<td>character</td>
<td>utf8 <sup>2</sup>
</td>
</tr>
<tr class="odd">
<td>factor</td>
<td>dictionary</td>
</tr>
<tr class="even">
<td>raw</td>
<td>uint8</td>
</tr>
<tr class="odd">
<td>Date</td>
<td>date32</td>
</tr>
<tr class="even">
<td>POSIXct</td>
<td>timestamp</td>
</tr>
<tr class="odd">
<td>POSIXlt</td>
<td>struct</td>
</tr>
<tr class="even">
<td>data.frame</td>
<td>struct</td>
</tr>
<tr class="odd">
<td>list <sup>3</sup>
</td>
<td>list</td>
</tr>
<tr class="even">
<td>bit64::integer64</td>
<td>int64</td>
</tr>
<tr class="odd">
<td>hms::hms</td>
<td>time32</td>
</tr>
<tr class="even">
<td>difftime</td>
<td>duration</td>
</tr>
<tr class="odd">
<td>vctrs::vctrs_unspecified</td>
<td>null</td>
</tr>
</tbody>
</table>
<p><sup>1</sup>: <code>float64</code> and <code>double</code> are the
same concept and data type in Arrow C++; however, only
<code><a href="../reference/data-type.html">float64()</a></code> is used in arrow as the function
<code><a href="https://rdrr.io/r/base/double.html" class="external-link">double()</a></code> already exists in base R</p>
<p><sup>2</sup>: If the character vector exceeds 2GB of strings, it will
be converted to a <code>large_utf8</code> Arrow type</p>
<p><sup>3</sup>: Only lists where all elements are the same type are
able to be translated to Arrow list type (which is a “list of” some
type).</p>
</div>
<div class="section level3">
<h3 id="translations-from-arrow-to-r">Translations from Arrow to R<a class="anchor" aria-label="anchor" href="#translations-from-arrow-to-r"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>Original Arrow type</th>
<th>R type after translation</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>boolean</td>
<td>logical</td>
</tr>
<tr class="even">
<td>int8</td>
<td>integer</td>
</tr>
<tr class="odd">
<td>int16</td>
<td>integer</td>
</tr>
<tr class="even">
<td>int32</td>
<td>integer</td>
</tr>
<tr class="odd">
<td>int64</td>
<td>integer <sup>1</sup>
</td>
</tr>
<tr class="even">
<td>uint8</td>
<td>integer</td>
</tr>
<tr class="odd">
<td>uint16</td>
<td>integer</td>
</tr>
<tr class="even">
<td>uint32</td>
<td>integer <sup>1</sup>
</td>
</tr>
<tr class="odd">
<td>uint64</td>
<td>integer <sup>1</sup>
</td>
</tr>
<tr class="even">
<td>float16</td>
<td>- <sup>2</sup>
</td>
</tr>
<tr class="odd">
<td>float32</td>
<td>double</td>
</tr>
<tr class="even">
<td>float64</td>
<td>double</td>
</tr>
<tr class="odd">
<td>utf8</td>
<td>character</td>
</tr>
<tr class="even">
<td>large_utf8</td>
<td>character</td>
</tr>
<tr class="odd">
<td>binary</td>
<td>arrow_binary <sup>3</sup>
</td>
</tr>
<tr class="even">
<td>large_binary</td>
<td>arrow_large_binary <sup>3</sup>
</td>
</tr>
<tr class="odd">
<td>fixed_size_binary</td>
<td>arrow_fixed_size_binary <sup>3</sup>
</td>
</tr>
<tr class="even">
<td>date32</td>
<td>Date</td>
</tr>
<tr class="odd">
<td>date64</td>
<td>POSIXct</td>
</tr>
<tr class="even">
<td>time32</td>
<td>hms::hms</td>
</tr>
<tr class="odd">
<td>time64</td>
<td>hms::hms</td>
</tr>
<tr class="even">
<td>timestamp</td>
<td>POSIXct</td>
</tr>
<tr class="odd">
<td>duration</td>
<td>difftime</td>
</tr>
<tr class="even">
<td>decimal</td>
<td>double</td>
</tr>
<tr class="odd">
<td>dictionary</td>
<td>factor <sup>4</sup>
</td>
</tr>
<tr class="even">
<td>list</td>
<td>arrow_list <sup>5</sup>
</td>
</tr>
<tr class="odd">
<td>large_list</td>
<td>arrow_large_list <sup>5</sup>
</td>
</tr>
<tr class="even">
<td>fixed_size_list</td>
<td>arrow_fixed_size_list <sup>5</sup>
</td>
</tr>
<tr class="odd">
<td>struct</td>
<td>data.frame</td>
</tr>
<tr class="even">
<td>null</td>
<td>vctrs::vctrs_unspecified</td>
</tr>
<tr class="odd">
<td>map</td>
<td>arrow_list <sup>5</sup>
</td>
</tr>
<tr class="even">
<td>union</td>
<td>- <sup>2</sup>
</td>
</tr>
</tbody>
</table>
<p><sup>1</sup>: These integer types may contain values that exceed the
range of R’s <code>integer</code> type (32 bit signed integer). When
they do, <code>uint32</code> and <code>uint64</code> are converted to
<code>double</code> (“numeric”) and <code>int64</code> is converted to
<code><a href="https://rdrr.io/pkg/bit64/man/bit64-package.html" class="external-link">bit64::integer64</a></code>. This conversion can be disabled (so that
<code>int64</code> always yields a <code><a href="https://rdrr.io/pkg/bit64/man/bit64-package.html" class="external-link">bit64::integer64</a></code> vector)
by setting <code>options(arrow.int64_downcast = FALSE)</code>.</p>
<p><sup>2</sup>: Some Arrow data types do not currently have an R
equivalent and will raise an error if cast to or mapped to via a
schema.</p>
<p><sup>3</sup>: <code>arrow*_binary</code> classes are implemented as
lists of raw vectors.</p>
<p><sup>4</sup>: Due to the limitation of R factors, Arrow
<code>dictionary</code> values are coerced to string when translated to
R if they are not already strings.</p>
<p><sup>5</sup>: <code>arrow*_list</code> classes are implemented as
subclasses of <code>vctrs_list_of</code> with a <code>ptype</code>
attribute set to what an empty Array of the value type converts to.</p>
</div>
</div>
<div class="section level2">
<h2 id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<ul>
<li>To learn more how data types are specified through
<code><a href="../reference/schema.html">schema()</a></code> metadata, see the <a href="./metadata.html">metadata article</a>.</li>
<li>For additional details on data types, see the <a href="./data_types.html">data types article</a>.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p><a href="https://arrow.apache.org/docs/r/versions.html">Older versions of these docs</a></p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
