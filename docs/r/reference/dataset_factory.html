<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create a DatasetFactory — dataset_factory • Arrow R Package</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><script src="../extra.js"></script><meta property="og:title" content="Create a DatasetFactory — dataset_factory"><meta property="og:description" content="A Dataset can constructed using one or more DatasetFactorys.
This function helps you construct a DatasetFactory that you can pass to
open_dataset()."><meta property="og:image" content="https://arrow.apache.org/img/arrow-logo_horizontal_black-txt_white-bg.png"><meta property="og:image:alt" content="Apache Arrow logo, displaying the triple chevron image adjacent to the text"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@apachearrow"><meta name="twitter:site" content="@apachearrow"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  /* We explicitly disable cookie tracking to avoid privacy issues */
  _paq.push(['disableCookies']);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://analytics.apache.org/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '20']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script><!-- End Matomo Code --></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Arrow R Package</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">10.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="https://arrow.apache.org/" class="external-link">❯❯❯</a>
</li>
<li>
  <a href="../articles/arrow.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/install.html">Installing the Arrow Package on Linux</a>
    </li>
    <li>
      <a href="../articles/dataset.html">Working with Arrow Datasets and dplyr</a>
    </li>
    <li>
      <a href="../articles/fs.html">Working with Cloud Storage (S3, GCS)</a>
    </li>
    <li>
      <a href="../articles/python.html">Apache Arrow in Python and R with reticulate</a>
    </li>
    <li>
      <a href="../articles/flight.html">Connecting to Flight RPC Servers</a>
    </li>
    <li>
      <a href="../articles/developing.html">Arrow R Developer Guide</a>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Developers</a>
      <ul class="dropdown-menu" role="menu"><li>
          <a href="../articles/developers/setup.html">Developer Environment Setup</a>
        </li>
        <li>
          <a href="../articles/developers/workflow.html">Common Workflow Tasks</a>
        </li>
        <li>
          <a href="../articles/developers/debugging.html">Debugging</a>
        </li>
        <li>
          <a href="../articles/developers/install_details.html">Package Installation Details</a>
        </li>
        <li>
          <a href="../articles/developers/docker.html">Docker</a>
        </li>
        <li>
          <a href="../articles/developers/bindings.html">Writing Bindings</a>
        </li>
      </ul></li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Project docs
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="https://arrow.apache.org/docs/format/Columnar.html" class="external-link">Specification</a>
    </li>
    <li>
      <a href="https://arrow.apache.org/docs/c_glib" class="external-link">C GLib</a>
    </li>
    <li>
      <a href="https://arrow.apache.org/docs/cpp" class="external-link">C++</a>
    </li>
    <li>
      <a href="https://arrow.apache.org/docs/java" class="external-link">Java</a>
    </li>
    <li>
      <a href="https://arrow.apache.org/docs/js" class="external-link">JavaScript</a>
    </li>
    <li>
      <a href="https://arrow.apache.org/docs/python" class="external-link">Python</a>
    </li>
    <li>
      <a href="../index.html">R</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a DatasetFactory</h1>
    <small class="dont-index">Source: <a href="https://github.com/apache/arrow/blob/master/r/R/dataset-factory.R" class="external-link"><code>R/dataset-factory.R</code></a></small>
    <div class="hidden name"><code>dataset_factory.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A <a href="Dataset.html">Dataset</a> can constructed using one or more <a href="Dataset.html">DatasetFactory</a>s.
This function helps you construct a <code>DatasetFactory</code> that you can pass to
<code><a href="open_dataset.html">open_dataset()</a></code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dataset_factory</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  filesystem <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"parquet"</span>, <span class="st">"arrow"</span>, <span class="st">"ipc"</span>, <span class="st">"feather"</span>, <span class="st">"csv"</span>, <span class="st">"tsv"</span>, <span class="st">"text"</span><span class="op">)</span>,</span>
<span>  partitioning <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hive_style <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  factory_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>A string path to a directory containing data files, a vector of one
one or more string paths to data files, or a list of <code>DatasetFactory</code> objects
whose datasets should be combined. If this argument is specified it will be
used to construct a <code>UnionDatasetFactory</code> and other arguments will be
ignored.</p></dd>


<dt>filesystem</dt>
<dd><p>A <a href="FileSystem.html">FileSystem</a> object; if omitted, the <code>FileSystem</code> will
be detected from <code>x</code></p></dd>


<dt>format</dt>
<dd><p>A <a href="FileFormat.html">FileFormat</a> object, or a string identifier of the format of
the files in <code>x</code>. Currently supported values:</p><ul><li><p>"parquet"</p></li>
<li><p>"ipc"/"arrow"/"feather", all aliases for each other; for Feather, note that
only version 2 files are supported</p></li>
<li><p>"csv"/"text", aliases for the same thing (because comma is the default
delimiter for text files</p></li>
<li><p>"tsv", equivalent to passing <code>format = "text", delimiter = "\t"</code></p></li>
</ul><p>Default is "parquet", unless a <code>delimiter</code> is also specified, in which case
it is assumed to be "text".</p></dd>


<dt>partitioning</dt>
<dd><p>One of</p><ul><li><p>A <code>Schema</code>, in which case the file paths relative to <code>sources</code> will be
parsed, and path segments will be matched with the schema fields. For
example, <code>schema(year = int16(), month = int8())</code> would create partitions
for file paths like "2019/01/file.parquet", "2019/02/file.parquet", etc.</p></li>
<li><p>A character vector that defines the field names corresponding to those
path segments (that is, you're providing the names that would correspond
to a <code>Schema</code> but the types will be autodetected)</p></li>
<li><p>A <code>HivePartitioning</code> or <code>HivePartitioningFactory</code>, as returned
by <code><a href="hive_partition.html">hive_partition()</a></code> which parses explicit or autodetected fields from
Hive-style path segments</p></li>
<li><p><code>NULL</code> for no partitioning</p></li>
</ul></dd>


<dt>hive_style</dt>
<dd><p>Logical: if <code>partitioning</code> is a character vector or a
<code>Schema</code>, should it be interpreted as specifying Hive-style partitioning?
Default is <code>NA</code>, which means to inspect the file paths for Hive-style
partitioning and behave accordingly.</p></dd>


<dt>factory_options</dt>
<dd><p>list of optional FileSystemFactoryOptions:</p><ul><li><p><code>partition_base_dir</code>: string path segment prefix to ignore when
discovering partition information with DirectoryPartitioning. Not
meaningful (ignored with a warning) for HivePartitioning, nor is it
valid when providing a vector of file paths.</p></li>
<li><p><code>exclude_invalid_files</code>: logical: should files that are not valid data
files be excluded? Default is <code>FALSE</code> because checking all files up
front incurs I/O and thus will be slower, especially on remote
filesystems. If false and there are invalid files, there will be an
error at scan time. This is the only FileSystemFactoryOption that is
valid for both when providing a directory path in which to discover
files and when providing a vector of file paths.</p></li>
<li><p><code>selector_ignore_prefixes</code>: character vector of file prefixes to ignore
when discovering files in a directory. If invalid files can be excluded
by a common filename prefix this way, you can avoid the I/O cost of
<code>exclude_invalid_files</code>. Not valid when providing a vector of file paths
(but if you're providing the file list, you can filter invalid files
yourself).</p></li>
</ul></dd>


<dt>...</dt>
<dd><p>Additional format-specific options, passed to
<code>FileFormat$create()</code>. For CSV options, note that you can specify them either
with the Arrow C++ library naming ("delimiter", "quoting", etc.) or the
<code>readr</code>-style naming used in <code><a href="read_delim_arrow.html">read_csv_arrow()</a></code> ("delim", "quote", etc.).
Not all <code>readr</code> options are currently supported; please file an issue if you
encounter one that <code>arrow</code> should support.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <code>DatasetFactory</code> object. Pass this to <code><a href="open_dataset.html">open_dataset()</a></code>,
in a list potentially with other <code>DatasetFactory</code> objects, to create
a <code>Dataset</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>If you would only have a single <code>DatasetFactory</code> (for example, you have a
single directory containing Parquet files), you can call <code><a href="open_dataset.html">open_dataset()</a></code>
directly. Use <code>dataset_factory()</code> when you
want to combine different directories, file systems, or file formats.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Neal Richardson, Ian Cook, Nic Crane, Dewey Dunnington, Romain François, Jonathan Keane, Dragoș Moldovan-Grünfeld, Jeroen Ooms, Apache Arrow.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

