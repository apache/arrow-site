<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Packaging checklist for CRAN release • Arrow R Package</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png"><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><script src="extra.js"></script><meta property="og:title" content="Packaging checklist for CRAN release"><meta property="og:image" content="https://arrow.apache.org/img/arrow-logo_horizontal_black-txt_white-bg.png"><meta property="og:image:alt" content="Apache Arrow logo, displaying the triple chevron image adjacent to the text"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@apachearrow"><meta name="twitter:site" content="@apachearrow"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  /* We explicitly disable cookie tracking to avoid privacy issues */
  _paq.push(['disableCookies']);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://analytics.apache.org/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '20']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script><!-- End Matomo Code --></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-black"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">Arrow R Package</a>

    <span class="version">
      <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">12.0.0</small>
    </span>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="articles/arrow.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Using the package</h6>
    <a class="dropdown-item" href="articles/read_write.html">Reading and writing data files</a>
    <a class="dropdown-item" href="articles/data_wrangling.html">Data analysis with dplyr syntax</a>
    <a class="dropdown-item" href="articles/dataset.html">Working with multi-file data sets</a>
    <a class="dropdown-item" href="articles/python.html">Integrating Arrow, Python, and R</a>
    <a class="dropdown-item" href="articles/fs.html">Using cloud storage (S3, GCS)</a>
    <a class="dropdown-item" href="articles/flight.html">Connecting to a Flight server</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Arrow concepts</h6>
    <a class="dropdown-item" href="articles/data_objects.html">Data objects</a>
    <a class="dropdown-item" href="articles/data_types.html">Data types</a>
    <a class="dropdown-item" href="articles/metadata.html">Metadata</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Installation</h6>
    <a class="dropdown-item" href="articles/install.html">Installing on Linux</a>
    <a class="dropdown-item" href="articles/install_nightly.html">Installing development versions</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/apache/arrow/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Packaging checklist for CRAN release</h1>
      <small class="dont-index">Source: <a href="https://github.com/apache/arrow/blob/main/r/PACKAGING.md" class="external-link"><code>PACKAGING.md</code></a></small>
    </div>

<div id="packaging-checklist-for-cran-release" class="section level1">
<p>For a high-level overview of the release process see the <a href="https://arrow.apache.org/docs/developers/release.html#post-release-tasks" class="external-link">Apache Arrow Release Management Guide</a>.</p>
<p>Before the release candidate is cut:</p>
<ul><li>[ ] <a href="https://github.com/apache/arrow/issues/new/" class="external-link">Create a GitHub issue</a> entitled <code>[R] CRAN packaging checklist for version X.X.X</code> and copy this checklist to the issue.</li>
<li>[ ] Evaluate the status of any failing <a href="http://crossbow.voltrondata.com" class="external-link">nightly tests and nightly packaging builds</a>. These checks replicate most of the checks that CRAN runs, so we need them all to be passing or to understand that the failures may (though won’t necessarily) result in a rejection from CRAN.</li>
<li>[ ] Check <a href="https://cran.rstudio.org/web/checks/check_results_arrow.html" class="external-link">current CRAN check results</a>
</li>
<li>[ ] Ensure the contents of the README are accurate and up to date</li>
<li>[ ] Run <code>urlchecker::url_check()</code> on the R directory at the release candidate commit. Ignore any errors with badges as they will be removed in the CRAN release branch.</li>
<li>[ ] <a href="https://style.tidyverse.org/news.html#news-release" class="external-link">Polish NEWS</a> but do <strong>not</strong> update version numbers (this is done automatically later).</li>
<li>[ ] For major releases, prepare tweet thread highlighting new features</li>
</ul><p>Wait for the release candidate to be cut:</p>
<ul><li>[ ] Release candidate!</li>
<li>[ ] Create a CRAN-release branch from the release candidate commit</li>
</ul><p>Make pull requests into the <a href="https://github.com/autobrew" class="external-link">autobrew</a> and <a href="https://github.com/r-windows/rtools-packages" class="external-link">rtools-packages</a> repositories used by the configure script on MacOS and Windows. These pull requests will use the release candidate as the source.</p>
<ul><li>[ ] Pull request to modify <a href="https://github.com/autobrew/homebrew-core/blob/high-sierra/Formula/apache-arrow.rb" class="external-link">the apache-arrow autobrew formula</a> to update the release version, SHA256 checksum of the release source file (which can be found in the same directory as the release source file), and any changes to dependencies and build steps that have changed in the <a href="https://github.com/apache/arrow/blob/main/dev/tasks/homebrew-formulae/autobrew/apache-arrow.rb" class="external-link">copy of the formula we have of that formula in the Arrow repo</a>
</li>
<li>[ ] Pull request to modify <a href="https://github.com/autobrew/homebrew-cran/blob/master/Formula/apache-arrow-static.rb" class="external-link">the apache-arrow-static autobrew formula</a> to update the version, SHA, and any changes to dependencies and build steps that have changed in the <a href="https://github.com/apache/arrow/blob/main/dev/tasks/homebrew-formulae/autobrew/apache-arrow-static.rb" class="external-link">copy of the formula we have of that formula in the Arrow repo</a>
</li>
<li>[ ] Pull request to modify the <a href="https://github.com/autobrew/scripts/blob/master/apache-arrow" class="external-link">autobrew script</a> to include any additions made to <a href="https://github.com/apache/arrow/blob/main/r/tools/autobrew" class="external-link">r/tools/autobrew</a>.</li>
<li>[ ] Pull request to modify the <a href="https://github.com/r-windows/rtools-packages/blob/master/mingw-w64-arrow/PKGBUILD" class="external-link">RTools PKGBUILD script</a> to reflect changes in <a href="https://github.com/apache/arrow/blob/main/ci/scripts/PKGBUILD" class="external-link">ci/PKGBUILD</a>, uncommenting the line that says “uncomment to test the rc”.</li>
</ul><p>Prepare and check the .tar.gz that will be released to CRAN.</p>
<ul><li>[ ] <code>git fetch upstream &amp;&amp; git checkout release-X.X.X-rcXX &amp;&amp; git clean -f -d</code>
</li>
<li>[ ] Run <code>make build</code>. This copies Arrow C++ into tools/cpp, prunes some unnecessary components, and runs <code>R CMD build</code> to generate the source tarball. Because this will install the package, you will need to ensure that the version of Arrow C++ available to the configure script is the same as the version that is vendored into the R package (e.g., you may need to unset <code>ARROW_HOME</code>).</li>
<li>[ ] <code>devtools::check_built("arrow_X.X.X.tar.gz")</code> locally</li>
<li>[ ] Run reverse dependency checks. Currently this is a <a href="https://gist.github.com/paleolimbot/630fdab1e204d70fea97633d8fa15ccb" class="external-link">manual process</a>; however, in the future it may be a crossbow nightly job.</li>
</ul><p>Wait for the official release…</p>
<ul><li>[ ] Release vote passed!</li>
<li>[ ] If the release candidate commit updated, rebase the CRAN release branch on that commit.</li>
<li>[ ] Pick any commits that were made to main since the release commit that were needed to fix CRAN-related submission issues identified in the above steps.</li>
<li>[ ] Remove badges from README.md</li>
<li>[ ] Run <code>urlchecker::url_check()</code> on the R directory</li>
<li>[ ] Create a PR entitled <code>WIP: [R] Verify CRAN release-10.0.1-rc0</code>. Add a comment <code>@github-actions crossbow submit --group r</code> to run all R crossbow jobs against the CRAN-specific release branch.</li>
<li>[ ] Regenerate arrow_X.X.X.tar.gz (i.e., <code>make build</code>)</li>
</ul><p>Create new autobrew and r-windows PRs such that they use the <em>release</em> instead of the <em>release candidate</em>; ensure linux binary packages are available:</p>
<ul><li>[ ] PR into autobrew/homebrew-core (apache-arrow autobrew formula)</li>
<li>[ ] PR into autobrew/homebrew-core (apache-arrow-static autobrew formula)</li>
<li>[ ] PR into autobrew/scripts</li>
<li>[ ] PR into r-windows/rtools-packages</li>
<li>[ ] Ensure linux binaries are available in the artifactory: <a href="https://apache.jfrog.io/ui/repos/tree/General/arrow/r" class="external-link uri">https://apache.jfrog.io/ui/repos/tree/General/arrow/r</a>
</li>
</ul><p>Check binary Arrow C++ distributions specific to the R package:</p>
<ul><li>[ ] Upload the .tar.gz to <a href="https://win-builder.r-project.org/upload.aspx" class="external-link">win-builder</a> (r-devel only) and confirm (with Nic, who will automatically receive an email about the results) that the check is clean. This step cannot be completed before Jeroen has put the binaries in the MinGW repository, i.e. <a href="https://ftp.opencpu.org/rtools/ucrt64/" class="external-link">here</a>, <a href="https://ftp.opencpu.org/rtools/mingw64/" class="external-link">here</a>, and <a href="https://ftp.opencpu.org/rtools/mingw32/" class="external-link">here</a>.</li>
<li>[ ] Upload the .tar.gz to <a href="https://mac.r-project.org/macbuilder/submit.html" class="external-link">MacBuilder</a> and confirm that the check is clean</li>
<li>[ ] Check <code>install.packages("arrow_X.X.X.tar.gz")</code> on Ubuntu and ensure that the hosted binaries are used</li>
<li>[ ] <code>devtools::check_built("arrow_X.X.X.tar.gz")</code> locally one more time (for luck)</li>
</ul><p>Submit!</p>
<ul><li>[ ] Upload arrow_X.X.X.tar.gz to the <a href="https://xmpalantir.wu.ac.at/cransubmit/" class="external-link">CRAN submit page</a>
</li>
<li>[ ] Confirm the submission email</li>
</ul><p>Wait for CRAN…</p>
<ul><li>[ ] Accepted!</li>
<li>[ ] Tag the tip of the CRAN-specific release branch</li>
<li>[ ] Add a new line to the matrix in the <a href="https://github.com/apache/arrow/blob/main/dev/tasks/r/github.linux.arrow.version.back.compat.yml" class="external-link">backwards compatability job</a>
</li>
<li>[ ] (patch releases only) Update the package version in <code>ci/scripts/PKGBUILD</code>, <code>dev/tasks/homebrew-formulae/autobrew/apache-arrow.rb</code>, <code>r/DESCRIPTION</code>, and <code>r/NEWS.md</code>
</li>
<li>[ ] Update the packaging checklist template to reflect any new realities of the packaging process.</li>
<li>[ ] Wait for CRAN-hosted binaries on the <a href="https://cran.r-project.org/package=arrow" class="external-link">CRAN package page</a> to reflect the new version</li>
<li>[ ] Tweet!</li>
</ul></div>

  </main></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p><a href="https://arrow.apache.org/docs/r/versions.html">Older versions of these docs</a></p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

