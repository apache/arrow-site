
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Starting a Ballista cluster using Docker &#8212; Arrow Datafusion  documentation</title>
    
    <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" href="../../../_static/styles/pydata-sphinx-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/theme_overrides.css" />
    
    <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Starting a Ballista cluster using Docker Compose" href="docker-compose.html" />
    <link rel="prev" title="Deploying a standalone Ballista cluster using cargo install" href="cargo-install.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    


    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items">
<a class="navbar-brand" href="../../../index.html">
  <img src="../../../_static/images/DataFusion-Logo-Background-White.png" class="logo" alt="logo">
</a>

<form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
    <p>
 <span class="caption-text">
  Supported Environments
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://docs.rs/crate/datafusion/">
   Rust
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../python/index.html">
   Python
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../python/api.html">
     API Reference
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../../python/api/dataframe.html">
       DataFrame
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
      <label for="toctree-checkbox-3">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../../python/generated/datafusion.DataFrame.html">
         datafusion.DataFrame
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../../python/api/execution_context.html">
       ExecutionContext
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
      <label for="toctree-checkbox-4">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../../python/generated/datafusion.ExecutionContext.html">
         datafusion.ExecutionContext
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../../python/api/expression.html">
       Expression
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
      <label for="toctree-checkbox-5">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../../python/generated/datafusion.Expression.html">
         datafusion.Expression
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../../python/api/functions.html">
       Functions
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
      <label for="toctree-checkbox-6">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../../python/generated/datafusion.functions.html">
         datafusion.functions
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../cli/index.html">
   Command line
  </a>
 </li>
</ul>
<p>
 <span class="caption-text">
  User Guide
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../introduction.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../example-usage.html">
   Example Usage
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../library.html">
   Using DataFusion as a library
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../cli.html">
   DataFusion Command-line Interface
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../sql/index.html">
   SQL Reference
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../sql/sql_status.html">
     Status
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../sql/select.html">
     SELECT syntax
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../sql/ddl.html">
     DDL
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../sql/datafusion-functions.html">
     DataFusion Functions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../index.html">
   Ballista Distributed Compute
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="../introduction.html">
     Overview
    </a>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="index.html">
     Start a Ballista Cluster
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="cargo-install.html">
       Deploying a standalone Ballista cluster using cargo install
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       Starting a Ballista cluster using Docker
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="docker-compose.html">
       Starting a Ballista cluster using Docker Compose
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="kubernetes.html">
       Deploying Ballista with Kubernetes
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="raspberrypi.html">
       Running Ballista on Raspberry Pi
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration.html">
       Configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../clients/index.html">
     Clients
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../clients/rust.html">
       Ballista Rust Client
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../clients/python.html">
       Python
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../faq.html">
   Frequently Asked Questions
  </a>
 </li>
</ul>
<p>
 <span class="caption-text">
  Specification
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../specification/roadmap.html">
   Roadmap
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../specification/invariants.html">
   DataFusion’s Invariants
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../specification/output-field-name-semantic.html">
   Datafusion output field name semantic
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../specification/quarterly_roadmap.html">
   Roadmap
  </a>
 </li>
</ul>
<p>
 <span class="caption-text">
  README
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/apache/arrow-datafusion/blob/master/README.md">
   Datafusion
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/apache/arrow-datafusion/tree/master/ballista/README.md">
   Ballista
  </a>
 </li>
</ul>
<p>
 <span class="caption-text">
  Community
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../community/communication.html">
   Communication
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/apache/arrow-datafusion/issues">
   Issue tracker
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/apache/arrow-datafusion/blob/master/CODE_OF_CONDUCT.md">
   Code of conduct
  </a>
 </li>
</ul>

    
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#build-docker-image">
   Build Docker image
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#start-a-scheduler">
     Start a Scheduler
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#start-executors">
     Start executors
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-etcd-as-backing-store">
     Using etcd as backing store
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                

<div class="tocsection editthispage">
    <a href="https://github.com/apache/arrow-datafusion/edit/master/docs/source/user-guide/distributed/deployment/docker.md">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <!---
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License.
-->
<section id="starting-a-ballista-cluster-using-docker">
<h1>Starting a Ballista cluster using Docker<a class="headerlink" href="#starting-a-ballista-cluster-using-docker" title="Permalink to this headline">¶</a></h1>
<section id="build-docker-image">
<h2>Build Docker image<a class="headerlink" href="#build-docker-image" title="Permalink to this headline">¶</a></h2>
<p>There is no officially published Docker image so it is currently necessary to build the image from source instead.</p>
<p>Run the following commands to clone the source repository and build the Docker image.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone git@github.com:apache/arrow-datafusion.git -b <span class="m">5</span>.1.0
<span class="nb">cd</span> arrow-datafusion
./dev/build-ballista-docker.sh
</pre></div>
</div>
<p>This will create an image with the tag <code class="docutils literal notranslate"><span class="pre">ballista:0.6.0</span></code>.</p>
<section id="start-a-scheduler">
<h3>Start a Scheduler<a class="headerlink" href="#start-a-scheduler" title="Permalink to this headline">¶</a></h3>
<p>Start a scheduler using the following syntax:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run --network<span class="o">=</span>host <span class="se">\</span>
  -d ballista:0.6.0 <span class="se">\</span>
  /scheduler --bind-port <span class="m">50050</span>
</pre></div>
</div>
<p>Run <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">ps</span></code> to check that the process is running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker ps
CONTAINER ID   IMAGE            COMMAND                  CREATED         STATUS        PORTS     NAMES
1f3f8b5ed93a   ballista:0.6.0   &quot;/scheduler --bind-p…&quot;   2 seconds ago   Up 1 second             tender_archimedes
</pre></div>
</div>
<p>Run <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">logs</span> <span class="pre">CONTAINER_ID</span></code> to check the output from the process:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker logs 1f3f8b5ed93a
[2021-08-28T15:45:11Z INFO  ballista_scheduler] Ballista v0.6.0 Scheduler listening on 0.0.0.0:50050
</pre></div>
</div>
</section>
<section id="start-executors">
<h3>Start executors<a class="headerlink" href="#start-executors" title="Permalink to this headline">¶</a></h3>
<p>Start one or more executor processes. Each executor process will need to listen on a different port.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run --network<span class="o">=</span>host <span class="se">\</span>
  -d ballista:0.6.0 <span class="se">\</span>
  /executor --external-host localhost --bind-port <span class="m">50051</span>
</pre></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">ps</span></code> to check that both the scheduer and executor(s) are now running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker ps
CONTAINER ID   IMAGE            COMMAND                  CREATED          STATUS          PORTS     NAMES
7c6941bb8dc0   ballista:0.6.0   &quot;/executor --externa…&quot;   3 seconds ago    Up 2 seconds              tender_goldberg
1f3f8b5ed93a   ballista:0.6.0   &quot;/scheduler --bind-p…&quot;   50 seconds ago   Up 49 seconds             tender_archimedes
</pre></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">logs</span> <span class="pre">CONTAINER_ID</span></code> to check the output from the executor(s):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ docker logs 7c6941bb8dc0
[2021-08-28T15:45:58Z INFO  ballista_executor] Running with config:
[2021-08-28T15:45:58Z INFO  ballista_executor] work_dir: /tmp/.tmpeyEM76
[2021-08-28T15:45:58Z INFO  ballista_executor] concurrent_tasks: 4
[2021-08-28T15:45:58Z INFO  ballista_executor] Ballista v0.6.0 Rust Executor listening on 0.0.0.0:50051
</pre></div>
</div>
</section>
<section id="using-etcd-as-backing-store">
<h3>Using etcd as backing store<a class="headerlink" href="#using-etcd-as-backing-store" title="Permalink to this headline">¶</a></h3>
<p><em>NOTE: This functionality is currently experimental</em></p>
<p>Ballista can optionally use <a class="reference external" href="https://etcd.io/">etcd</a> as a backing store for the scheduler. Use the following commands
to launch the scheduler with this option enabled.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run --network<span class="o">=</span>host <span class="se">\</span>
  -d ballista:0.6.0 <span class="se">\</span>
  /scheduler --bind-port <span class="m">50050</span> <span class="se">\</span>
  --config-backend etcd <span class="se">\</span>
  --etcd-urls etcd:2379
</pre></div>
</div>
<p>Please refer to the <a class="reference external" href="https://etcd.io/">etcd</a> web site for installation instructions. Etcd version 3.4.9 or later is
recommended.</p>
</section>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="cargo-install.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Deploying a standalone Ballista cluster using cargo install</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="docker-compose.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Starting a Ballista cluster using Docker Compose</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021, Apache Software Foundation.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>