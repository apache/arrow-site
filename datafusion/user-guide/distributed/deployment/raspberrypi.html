
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Running Ballista on Raspberry Pi &#8212; Arrow Datafusion  documentation</title>
    
    <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" href="../../../_static/styles/pydata-sphinx-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/theme_overrides.css" />
    
    <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Configuration" href="configuration.html" />
    <link rel="prev" title="Deploying Ballista with Kubernetes" href="kubernetes.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    


    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items">
<a class="navbar-brand" href="../../../index.html">
  <img src="../../../_static/images/DataFusion-Logo-Background-White.png" class="logo" alt="logo">
</a>

<form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
    <p>
 <span class="caption-text">
  Supported Environments
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://docs.rs/crate/datafusion/">
   Rust
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../../python/index.html">
   Python
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../../python/api.html">
     API Reference
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../../python/api/dataframe.html">
       DataFrame
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
      <label for="toctree-checkbox-3">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../../python/generated/datafusion.DataFrame.html">
         datafusion.DataFrame
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../../python/api/execution_context.html">
       ExecutionContext
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
      <label for="toctree-checkbox-4">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../../python/generated/datafusion.ExecutionContext.html">
         datafusion.ExecutionContext
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../../python/api/expression.html">
       Expression
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
      <label for="toctree-checkbox-5">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../../python/generated/datafusion.Expression.html">
         datafusion.Expression
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../../python/api/functions.html">
       Functions
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
      <label for="toctree-checkbox-6">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../../python/generated/datafusion.functions.html">
         datafusion.functions
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../cli/index.html">
   Command line
  </a>
 </li>
</ul>
<p>
 <span class="caption-text">
  User Guide
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../introduction.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../example-usage.html">
   Example Usage
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../library.html">
   Using DataFusion as a library
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../cli.html">
   DataFusion Command-line Interface
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../sql/index.html">
   SQL Reference
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../sql/sql_status.html">
     Status
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../sql/select.html">
     SELECT syntax
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../sql/ddl.html">
     DDL
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../sql/datafusion-functions.html">
     DataFusion Functions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../index.html">
   Ballista Distributed Compute
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="../introduction.html">
     Overview
    </a>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="index.html">
     Start a Ballista Cluster
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="cargo-install.html">
       Deploying a standalone Ballista cluster using cargo install
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="docker.html">
       Starting a Ballista cluster using Docker
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="docker-compose.html">
       Starting a Ballista cluster using Docker Compose
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="kubernetes.html">
       Deploying Ballista with Kubernetes
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       Running Ballista on Raspberry Pi
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="configuration.html">
       Configuration
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../clients/index.html">
     Clients
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../clients/rust.html">
       Ballista Rust Client
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../clients/python.html">
       Python
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../faq.html">
   Frequently Asked Questions
  </a>
 </li>
</ul>
<p>
 <span class="caption-text">
  Specification
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../specification/roadmap.html">
   Roadmap
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../specification/invariants.html">
   DataFusion’s Invariants
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../specification/output-field-name-semantic.html">
   Datafusion output field name semantic
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../specification/quarterly_roadmap.html">
   Roadmap
  </a>
 </li>
</ul>
<p>
 <span class="caption-text">
  README
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/apache/arrow-datafusion/blob/master/README.md">
   Datafusion
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/apache/arrow-datafusion/tree/master/ballista/README.md">
   Ballista
  </a>
 </li>
</ul>
<p>
 <span class="caption-text">
  Community
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../community/communication.html">
   Communication
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/apache/arrow-datafusion/issues">
   Issue tracker
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/apache/arrow-datafusion/blob/master/CODE_OF_CONDUCT.md">
   Code of conduct
  </a>
 </li>
</ul>

    
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#preparing-the-raspberry-pi">
   Preparing the Raspberry Pi
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cross-compiling-datafusion-for-the-raspberry-pi">
   Cross Compiling DataFusion for the Raspberry Pi
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#deploying-the-binaries-to-raspberry-pi">
   Deploying the binaries to Raspberry Pi
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#docker">
   Docker
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#kubernetes">
   Kubernetes
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                

<div class="tocsection editthispage">
    <a href="https://github.com/apache/arrow-datafusion/edit/master/docs/source/user-guide/distributed/deployment/raspberrypi.md">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <!---
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License.
-->
<section id="running-ballista-on-raspberry-pi">
<h1>Running Ballista on Raspberry Pi<a class="headerlink" href="#running-ballista-on-raspberry-pi" title="Permalink to this headline">¶</a></h1>
<p>The Raspberry Pi single-board computer provides a fun and relatively inexpensive way to get started with distributed
computing.</p>
<p>These instructions have been tested using an Ubuntu Linux desktop as the host, and a
<a class="reference external" href="https://www.raspberrypi.org/products/raspberry-pi-4-model-b/">Raspberry Pi 4 Model B</a> with 4 GB RAM as the target.</p>
<section id="preparing-the-raspberry-pi">
<h2>Preparing the Raspberry Pi<a class="headerlink" href="#preparing-the-raspberry-pi" title="Permalink to this headline">¶</a></h2>
<p>We recommend installing the 64-bit version of <a class="reference external" href="https://ubuntu.com/raspberry-pi">Ubuntu for Raspberry Pi</a>.</p>
<p>The Rust implementation of Arrow does not work correctly on 32-bit ARM architectures
(<a class="reference external" href="https://github.com/apache/arrow-rs/issues/109">issue</a>).</p>
</section>
<section id="cross-compiling-datafusion-for-the-raspberry-pi">
<h2>Cross Compiling DataFusion for the Raspberry Pi<a class="headerlink" href="#cross-compiling-datafusion-for-the-raspberry-pi" title="Permalink to this headline">¶</a></h2>
<p>We do not yet publish official Docker images as part of the release process, although we do plan to do this in the
future (<a class="reference external" href="https://github.com/apache/arrow-datafusion/issues/228">issue #228</a>).</p>
<p>Although it is technically possible to build DataFusion directly on a Raspberry Pi, it really isn’t very practical.
It is much faster to use <a class="reference external" href="https://github.com/rust-embedded/cross">cross</a> to cross-compile from a more powerful
desktop computer.</p>
<p>Docker must be installed and the Docker daemon must be running before cross-compiling with cross. See the
<a class="reference external" href="https://github.com/rust-embedded/cross">cross</a> project for more detailed instructions.</p>
<p>Run the following command to install cross.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cargo install cross
</pre></div>
</div>
<p>From the root of the DataFusion project, run the following command to cross-compile for ARM 64 architecture.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cross build --release --target aarch64-unknown-linux-gnu
</pre></div>
</div>
<p>It is even possible to cross-test from your desktop computer:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cross <span class="nb">test</span> --target aarch64-unknown-linux-gnu
</pre></div>
</div>
</section>
<section id="deploying-the-binaries-to-raspberry-pi">
<h2>Deploying the binaries to Raspberry Pi<a class="headerlink" href="#deploying-the-binaries-to-raspberry-pi" title="Permalink to this headline">¶</a></h2>
<p>You should now be able to copy the executable to the Raspberry Pi using scp on Linux. You will need to change the IP
address in these commands to be the IP address for your Raspberry Pi. The easiest way to find this is to connect a
keyboard and monitor to the Pi and run <code class="docutils literal notranslate"><span class="pre">ifconfig</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>scp ./target/aarch64-unknown-linux-gnu/release/ballista-scheduler ubuntu@10.0.0.186:
scp ./target/aarch64-unknown-linux-gnu/release/ballista-executor ubuntu@10.0.0.186:
</pre></div>
</div>
<p>Finally, ssh into the Pi and make the binaries executable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh ubuntu@10.0.0.186
chmod +x ballista-scheduler ballista-executor
</pre></div>
</div>
<p>It is now possible to run the Ballista scheduler and executor natively on the Pi.</p>
</section>
<section id="docker">
<h2>Docker<a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h2>
<p>Using Docker’s <code class="docutils literal notranslate"><span class="pre">buildx</span></code> cross-platform functionality, we can also build a docker image targeting ARM64
from any desktop environment. This will require write access to a Docker repository
on <a class="reference external" href="https://hub.docker.com/">Docker Hub</a> because the resulting Docker image will be pushed directly
to the repo.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">DOCKER_REPO</span><span class="o">=</span>myrepo ./dev/build-ballista-docker-arm64.sh
</pre></div>
</div>
<p>On the Raspberry Pi:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker pull myrepo/ballista-arm64
</pre></div>
</div>
<p>Run a scheduler:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run -it myrepo/ballista-arm64 /ballista-scheduler
</pre></div>
</div>
<p>Run an executor:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run -it myrepo/ballista-arm64 /ballista-executor
</pre></div>
</div>
<p>Run the benchmarks:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run -it myrepo/ballista-arm64 <span class="se">\</span>
  /tpch benchmark datafusion --query<span class="o">=</span><span class="m">1</span> --path<span class="o">=</span>/path/to/data --format<span class="o">=</span>parquet <span class="se">\</span>
  --concurrency<span class="o">=</span><span class="m">24</span> --iterations<span class="o">=</span><span class="m">1</span> --debug --host<span class="o">=</span>ballista-scheduler --bind-port<span class="o">=</span><span class="m">50050</span>
</pre></div>
</div>
<p>Note that it will be necessary to mount appropriate volumes into the containers and also configure networking
so that the Docker containers can communicate with each other. This can be achieved using Docker compose or Kubernetes.</p>
</section>
<section id="kubernetes">
<h2>Kubernetes<a class="headerlink" href="#kubernetes" title="Permalink to this headline">¶</a></h2>
<p>With Docker images built using the instructions above, it is now possible to deploy Ballista to a Kubernetes cluster
running on one of more Raspberry Pi computers. Refer to the instructions in the <a class="reference internal" href="kubernetes.html"><span class="doc std std-doc">Kubernetes</span></a> chapter
for more information, and remember to change the Docker image name to <code class="docutils literal notranslate"><span class="pre">myrepo/ballista-arm64</span></code>.</p>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="kubernetes.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Deploying Ballista with Kubernetes</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="configuration.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Configuration</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021, Apache Software Foundation.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>